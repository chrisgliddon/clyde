000000                      ;------------------
000000                      ;
000000                      ;  SN_MAIN.658 -- SNES MAIN PROGRAM FILE.
000000                      ;
000000                      ;COMPILE THIS FILE TO PRODUCE EXECUTABLE CODE.
000000                      ;
000000                      ;11/9/93 BY PETER FOKOS
000000                      ;
000000                      ;------------------
000000                      ;
000000                      ;  SNES_ANI.658 -- ANIMATION DISPLAY PROGRAM
000000                      ;
000000                      ;12/27/93 BY PETER FOKOS
000000                      ;
000000                      ;------------------
000000                      
000000                      	INCLUDE	MACROS.658	;MACRO FILE
000000                      ;------------------
000000                      ;
000000                      ;  MACROS.658 -- MACRO FILE
000000                      ;
000000                      ;INCLUDE IN SN_MAIN.658
000000                      ;
000000                      ;------------------
000000                      ;SET THE PROCESSOR TO 65816 MODE
000000                      
000000                      SET_16BIT	MACRO
000000                      
000000                      	CLC		;CARRY = 0
000000                      	XCE		;SET EMULATION BIT TO 0
000000                      	MX	0	;ACC,X,Y ALL 16 BIT
000000                      
000000                      	ENDM
000000                      
000000                      ;------------------
000000                      ;SET THE PROCESSOR TO 6502 MODE
000000                      
000000                      SET_8BIT	MACRO
000000                      
000000                      	SEC		;CARRY = 1
000000                      	XCE		;SET EMULATION BIT TO 1
000000                      	MX	3	;ACC,X,Y ALL 8 BIT
000000                      
000000                      	ENDM
000000                      
000000                      ;------------------
000000                      ;SET THE ACC,X,Y TO 16 BIT MODE
000000                      
000000                      SET_AXY16	MACRO
000000                      
000000                      	REP	#$30	;M,X SET TO 16 BIT
000000                      	MX	0	
000000                      
000000                      	ENDM
000000                      
000000                      ;------------------
000000                      ;SET THE ACC TO 16 BIT MODE
000000                      
000000                      SET_A16	MACRO
000000                      
000000                      	REP	#$20	;M SET TO 16 BIT
000000                      	LONGA	ON
000000                      
000000                      	ENDM
000000                      
000000                      ;------------------
000000                      ;SET THE X,Y TO 16 BIT MODE
000000                      
000000                      SET_XY16	MACRO
000000                      
000000                      	REP	#$10	;X SET TO 16 BIT MODE
000000                      	LONGI	ON
000000                      
000000                      	ENDM
000000                      
000000                      ;------------------
000000                      ;SET THE ACC,X,Y TO 8 BIT MODE
000000                      
000000                      SET_AXY8	MACRO
000000                      
000000                      	SEP	#$30	;ACC,X,Y SET TO 8 BIT MODE	
000000                      	MX	3   	;TELL ASSEMBLER
000000                      
000000                      	ENDM
000000                      
000000                      ;------------------
000000                      ;SET ACC TO 8 BIT MODE
000000                      
000000                      SET_A8	MACRO
000000                      
000000                      	SEP	#$20	;ACC SET TO 8 BIT
000000                      	LONGA	OFF
000000                      
000000                      	ENDM
000000                      
000000                      ;------------------
000000                      ;SET X,Y TO 8 BIT MODE
000000                      
000000                      SET_XY8	MACRO
000000                      
000000                      	SEP	#$10	;X,Y SET TO 8 BIT
000000                      	LONGI	OFF
000000                      
000000                      	ENDM
000000                      
000000                      	
000000                      ;------------------
000000                      ;EXECUTE THE COMMAND SCRIPT
000000                      
000000                      RUN	MACRO
000000                      
000000                      	SET_A8
000000                      	SET_XY16
000000                      	LDA	#^\1
000000                      	PHA
000000                      	PLB		;SET DATA BANK
000000                      	LDY	#<\1
000000                      	JSL	DO_SCRIPT
000000                      
000000                      	ENDM
000000                      
000000                      ;------------------
000000                      ;SCRIPT MACROS
000000                      
000000                      SC_END	MACRO
000000                      
000000                      	DB	0	;END OF SCRIPT
000000                      
000000                      	ENDM
000000                      
000000                      ;=====
000000                      
000000                      SC_PAL	MACRO
000000                      
000000                      	DB	1	;SCRIPT CODE
000000                      	DT	\1	;SOURCE PALETTE ADDRESS
000000                      	DB	\2	;DESTINATION ADDRESS IN PALETTE
000000                      	DB	\3	;# OF COLORS TO MOVE
000000                      
000000                      	ENDM
000000                      
000000                      ;=====
000000                      
000000                      SC_VRAM	MACRO
000000                      
000000                      	DB	2	;SCRIPT CODE
000000                      	DT	\1	;SOURCE ADDRESS
000000                      	DW	\2	;DESTINATION ADDRESS IN VRAM
000000                      	DW	\3	;# OF BYTES TO MOVE
000000                      
000000                      	ENDM
000000                      
000000                      ;=====
000000                      
000000                      SC_JPH 	MACRO
000000                      
000000                      	DB	3	;SCRIPT CODE
000000                      	DT	\1	;ADDRESS OF JOYPAD HANDLER LIST
000000                      
000000                      	ENDM
000000                      
000000                      ;=====
000000                      
000000                      SC_LVL 	MACRO
000000                      
000000                      	DB	4	;SCRIPT CODE
000000                      	DT	\1	;ADDRESS OF LEVEL DATA
000000                      
000000                      	ENDM
000000                      
000000                      ;=====
000000                      
000000                      SC_ON 	MACRO
000000                      
000000                      	DB	5	;SCRIPT CODE
000000                      
000000                      	ENDM
000000                      
000000                      ;=====
000000                      
000000                      SC_JSL 	MACRO
000000                      
000000                      	DB	6	;SCRIPT CODE
000000                      	DT	\1	;ADDRESS OF LONG ROUTINE
000000                      
000000                      	ENDM
000000                      
000000                      ;=====
000000                      
000000                      SC_SCRN	MACRO
000000                      
000000                      	DB	7	;SCRIPT CODE
000000                      	DW	\1	;SCREEN # TO DRAW TO
000000                      	DT	\2	;MAP ADDRESS
000000                      	DW	(\3*\4)*2	;SIZE OF MAP IN BYTES
000000                      	DW	\3	;MAP WIDTH IN BLOCKS
000000                      	DW	\4	;MAP HEIGTH IN BLOCKS
000000                      	DT	\5	;BLOCK ADDRESS
000000                      	DW	\6	;BLOCK LENGTH
000000                      	DW	\7	;SCREEN X
000000                      	DW	\8	;SCREEN Y
000000                      
000000                      	ENDM
000000                      
000000                      ;=====
000000                      
000000                      SC_MAP	MACRO
000000                      
000000                      	DB	8	;SCRIPT CODE
000000                      	DW	\1	;SCREEN # TO DRAW TO
000000                      	DW	\2	;MAP START X
000000                      	DW	\3	;MAP START Y
000000                      	DW	\4	;MAP WIDTH IN BLOCKS
000000                      	DW	\5	;MAP HEIGTH IN BLOCKS
000000                      	DT	\6	;MAP ADDRESS
000000                      	DW	(\4*\5)*2	;SIZE OF MAP IN BYTES
000000                      	DT	\7	;BLOCK ADDRESS
000000                      	DW	\8	;BLOCK LENGTH
000000                      
000000                      	ENDM
000000                      
000000                      ;=====
000000                      
000000                      SC_PXY	MACRO
000000                      
000000                      	DB	9	;SCRIPT CODE
000000                      	DW	\1	;STARTING X POSITION ON SCREEN
000000                      	DW	\2	;STARTING Y POSITION ON SCREEN
000000                      
000000                      	ENDM
000000                      
000000                      ;=====
000000                      
000000                      SC_CLR	MACRO
000000                      
000000                      	DB	10	;SCRIPT CODE
000000                      	DB	\1
000000                      
000000                      	ENDM
000000                      
000000                      ;=====
000000                      
000000                      SC_CLRV	MACRO
000000                      
000000                      	DB	11	;SCRIPT CODE
000000                      
000000                      	ENDM
000000                      
000000                      ;=====
000000                      
000000                      SC_CLR_SB	MACRO
000000                      
000000                      	DB	12	;SCRIPT CODE
000000                      
000000                      	ENDM
000000                      
000000                      ;------------------
000000                      ;JOYPAD HANDLER MACROS
000000                      
000000                      JP_END	MACRO
000000                      
000000                      	DW	0	;END OF SCRIPT
000000                      
000000                      	ENDM
000000                      
000000                      ;=====
000000                      
000000                      JP_TEST	MACRO
000000                      
000000                      	DW	\1	;JOYPAD COMPARE CODE
000000                      	DT	\2	;ADDRESS OF ROUTINE TO EXECUTE
000000                      
000000                      	ENDM
000000                      
000000                      ;=====
000000                      
000000                      DMA_2_OAM	MACRO
000000                      
000000                      	PHP
000000                      	SET_A8
000000                      	LDA	#1
000000                      	STA	OAM_DMA_FLAG	;DMA ENABLED
000000                      	PLP
000000                      
000000                      	ENDM
000000                      
000000                      ;=====
000000                      
000000                      DMA_2_CGRAM	MACRO
000000                      
000000                      	PHP
000000                      	SET_A8
000000                      	LDA	#1
000000                      	STA	CG_DMA_FLAG	;DMA ENABLED
000000                      	PLP
000000                      
000000                      	ENDM
000000                      
000000                      ;=====
000000                      ;
000000                      ;PARAMETERS
000000                      ;1 = VALUE FOR VMA_INC	1
000000                      ;2 = SOURCE ADDRESS		3
000000                      ;3 = DESTINATION ADDRESS	2
000000                      ;4 = LENGTH OF DATA		2 = 8 BYTES PER ENTRY
000000                      
000000                      DMA_2_VRAM	MACRO
000000                      
000000                      	PHP
000000                      	SET_AXY16
000000                      	PHX
000000                      	LDX	DMA_HEAP_PTR
000000                      	LDA	#<\2	;OFFSET OF SOURCE
000000                      	STA	DMA_HEAP+2,X	;SAVE SOURCE OFFSET
000000                      	LDA	#<\3	;GET OFFSET OF DESTINATION
000000                      	STA	DMA_HEAP+5,X	;SAVE DESTINATION OFFSET
000000                      	LDA	#<\4	;GET LENGTH
000000                      	STA	DMA_HEAP+7,X	;SAVE LENGTH
000000                      	SET_A8
000000                      	LDA	#2	;SINGLE DMA LIST COMMAND
000000                      	STA	DMA_HEAP,X	;SAVE CMD
000000                      	LDA	#^\2	;GET BANK OF SOURCE
000000                      	STA	DMA_HEAP+4,X	;SAVE SOURCE BANK
000000                      	LDA	#<\1	;GET VMA_INC VALUE
000000                      	STA	DMA_HEAP+1,X
000000                      	STZ	DMA_HEAP+9,X	;SET END OF DMA_HEAP
000000                      	SET_A16
000000                      	TXA
000000                      	CLC
000000                      	ADC	#9	;POINT TO END
000000                      	STA	DMA_HEAP_PTR	;SAVE NEW POINTER
000000                      	PLX
000000                      	PLP
000000                      
000000                      	ENDM
000000                      	
000000                      	
000000                      	INCLUDE	GROUPS.658	;GROUP DEFINITIONS
000000                      ;------------------
000000                      ;
000000                      ;  GROUPS.658 -- GROUP DEFINITIONS
000000                      ;
000000                      ;INCLUDE THIS FILE INSIDE SN_MAIN.658
000000                      ;
000000                      ;------------------
000000                      
000000                      ZERO_GROUP	GROUP	BSS,ORG($0)	;,SIZE($100)
000000                      
000000                      ;------------------
000000                      
000000                      RAM1_GROUP	GROUP	BSS,ORG($1000)	;,SIZE($1000)
000000                      
000000                      ;------------------
000000                      
000000                      ;RAM2_GROUP	GROUP	BSS,ORG($7E2000)	;,SIZE($1E000)
000000                      
000000                      ;------------------
000000                      
000000                      PAGE00_GROUP	GROUP	ORG($008000),SIZE($7FC0,$FF)
000000                      
000000                      ;------------------
000000                      
000000                      PAGE01_GROUP	GROUP	ORG($018000),SIZE($8000,$FF)
000000                      
000000                      ;------------------
000000                      
000000                      PAGE02_GROUP	GROUP	ORG($028000),SIZE($8000,$FF)
000000                      
000000                      ;------------------
000000                      
000000                      PAGE03_GROUP	GROUP	ORG($038000),SIZE($8000,$FF)
000000                      
000000                      ;------------------
000000                      
000000                      PAGE04_GROUP	GROUP	ORG($048000),SIZE($8000,$FF)
000000                      
000000                      ;------------------
000000                      
000000                      REG_GROUP	GROUP	ORG($00FFC0)	;,SIZE($20)
000000                      
000000                      ;------------------  
000000                      
000000                      VECTOR_GROUP	GROUP	ORG($00FFE4)	;,SIZE($0C)
000000                      
000000                      ;------------------
000000                      
000000                      DEBUG_GROUP	GROUP	ORG($00FFF0)	;,SIZE($0C)
000000                      
000000                      ;------------------
000000                      ;------------------
000000                      	INCLUDE PPU_REG.658	;PPU AND CPU REGISTER EQUATES
000000                      ;------------------
000000                      ;
000000                      ; PPU REGISTER DEFINITIONS
000000                      ;
000000                      ;------------------
000000                      
000000                      	OPT	S+	;HANDLE EQUATED SYMBOLS LIKE LABELS
000000                      
000000 =00002100            INIDISP	EQU	$2100	;INITIAL DISPLAY SETTING FOR SCREEN
000000                      ;
000000 =00002101            OBJSEL	EQU	$2101	;OBJ SIZE AND DATA AREA DESIGNATION
000000 =00002102            OAMADDL	EQU	$2102	;ADDRESS FOR ACCESSING OBJ ATTRIBUTE
000000                      			;MEMORY LOW BYTE
000000 =00002103            OAMADDH	EQU	$2103	;HIGH BYTE
000000 =00002104            OAMDATAW	EQU	$2104	;DATA FOR OAM WRITE
000000                      ;
000000 =00002105            BGMODE	EQU	$2105	;BKGD MODE & CHAR SIZE SETTING
000000                      ;
000000 =00002106            MOSAIC	EQU	$2106	;SIZE & SCREEN DESIGNATION FOR 
000000                      			;MOSAIC DISPLAY
000000                      ;
000000 =00002107            BG1SC	EQU	$2107	;ADDRESS FOR STORING SCREEN DATA 
000000                      			;OF EACH BACKGROUND 
000000 =00002108            BG2SC	EQU	$2108	;AND SCREEN SIZE DESIGNATION
000000 =00002109            BG3SC	EQU	$2109	;SCREEN 3
000000 =0000210A            BG4SC	EQU	$210A	;SCREEN 4
000000                      ;
000000 =0000210B            BG12NBA	EQU	$210B	;BACKGROUND CHAR DATA AREA DESIGNATION
000000 =0000210C            BG34NBA	EQU	$210C	;SAME FOR SCREEN 3,4
000000                      ;
000000 =0000210D            BG1HOFS	EQU	$210D	;BACKGOUND 1 HORZ SCROLL VALUE
000000 =0000210E            BG1VOFS	EQU	$210E	;VERT OFFSET
000000                      ;
000000 =0000210F            BG2HOFS	EQU	$210F	;BACKGOUND 2 HORZ SCROLL VALUE
000000 =00002110            BG2VOFS	EQU	$2110	;VERT OFFSET
000000                      ;
000000 =00002111            BG3HOFS	EQU	$2111	;BACKGOUND 3 HORZ SCROLL VALUE
000000 =00002112            BG3VOFS	EQU	$2112	;VERT OFFSET
000000                      ;
000000 =00002113            BG4HOFS	EQU	$2113	;BACKGOUND 4 HORZ SCROLL VALUE
000000 =00002114            BG4VOFS	EQU	$2114	;VERT OFFSET
000000                      ;
000000 =00002115            VMAINC	EQU	$2115	;VRAM ADDRESS INC VALUE DESIGNATION
000000                      ;
000000 =00002116            VMADDL	EQU	$2116	;ADDRESS FOR VRAM READ / WRITE LOW
000000 =00002117            VMADDH	EQU	$2117	;HIGH
000000                      ;
000000 =00002118            WVMDATAL	EQU	$2118	;DATA FOR VRAM WRITE LOW
000000 =00002119            WVMDATAH	EQU	$2119	;HIGH
000000                      ;
000000 =0000211A            M7SEL	EQU	$211A	;INITIAL SETTING IN SCREEN MODE 7
000000                      ;-----
000000                      ;
000000                      ;ROTATIONAL / ENLARGMENT / REDUCTION IN MODE 7
000000                      ;CENTER COORDINATE SETTINGS & MULTIPLICAND / MULTIPLIER SETTINGS
000000                      ;OF COMPLIMENTARY MULTIPLICATION.
000000                      ;
000000 =0000211B            M7A	EQU	$211B	;MATRIX PARAMETER A
000000 =0000211C            M7B	EQU	$211C	;MATRIX PARAMETER B
000000 =0000211D            M7C	EQU	$211D	;MATRIX PARAMETER C
000000 =0000211E            M7D	EQU	$211E	;MATRIX PARAMETER D
000000 =0000211F            M7X	EQU	$211F	;MATRIX PARAMETER X
000000 =00002120            M7Y	EQU	$2120	;MATRIX PARAMETER Y
000000                      ;
000000 =00002121            CGADD	EQU	$2121	;ADDRESS FOR COLOR GEN RAM WRITE
000000                      ;
000000 =00002122            WCGDATA	EQU	$2122	;DATA FOR COLOR GEN WRITE
000000                      ;
000000 =00002123            W12SEL	EQU	$2123	;WINDOW MASK SETTINGS FOR SCREEN 1,2
000000 =00002124            W34SEL	EQU	$2124	;WINDOW MASK SETTINGS FOR SCREEN 3,4
000000 =00002125            WOBJSEL	EQU	$2125	;WINDOW MASK COLOR / OBJECT WINDOWS
000000                      ;
000000 =00002126            WH0	EQU	$2126	;WINDOW 1 LEFT POSITION
000000 =00002127            WH1	EQU	$2127	;WINDOW 1 RIGHT POSITION
000000 =00002128            WH2	EQU	$2128	;WINDOW 2 LEFT POSITION
000000 =00002129            WH3	EQU	$2129	;WINDOW 2 RIGHT POSITION
000000                      ;
000000 =0000212A            WBGLOG	EQU	$212A	;MASK LOGIC SETTINGS FOR WINDOW 1&2
000000 =0000212B            WOBJLOG	EQU	$212B	;ON EACH SCREEN
000000                      ;
000000 =0000212C            TM	EQU	$212C	;MAIN SCREEN DESIGNATION
000000                      ;
000000 =0000212D            TS	EQU	$212D	;SUB SCREEN DESIGNATION
000000                      ;
000000 =0000212E            TMW	EQU	$212E	;WINDOW MASK DESIGNATION FOR 
000000                      			;MAIN SCREEN
000000                      ;
000000 =0000212F            TSW	EQU	$212F	;WINDOW MASK DESIGNATION FOR 
000000                      			;SUB SCREEN
000000                      ;
000000 =00002130            CGSWSEL	EQU	$2130	;INITIAL SETTINGS FOR FIXED COLOR 
000000                      			;ADDITION OR SCREEN ADDITION
000000 =00002131            CGADSUB	EQU	$2131	;ADDITION/SUBTRACTION $ SUBTRACTION 
000000                      			;DESIGNATION FOR EACH BKGD SCREEN & 
000000                      			;OBGECT BKGD COLOR
000000                      ;
000000 =00002132            COLDATA	EQU	$2132	;FIXED COLOR DATA FOR SIXED COLOR 
000000                      			;ADDITION / SUBTRACTION
000000                      ;
000000 =00002133            SETINI	EQU	$2133	;SCREEN INITIAL SETTING
000000                      ;
000000 =00002134            MPYL	EQU	$2134	;MULTIPLICATION RESULT LOW
000000 =00002135            MPYM	EQU	$2135	;MIDDLE
000000 =00002136            MPYH	EQU	$2136	;HIGH
000000                      ;
000000 =00002137            SLHV	EQU	$2137	;SOFTWARE LATCH FOR H/V COUNTER
000000                      ;
000000 =00002138            OAMDATAR	EQU	$2138	;READ DATA FROM OBJECT ATTRIBUTE MEM
000000                      ;
000000 =00002139            RVMDATAL	EQU	$2139	;READ DATA FROM VRAM LOW
000000 =0000213A            RVMDATAH	EQU	$213A	;HIGH
000000                      ;
000000 =0000213B            RCGDATA	EQU	$213B	;READ DATA FROM COLOR GEN RAM
000000                      ;
000000 =0000213C            OPHCT	EQU	$213C	;H/V COUNTER DATA BY EXTERNAL OR 
000000                      			;SOFTWARE LATCH... HORIZONTAL
000000 =0000213D            OPVCT	EQU	$213D	;VERTICAL
000000                      ;
000000 =0000213E            STAT77	EQU	$213E	;PPU STATUS FLAG & VERSION #
000000                      ;
000000 =0000213F            STAT78	EQU	$213F	;PPU STATUS FLAG & VERSION #
000000                      ;
000000 =00002140            APUIO0	EQU	$2140	;COMM PORT WITH AUDIO 0
000000 =00002141            APUIO1	EQU	$2141	;COMM PORT WITH AUDIO 1
000000 =00002142            APUIO2	EQU	$2142	;COMM PORT WITH AUDIO 2
000000 =00002143            APUIO3	EQU	$2143	;COMM PORT WITH AUDIO 3
000000                      ;
000000 =00002180            WMDATA	EQU	$2180	;DATA TO CONSECUTIVLEY READ FROM 
000000                      			;AND WRITE TO VRAM
000000                      ;
000000 =00002181            WMADDL	EQU	$2181	;ADDRESS TO CONSECUTIVLEY READ 
000000                      			;AND WRITE VRAM LOW
000000 =00002182            WMADDM	EQU	$2182	;MIDDLE
000000 =00002183            WMADDH	EQU	$2183	;HIGH
000000                      ;
000000                      ;------------------
000000                      ;
000000                      ;  CPU REGISTER DEFINITIONS
000000                      ;
000000                      ;------------------
000000                      ;
000000 =00004200            NMITIMEN	EQU	$4200	;ENABLE FLAG FOR V-BLANK
000000                      			;TIMER INTERRUPT &
000000                      			;JOY CONTROLLER READ
000000                      ;
000000 =00004201            WRIO	EQU	$4201	;PROGRAMMABLE I/O PORT (OUT PORT)
000000                      ;
000000 =00004202            WRMPYA	EQU	$4202	;MULTIPLIER $ MULTIPLICAND 
000000                      			;BY MULTIPLICATION - MULTIPLICAND
000000 =00004203            WRMPYB	EQU	$4203	;MULTIPLIER
000000                      ;
000000 =00004204            WRDIVL	EQU	$4204	;DIVISOR & DIVIDEND BY DIVIDE
000000                      			;DIVIDEND - LOW
000000 =00004205            WRDIVH	EQU	$4205	;DIVIDEND - HIGH
000000 =00004206            WRDIVB	EQU	$4206	;DIVISOR
000000                      ;
000000 =00004207            HTIMEL	EQU	$4207	;H-COUNT TIMER SETTINGS - LOW
000000 =00004208            HTIMEH	EQU	$4208	;HIGH
000000                      ;
000000 =00004209            VTIMEL	EQU	$4209	;V-COUNT TIMER SETTINGS - LOW
000000 =0000420A            VTIMEH	EQU	$420A	;HIGH
000000                      ;
000000 =0000420B            MDMAEN	EQU	$420B	;CHANNEL DESIGNATION FOR GENERAL
000000                      			;PURPOSE DMA & TRIGGER
000000                      ;
000000 =0000420C            HDMAEN	EQU	$420C	;CHANNEL DESIGNATION FOR H-DMA
000000                      ;
000000 =0000420D            MEMSEL	EQU	$420D	;ACCESS CYCLE DESIGNATION IN 
000000                      			;MEMORY (2) AREA
000000                      ;
000000 =00004210            RDNMI	EQU	$4210	;NMI FLAG BY V-BLANK & VERSION #
000000                      ;
000000 =00004211            TIMEUP	EQU	$4211	;IRQ FLAG BY H/V COUNT TIMER
000000                      ;
000000 =00004212            HVBJOY	EQU	$4212	;H/V BLANK & JOY CONTROLLER
000000                      			;ENABLE FLAG
000000                      ;
000000 =00004213            RDIO	EQU	$4213	;PROGRAMMABLE I/O PORT (IN PORT)
000000                      ;
000000 =00004214            RDDIVL	EQU	$4214	;QUOTIENT OF DIVIDE RESULT LOW
000000 =00004215            RDDIVH	EQU	$4215	;HIGH	
000000                      ;
000000 =00004216            RDMPYL	EQU	$4216	;PRODUCT OF MULTIPLICATION OR 
000000                      			;REMAINDER OF DIVIDE RESULT - LOW
000000 =00004217            RDMPYH	EQU	$4217	;HIGH
000000                      ;
000000 =00004218            JOY1L	EQU	$4218	;DATA FOR JOY CONTROLLER #1 - LOW
000000 =00004219            JOY1H	EQU	$4219	;HIGH
000000 =0000421A            JOY2L	EQU	$421A	;DATA FOR JOY CONTROLLER #2 - LOW
000000 =0000421B            JOY2H	EQU	$421B	;HIGH
000000 =0000421C            JOY3L	EQU	$421C	;DATA FOR JOY CONTROLLER #3 - LOW
000000 =0000421D            JOY3H	EQU	$421D	;HIGH
000000 =0000421E            JOY4L	EQU	$421E	;DATA FOR JOY CONTROLLER #4 - LOW
000000 =0000421F            JOY4H	EQU	$421F	;HIGH
000000                      ;
000000 =00004300            WDMAP0	EQU	$4300	;PARAMETER FOR DMA TRANSFER 0
000000 =00004310            WDMAP1	EQU	$4310	;PARAMETER FOR DMA TRANSFER 1
000000 =00004320            WDMAP2	EQU	$4320	;PARAMETER FOR DMA TRANSFER 2
000000 =00004330            WDMAP3	EQU	$4330	;PARAMETER FOR DMA TRANSFER 3
000000 =00004340            WDMAP4	EQU	$4340	;PARAMETER FOR DMA TRANSFER 4
000000 =00004350            WDMAP5	EQU	$4350	;PARAMETER FOR DMA TRANSFER 5
000000 =00004360            WDMAP6	EQU	$4360	;PARAMETER FOR DMA TRANSFER 6
000000 =00004370            WDMAP7	EQU	$4370	;PARAMETER FOR DMA TRANSFER 7
000000                      ;
000000 =00004301            BADMA0	EQU	$4301	;B-BUS ADDRESS FOR DMA 0
000000 =00004311            BADMA1	EQU	$4311	;B-BUS ADDRESS FOR DMA 1
000000 =00004321            BADMA2	EQU	$4321	;B-BUS ADDRESS FOR DMA 2
000000 =00004331            BADMA3	EQU	$4331	;B-BUS ADDRESS FOR DMA 3
000000 =00004341            BADMA4	EQU	$4341	;B-BUS ADDRESS FOR DMA 4
000000 =00004351            BADMA5	EQU	$4351	;B-BUS ADDRESS FOR DMA 5
000000 =00004361            BADMA6	EQU	$4361	;B-BUS ADDRESS FOR DMA 6
000000 =00004371            BADMA7	EQU	$4371	;B-BUS ADDRESS FOR DMA 7
000000                      ;-----
000000                      ;
000000                      ;TABLE ADDRESS OF A-BUS FOR DMA < A1 TABLE ADDRESS
000000                      ;
000000 =00004302            A1ADMAL0	EQU	$4302	;TABLE ADDRESS OF A-BUS DMA LOW
000000 =00004303            A1ADMAH0	EQU	$4303	;HIGH
000000 =00004304            A1ADMAB0	EQU	$4304	;BANK
000000                      ;
000000 =00004312            A1ADMAL1	EQU	$4312	;TABLE ADDRESS OF A-BUS DMA LOW
000000 =00004313            A1ADMAH1	EQU	$4313	;HIGH
000000 =00004314            A1ADMAB1	EQU	$4314	;BANK
000000                      ;
000000 =00004322            A1ADMAL2	EQU	$4322	;TABLE ADDRESS OF A-BUS DMA LOW
000000 =00004323            A1ADMAH2	EQU	$4323	;HIGH
000000 =00004324            A1ADMAB2	EQU	$4324	;BANK
000000                      ;
000000 =00004332            A1ADMAL3	EQU	$4332	;TABLE ADDRESS OF A-BUS DMA LOW
000000 =00004333            A1ADMAH3	EQU	$4333	;HIGH
000000 =00004334            A1ADMAB3	EQU	$4334	;BANK
000000                      ;
000000 =00004342            A1ADMAL4	EQU	$4342	;TABLE ADDRESS OF A-BUS DMA LOW
000000 =00004343            A1ADMAH4	EQU	$4343	;HIGH
000000 =00004344            A1ADMAB4	EQU	$4344	;BANK
000000                      ;
000000 =00004352            A1ADMAL5	EQU	$4352	;TABLE ADDRESS OF A-BUS DMA LOW
000000 =00004353            A1ADMAH5	EQU	$4353	;HIGH
000000 =00004354            A1ADMAB5	EQU	$4354	;BANK
000000                      ;
000000 =00004362            A1ADMAL6	EQU	$4362	;TABLE ADDRESS OF A-BUS DMA LOW
000000 =00004363            A1ADMAH6	EQU	$4363	;HIGH
000000 =00004364            A1ADMAB6	EQU	$4364	;BANK
000000                      ;
000000 =00004372            A1ADMAL7	EQU	$4372	;TABLE ADDRESS OF A-BUS DMA LOW
000000 =00004373            A1ADMAH7	EQU	$4373	;HIGH
000000 =00004374            A1ADMAB7	EQU	$4374	;BANK
000000                      ;
000000                      ;DATA ADDRESS STORE BY H-DMA
000000                      ;# OF BYTES TO BE TRANSFRRED SETTINGS BY GENERAL PURPOSE DMA
000000                      ;
000000 =00004305            DMADATL0	EQU	$4305	;LOW
000000 =00004306            DMADATH0	EQU	$4306	;HIGH
000000 =00004307            DMADATB0	EQU	$4307	;BANK FOR H-DMA
000000                      ;
000000 =00004315            DMADATL1	EQU	$4315	;LOW
000000 =00004316            DMADATH1	EQU	$4316	;HIGH
000000 =00004317            DMADATB1	EQU	$4317	;BANK FOR H-DMA
000000                      ;
000000 =00004325            DMADATL2	EQU	$4325	;LOW
000000 =00004326            DMADATH2	EQU	$4326	;HIGH
000000 =00004327            DMADATB2	EQU	$4327	;BANK FOR H-DMA
000000                      
000000 =00004335            DMADATL3	EQU	$4335	;LOW
000000 =00004336            DMADATH3	EQU	$4336	;HIGH
000000 =00004337            DMADATB3	EQU	$4337	;BANK FOR H-DMA
000000                      ;
000000 =00004345            DMADATL4	EQU	$4345	;LOW
000000 =00004346            DMADATH4	EQU	$4346	;HIGH
000000 =00004347            DMADATB4	EQU	$4347	;BANK FOR H-DMA
000000                      ;
000000 =00004355            DMADATL5	EQU	$4355	;LOW
000000 =00004356            DMADATH5	EQU	$4356	;HIGH
000000 =00004357            DMADATB5	EQU	$4357	;BANK FOR H-DMA
000000                      ;
000000 =00004365            DMADATL6	EQU	$4365	;LOW
000000 =00004366            DMADATH6	EQU	$4366	;HIGH
000000 =00004367            DMADATB6	EQU	$4367	;BANK FOR H-DMA
000000                      ;
000000 =00004375            DMADATL7	EQU	$4375	;LOW
000000 =00004376            DMADATH7	EQU	$4376	;HIGH
000000 =00004377            DMADATB7	EQU	$4377	;BANK FOR H-DMA
000000                      ;-----
000000                      ;
000000                      ;TABLE ADDRESS OF A-BUS < A2 TABLE ADDRESS
000000                      ;
000000 =00004308            A2ADMAL0	EQU	$4308	;LOW
000000 =00004309            A2ADMAH0	EQU	$4309	;HIGH
000000                      ;
000000 =00004318            A2ADMAL1	EQU	$4318	;LOW
000000 =00004319            A2ADMAH1	EQU	$4319	;HIGH
000000                      ;
000000 =00004328            A2ADMAL2	EQU	$4328	;LOW
000000 =00004329            A2ADMAH2	EQU	$4329	;HIGH
000000                      ;
000000 =00004338            A2ADMAL3	EQU	$4338	;LOW
000000 =00004339            A2ADMAH3	EQU	$4339	;HIGH
000000                      ;
000000 =00004348            A2ADMAL4	EQU	$4348	;LOW
000000 =00004349            A2ADMAH4	EQU	$4349	;HIGH
000000                      ;
000000 =00004358            A2ADMAL5	EQU	$4358	;LOW
000000 =00004359            A2ADMAH5	EQU	$4359	;HIGH
000000                      ;
000000 =00004368            A2ADMAL6	EQU	$4368	;LOW
000000 =00004369            A2ADMAH6	EQU	$4369	;HIGH
000000                      ;
000000 =00004378            A2ADMAL7	EQU	$4378	;LOW
000000 =00004379            A2ADMAH7	EQU	$4379	;HIGH
000000                      ;-----
000000                      ;
000000                      ;THE NUMBER OF LINES TO BE TRANSFERRED BY DMA
000000                      ;
000000 =0000430A            DMACTR0	EQU	$430A	;NUMBER OF LINES
000000 =0000431A            DMACTR1	EQU	$431A	;NUMBER OF LINES
000000 =0000432A            DMACTR2	EQU	$432A	;NUMBER OF LINES
000000 =0000433A            DMACTR3	EQU	$433A	;NUMBER OF LINES
000000 =0000434A            DMACTR4	EQU	$434A	;NUMBER OF LINES
000000 =0000435A            DMACTR5	EQU	$435A	;NUMBER OF LINES
000000 =0000436A            DMACTR6	EQU	$436A	;NUMBER OF LINES
000000 =0000437A            DMACTR7	EQU	$437A	;NUMBER OF LINES
000000                      ;
000000                      ;------------------
000000                      ;------------------
000000                      
000000                      ;------------------
000000                      ;ANIMATION COMMANDS
000000                      
000000 =FFFFFFFF            DRAW	EQU	-1
000000 =FFFFFFFE            LOOP	EQU	-2
000000                      
000000                      ;------------------
000000                      ;VARIABLES AREA
000000                      
000000                      	SECTION	ZERO_PAGE,ZERO_GROUP
000000                      
000000                      ;-----
000000                      ;FADE VARIABLES
000000                      
000000                      FADE_FLAG	DS	1	;BIT 7: 0 = OFF, 1 = ON
000001                      			;BIT 6: 0 = INC, 2 = DEC
000001                      			;BIT 0-3 = BRIGHTNESS
000001                      
000001                      ;-----
000001                      
000001                      FRAME_ADDR	DS	2	;ADDRESS OF FRAME DATA
000003                      
000003                      ANIM_PTR	DS	2	;POINTER INTO ANIMATION COMMANDS
000005                      
000005                      ANIM_FRAME	DS	2
000007                      
000007                      FLIP_DATA	DS	1	;SPRITE FLIP DATA
000008                      X_FLIP_DATA	DS	1
000009                      Y_FLIP_DATA	DS	1
00000A                      FRAME_X	DS	1	;WHERE TO DRAW SPRITE
00000B                      FRAME_Y	DS	1	;WHERE TO DRAW SPRITE
00000C                      
00000C                      EXTRA_SPRITE	DS	1	;EXTRA SPRITE TO CLEAR THIS FRAME
00000D                      
00000D                      X_OFF	DS	1	;X OFFSET OF SPRITE
00000E                      Y_OFF	DS	1	;Y OFFSET OF SPRITE
00000F                      
00000F                      ;-----
00000F                      
00000F                      JP_LIST	DS	3	;ADDRESS OF JOYPAD HANDLER
000012                      JOY1_DATA	DS	2	;JOYPAD 1 DATA HERE
000014                      OLD1_DATA	DS	2	;LAST INPUT
000016                      DB1_DATA	DS	2	;DEBOUNCED DATA
000018                      
000018                      ;-----
000018                      
000018                      SS_FLAG	DS	1	;SINGLE STEP FLAG 0 = OFF, 1 = ON
000019                      
000019                      ;-----
000019                      
000019                      THIS_SPRITE	DS	1	;SPRITE # BEING WORKED ON
00001A                      THIS_SPRITE_MSB	DS	1	;POINT TO BYTE WHERE MSB IS
00001B                      THIS_SPRITE_BYTE	DS	1	;PICK MASK USING THIS
00001C                      
00001C                      SPRITE_X	DS	1	;X POSITION OF SPRITE
00001D                      SPRITE_Y	DS	1	;Y POSITION OF SPRITE
00001E                      SPRITE_DIR	DS	1	;DIR DATA
00001F                      
00001F                      SPRITE_BLOCK	DS	2
000021                      SPRITE_MAP	DS	2
000023                      SPRITE_CHAR	DS	2
000025                      
000025                      SPRITE_ADDR	DS	2
000027                      
000027                      
000027                      NMI_CTR	DS	2
000029                      
000029                      ;-----
000029                      
000029                      SCROLL_X	DS	2	;SCROLL X POSITION
00002B                      SCROLL_Y	DS	2	;SCROLL Y POSITION
00002D                      SCROLL_VRAM	DS	2	;ADDRESS OF CURRENT ROW IN VRAM
00002F                      
00002F                      START_BUTT	DS	2
000031                      
000031                      ;-----
000031                      
000031                      MAP_PC	DS	2	;PRIORITY AND COLOR BITS
000033                      MAP_FB	DS	2	;FLIP BITS
000035                      SCRN_HEIGTH	DS	2
000037                      SCRN_WIDTH	DS	2
000039                      
000039                      ;-----
000039                      
000039                      TITLE_FLAG	DS	1	;0 = OFF 1 = ON
00003A                      
00003A                      ;-----
00003A                      ;TEXT VARIABLES
00003A                      
00003A                      TEXT_X	DS	1	;TEXT START X
00003B                      TEXT_Y	DS	1	;TEXT START Y
00003C                      TEXT_ADDR	DS	3	;ADDRESS OF TEXT STRING
00003F                      
00003F                      TEXT_PTR	DS	2	;POINTER INTO SCRN_BUF
000041                      
000041                      TEXT_SIZE	DS	1	;CHAR SIZE OF TEXT
000042                      TEXT_PAL	DS	2	;PALETTE # OF TEXT
000044                      CHAR_BASE	DS	2	;BASE CHAR # OF ASCII TEXT
000046                      
000046                      ;-----
000046                      ; *** SCRIPT DATA AREA ***
000046                      
000046                      SCRIPT_PTR	DS	2	;POINTER INTO CURRENT SCRIPT
000048                      
000048                      SCRN_PTR	DS	2	;SCREEN # * 2
00004A                      SCRN_PTR3	DS	2	;SCREEN # * 3
00004C                      
00004C                      MAP_IN_ROM	DS	3	;ADDRESS OF MAP IN ROM
00004F                      
00004F                      MAP_IN_RAM	DS	3	;ADDRESS OF MAP IN RAM
000052                      
000052                      MAP_BYTES	DS	2	;# OF BYTES TO MOVE
000054                      
000054                      BLK_IN_ROM	DS	3	;ADDRESS OF BLOCK IN ROM
000057                      
000057                      BLK_IN_RAM	DS	3	;ADDRESS OF BLOCK IN RAM
00005A                      
00005A                      BLK_BYTES	DS	2	;# OF BYTES TO MOVE
00005C                      
00005C                      SCRN_OFF	DS	2	;OFFSET INTO SCRN_BUF
00005E                      
00005E                      SCRN_X	DS	2	;DRAW_SCRN START X
000060                      SCRN_Y	DS	2	;DRAW_SCRN START Y
000062                      
000062                      MAP_OFF	DS	2	;OFFSET INTO MAP
000064                      
000064                      MAP_STARTX	DS	2	;START X OF MAP BEING DRAWN
000066                      MAP_STARTY	DS	2	;START Y OF MAP BEING DRAWN
000068                      	
000068                      MAP_WIDTH	DS	2	;WIDTH OF MAP BEING DRAWN
00006A                      MAP_HEIGTH	DS	2	;HEIGTH OF MAP BEING DRAWN
00006C                      
00006C                      T0	DS	2	;TOP LEFT TILE
00006E                      T1	DS	2	;TOP RIGHT TILE
000070                      T2	DS	2	;BOTTOM LEFT TILE
000072                      T3	DS	2	;BOTTOM RIGHT TILE
000074                      
000074                      ;-----
000074                      ; *** LEVEL DATA ***
000074                      
000074                      TEMP_WORD	DS	2	;STORE TEMP VALUES HERE
000076                      
000076                      OBJ_BASE	DS	2	;OBJ BASE ADDRESS
000078                      OBJ_AREA	DS	1	;OBJECT DATA AREA SELECT
000079                      OBJ_SIZE	DS	1	;OBJ SIZES
00007A                      
00007A                      SC_MODE	DS	1	;SCREEN MODE
00007B                      BG3_PRIO	DS	1	;BG 3 PRIORITY
00007C                      BG_CSIZE	DS	1	;BG CHAR SIZE
00007D                      
00007D                      BG1_SIZE	DS	1	;BG1 SCREEN SIZE
00007E                      BG2_SIZE	DS	1	;BG2 SCREEN SIZE
00007F                      BG3_SIZE	DS	1	;BG3 SCREEN SIZE
000080                      BG4_SIZE	DS	1	;BG4 SCREEN SIZE
000081                      
000081                      BG1_SC	DS	2	;BG1 SCREEN BASE ADDRESS
000083                      BG2_SC	DS	2	;BG2 SCREEN BASE ADDRESS
000085                      BG3_SC	DS	2	;BG3 SCREEN BASE ADDRESS
000087                      BG4_SC	DS	2	;BG4 SCREEN BASE ADDRESS
000089                      
000089                      BG1_CHAR	DS	2	;BG1 CHAR DATA BASE ADDRESS
00008B                      BG2_CHAR	DS	2	;BG2 CHAR DATA BASE ADDRESS
00008D                      BG3_CHAR	DS	2	;BG3 CHAR DATA BASE ADDRESS
00008F                      BG4_CHAR	DS	2	;BG4 CHAR DATA BASE ADDRESS
000091                      
000091                      TM_VALUE	DS	1	;MAIN SCREEN DESIGNATON
000092                      
000092                      MAP1_WIDTH	DS	2	;WIDTH OF MAP 1
000094                      MAP2_WIDTH	DS	2	;WIDTH OF MAP 2
000096                      MAP3_WIDTH	DS	2	;WIDTH OF MAP 3
000098                      MAP4_WIDTH	DS	2	;WIDTH OF MAP 4
00009A                      
00009A                      MAP1_HEIGTH	DS	2	;HEIGTH OF MAP 1
00009C                      MAP2_HEIGTH	DS	2	;HEIGTH OF MAP 2
00009E                      MAP3_HEIGTH	DS	2	;HEIGTH OF MAP 3
0000A0                      MAP4_HEIGTH	DS	2	;HEIGTH OF MAP 4
0000A2                      
0000A2                      MAP1_STARTX	DS	2	;STARTING X MAP POSITION OF SCREEN
0000A4                      MAP2_STARTX	DS	2	;STARTING X MAP POSITION OF SCREEN
0000A6                      MAP3_STARTX	DS	2	;STARTING X MAP POSITION OF SCREEN
0000A8                      MAP4_STARTX	DS	2	;STARTING X MAP POSITION OF SCREEN
0000AA                      
0000AA                      MAP1_STARTY	DS	2	;STARTING Y MAP POSITION OF SCREEN
0000AC                      MAP2_STARTY	DS	2	;STARTING Y MAP POSITION OF SCREEN
0000AE                      MAP3_STARTY	DS	2	;STARTING Y MAP POSITION OF SCREEN
0000B0                      MAP4_STARTY	DS	2	;STARTING Y MAP POSITION OF SCREEN
0000B2                      
0000B2                      MAP1_X	DS	2	;CURRENT X OF SCREEN IN MAP
0000B4                      MAP2_X	DS	2	;CURRENT X OF SCREEN IN MAP
0000B6                      MAP3_X	DS	2	;CURRENT X OF SCREEN IN MAP
0000B8                      MAP4_X	DS	2	;CURRENT X OF SCREEN IN MAP
0000BA                      
0000BA                      MAP1_Y	DS	2	;CURRENT Y OF SCREEN IN MAP
0000BC                      MAP2_Y	DS	2	;CURRENT Y OF SCREEN IN MAP
0000BE                      MAP3_Y	DS	2	;CURRENT Y OF SCREEN IN MAP
0000C0                      MAP4_Y	DS	2	;CURRENT Y OF SCREEN IN MAP
0000C2                      
0000C2                      PLAYER_X	DS	2	;CURRENT PLAYER PIXEL X IN MAP
0000C4                      PLAYER_Y	DS	2	;CURRENT PLAYER PIXEL Y IN MAP
0000C6                      
0000C6                      MAP1_SCRLX	DS	2	;CURRENT X SCROLL VALUE
0000C8                      MAP2_SCRLX	DS	2	;CURRENT X SCROLL VALUE
0000CA                      MAP3_SCRLX	DS	2	;CURRENT X SCROLL VALUE
0000CC                      MAP4_SCRLX	DS	2	;CURRENT X SCROLL VALUE
0000CE                      
0000CE                      MAP1_SCRLY	DS	2	;CURRENT Y SCROLL VALUE
0000D0                      MAP2_SCRLY	DS	2	;CURRENT Y SCROLL VALUE
0000D2                      MAP3_SCRLY	DS	2	;CURRENT Y SCROLL VALUE
0000D4                      MAP4_SCRLY	DS	2	;CURRENT Y SCROLL VALUE
0000D6                      
0000D6                      MAP1_IN_RAM	DS	3	;ADDRESS OF MAP IN RAM
0000D9                      MAP2_IN_RAM	DS	3	;ADDRESS OF MAP IN RAM
0000DC                      MAP3_IN_RAM	DS	3	;ADDRESS OF MAP IN RAM
0000DF                      MAP4_IN_RAM	DS	3	;ADDRESS OF MAP IN RAM
0000E2                      
0000E2                      BLK1_IN_RAM	DS	3	;ADDRESS OF MAP IN RAM
0000E5                      BLK2_IN_RAM	DS	3	;ADDRESS OF MAP IN RAM
0000E8                      BLK3_IN_RAM	DS	3	;ADDRESS OF MAP IN RAM
0000EB                      BLK4_IN_RAM	DS	3	;ADDRESS OF MAP IN RAM
0000EE                      
0000EE                      ;-----
0000EE                      ; *** RAM ALLOCATION DATA ***
0000EE                      
0000EE                      RAM_SIZE	DS	2	;SIZE OF AREA TO ALLOCATE
0000F0                      
0000F0                      NEXT_RAM	DS	4	;NEXT EMPTY LOCATION IN RAM
0000F4                      
0000F4                      RAM_BLOCK0	DS	4	;STARTING ADDRESS OF BLOCK 0
0000F8                      RAM_BLOCK1	DS	4	;STARTING ADDRESS OF BLOCK 1
0000FC                      RAM_BLOCK2	DS	4	;STARTING ADDRESS OF BLOCK 2
000100                      RAM_BLOCK3	DS	4	;STARTING ADDRESS OF BLOCK 3
000104                      RAM_BLOCK4	DS	4	;STARTING ADDRESS OF BLOCK 4
000108                      RAM_BLOCK5	DS	4	;STARTING ADDRESS OF BLOCK 5
00010C                      RAM_BLOCK6	DS	4	;STARTING ADDRESS OF BLOCK 6
000110                      RAM_BLOCK7	DS	4	;STARTING ADDRESS OF BLOCK 7
000114                      
000114                      RAM_SIZE0	DS	2	;SIZE OF RAM BLOCK 0
000116                      RAM_SIZE1	DS	2	;SIZE OF RAM BLOCK 1
000118                      RAM_SIZE2	DS	2	;SIZE OF RAM BLOCK 2
00011A                      RAM_SIZE3	DS	2	;SIZE OF RAM BLOCK 3
00011C                      RAM_SIZE4	DS	2	;SIZE OF RAM BLOCK 4
00011E                      RAM_SIZE5	DS	2	;SIZE OF RAM BLOCK 5
000120                      RAM_SIZE6	DS	2	;SIZE OF RAM BLOCK 6
000122                      RAM_SIZE7	DS	2	;SIZE OF RAM BLOCK 7
000124                      
000124                      MAP_HANDLE	DS	2	;MAP RAM BLOCK POINTER 
000126                      
000126                      MAP1_HANDLE	DS	2	;BG1 MAP MEMORY HANDLE
000128                      MAP2_HANDLE	DS	2	;BG2 MAP MEMORY HANDLE 
00012A                      MAP3_HANDLE	DS	2	;BG3 MAP MEMORY HANDLE 
00012C                      MAP4_HANDLE	DS	2	;BG4 MAP MEMORY HANDLE 
00012E                      
00012E                      BLK_HANDLE	DS	2	;BLOCK RAM BLOCK POINTER
000130                      
000130                      BLK1_HANDLE	DS	2	;BG1 BLOCK MEMORY HANDLE
000132                      BLK2_HANDLE	DS	2	;BG2 BLOCK MEMORY HANDLE 
000134                      BLK3_HANDLE	DS	2	;BG3 BLOCK MEMORY HANDLE 
000136                      BLK4_HANDLE	DS	2	;BG4 BLOCK MEMORY HANDLE
000138                      
000138                      ;-----
000138                      ;PALETTE IN RAM DATA
000138                      
000138                      PAL_IN_RAM	DS	3	;ADDRESS OF PALETTE IN RAM
00013B                      PAL_IN_CGRAM	DS	1	;WHERE TO DMA INTO CG-RAM
00013C                      PAL_SIZE	DS	2	;# OF BYTES TO DMA 
00013E                      
00013E                      ;-----
00013E                      ; *** DMA DATA AREA ***
00013E                      
00013E                      OAM_DMA_FLAG	DS	1	;IS 1 IF OAM DMA NESSACARY
00013F                      VRAM_DMA_FLAG	DS	1	;IS 1 IF VRAM DMA NESSACARY
000140                      CG_DMA_FLAG	DS	1	;IS 1 IF CG-RAM DMA NESSACARY
000141                      
000141                      DMA_HEAP_PTR	DS	2	;POINTER INTO DMA LIST
000143                      
000143                      DMA_HEAP	DS	128	;BYTE 0 IS CONTROL BYTE
0001C3                      			;0 = END OF HEAP
0001C3                      			;
0001C3                      			;1 = DATA IS ADDRESS OF DMA LIST
0001C3                      			;THEN BYTE 1,2,3 IS ADDRESS OF DMA LIST
0001C3                      			;
0001C3                      			;2 = DATA IS A SINGLE DMA LIST
0001C3                      			;THEN BYTE 1 IS THE VMA_INC VALUE
0001C3                      			;BYTE 2,3,4 IS ADDRESS OF SOURCE
0001C3                      			;BYTE 5,6 IS DESTINATION IN VRAM
0001C3                      			;BYTE 7,8 IS LENGTH OF DMA
0001C3                      
0001C3                      DMA_TOTAL	DS	1	;# OF DMA TRANSFERS TO DO
0001C4                      
0001C4                      NEXT_SPRITE	DS	1
0001C5                      
0001C5                      SPRITE_COUNT	DS	1
0001C6                      
0001C6                      DMA_LIST	DS	2	;OFFSET TO DMA LIST
0001C8                      
0001C8                      DMA_FLAG	DS	1
0001C9                      
0001C9                      ;------------------
0001C9                      ;VARIABLES AREA
0001C9                      
0001C9                      	SECTION	VARIABLES,RAM1_GROUP
000000                      
000000                      TEST_PAL	DS	512
000200                      
000200                      ;-----
000200                      ;OAM DATA AREA
000200                      ;THIS WHOLE AREA IS DMA'ED TO VRAM EVERY VBLANK
000200                      
000200                      OAM_DATA	DS	542
00041E                      
00041E                      ;------------------
00041E                      ;***** PROGRAM STARTS HERE *****
00041E                      
00041E                      	SECTION	RESET,PAGE00_GROUP
000000                      
000000                      ;------------------
000000                      
000000                      	MX	3	;ACC AND INDEX IN 8 BIT MODE
000000                      
000000                      	REGS	a=0,x=0,y=0,db=0
000000                      ;-----
000000                      		                               
000000 78                   BEGIN	SEI		;DISABLE INTERRUPTS
000001 22 00 00 00          	JSL	CLEAR_REGS	;CLEAR ALL THE PPU REGISTERS
000005 22 00 00 00          	JSL	TITLE_SCRN	;DRAW THE TITLE SCREEN FIRST
000009                      
000009                      
000009                      ;==================
000009                      ;HERE IS WHERE ALL THE CONTROL LOGIC IS EXECUTED
000009                      
000009                      MAIN_LP
000009                      
000009                      ;-----
000009                      ;WAIT FOR THE START OF VERTICAL BLANK
000009                      
000009 E2 20                	SET_A8
00000B A9 81                	LDA	#$81	;JOY-C ENABLE
00000D 8D 00 42             	STA	NMITIMEN
000010 AD 10 42             VB_LP1	LDA	RDNMI	;WAIT FOR V-BLANK TO FINISH
000013 89 80                	BIT	#$80
000015 D0 00                	BNE	VB_LP1
000017 AD 10 42             VB_LP2	LDA	RDNMI	;WAIT FOR START OF V-BLANK
00001A 89 80                	BIT	#$80
00001C F0 00                	BEQ	VB_LP2
00001E                      ;-----
00001E                      ;SET THE NEW HORIZONTAL AND VERTICAL SCROLL VALUES IN HARDWARE
00001E                      
00001E                      ;-----
00001E                      ;DMA THE OAM DATA
00001E 20 00 00             	JSR	DO_OAM_DMA	;SEND OBJECT ATTRIBUTE MEMORY
000021                      ;-----
000021                      ;DMA PALETTE DATA TO CG-RAM
000021 20 00 00             	JSR	DO_CGRAM_DMA	;SEND PALETTE DATA TO CG-RAM
000024                      ;-----
000024                      ;DMA DATA TO VRAM
000024 20 00 00             	JSR	DO_VRAM_DMA	;SEND DATA TO VRAM
000027                      ;-----
000027                      ;DMA SOUND DATA
000027                      
000027                      ;-----
000027 22 00 00 00          	JSL	READ_JOYPAD	;GET JOYPAD INPUT
00002B 22 00 00 00          	JSL	JP_HANDLER	;EXECUTE JOYPAD COMMANDS
00002F                      ;-----
00002F                      ;MOVE THE OBJECT THAT THE SCREEN SCROLL IS BASED ON.
00002F                      ;MOST OF THE TIME THIS WILL BE GOLIATH
00002F                      
00002F                      
00002F                      ;-----
00002F                      ;ADJUST THE SCREEN SCROLL POSITION AND DRAW NEW SCREEN EDGES IF NEEDED.
00002F                      
00002F                      ;-----
00002F                      ;MOVE ALL THE OTHER OBJECTS THAT EXIST NOW USING THE CURRENT SCROLL_X
00002F                      ;TO SET THEIR NEW POSITIONS.
00002F                      
00002F                      
00002F                      ;-----
00002F                      ;DO ANY CHARACTER ANIMATIONS
00002F                      
00002F                      ;-----
00002F                      ;EXECUTE ANY GAME CONTROL LOGIC
00002F                      
00002F                      ;-----
00002F 4C 00 00             	JMP	MAIN_LP
000032                      
000032                      ;------------------
000032                      ;NMI_INT -- NON-MASKABLE INTERRUPT
000032                      
000032                      NMI_INT	PROC	NEAR,MX:3
000032                      
000032 08                   	PHP		;SAVE STATUS
000033 18 FB                	SET_16BIT	;MAKE SURE IT'S IN 65816 MODE
000035 48                   	PHA
000036 8B                   	PHB
000037 0B                   	PHD
000038 DA                   	PHX
000039 5A                   	PHY
00003A                      ;
00003A 02 00                	COP	$00	;POLL HOST
00003C                      ;-----
00003C                      ;VBLANK ROUTINES
00003C                      ;	SET_AXY16
00003C                      ;	CLC
00003C                      ;	LDA	NMI_CTR
00003C                      ;	ADC	#1
00003C                      ;	STA	NMI_CTR
00003C                      
00003C 20 00 00                   	JSR	DO_FADE	;DO ANY FADEING
00003F                      ;	JSR	DO_ANIM_CMDS	;EXECUTE ANIM COMMANDS
00003F                      ;-----
00003F                      ;
00003F 7A                   	PLY
000040 FA                   	PLX
000041 2B                   	PLD
000042 AB                   	PLB
000043 68                   	PLA
000044 28                   	PLP		;RESTORE STATUS
000045 40                   	RTI
000046                      
000046                      	ENDP
000046                      
000046                      ;------------------
000046                      ;IRQ_INT -- 
000046                      
000046                      IRQ_INT	PROC	NEAR,MX:3
000046                      
000046 40                   	RTI
000047                      
000047                      	ENDP
000047                      
000047                      ;------------------
000047                      ;CLEAR_REGS -- CLEAR THE PPU REGISTERS FOR A COLDSTART
000047                      
000047                      CLEAR_REGS	MODULE
000047                      
000047 08                   	PHP
000048                      ;-----
000048 E2 30                	SET_AXY8	;8 BIT REGISTERS
00004A                      ;
00004A A9 8F                	LDA	#$8F	;FORCE BLANKING
00004C 8D 00 21             	STA	INIDISP
00004F                      ;
00004F 9C 01 21             	STZ	OBJSEL
000052 9C 02 21             	STZ	OAMADDL
000055 9C 03 21             	STZ	OAMADDH
000058 9C 04 21             	STZ	OAMDATAW
00005B 9C 05 21             	STZ	BGMODE
00005E 9C 06 21             	STZ	MOSAIC
000061 9C 07 21             	STZ	BG1SC
000064 9C 08 21             	STZ	BG2SC
000067 9C 09 21             	STZ	BG3SC
00006A 9C 0A 21             	STZ	BG4SC
00006D 9C 0B 21             	STZ	BG12NBA
000070 9C 0C 21             	STZ	BG34NBA
000073                      ;
000073 9C 0D 21             	STZ	BG1HOFS	;LOW BYTES
000076 9C 0E 21             	STZ	BG1VOFS
000079 9C 0F 21             	STZ	BG2HOFS
00007C 9C 10 21             	STZ	BG2VOFS
00007F 9C 11 21             	STZ	BG3HOFS
000082 9C 12 21             	STZ	BG3VOFS
000085 9C 13 21             	STZ	BG4HOFS
000088 9C 14 21             	STZ	BG4VOFS
00008B                      ;
00008B 9C 0D 21             	STZ	BG1HOFS	;HIGH BYTES
00008E 9C 0E 21             	STZ	BG1VOFS
000091 9C 0F 21             	STZ	BG2HOFS
000094 9C 10 21             	STZ	BG2VOFS
000097 9C 11 21             	STZ	BG3HOFS
00009A 9C 12 21             	STZ	BG3VOFS
00009D 9C 13 21             	STZ	BG4HOFS
0000A0 9C 14 21             	STZ	BG4VOFS
0000A3                      ;
0000A3 A9 80                	LDA	#$80	;VRAM ADDRESS INC AFTER 2ND BYTE
0000A5 8D 15 21             	STA	VMAINC
0000A8                      ;
0000A8 9C 16 21             	STZ	VMADDL
0000AB 9C 17 21             	STZ	VMADDH
0000AE 9C 18 21             	STZ	WVMDATAL
0000B1 9C 19 21             	STZ	WVMDATAH
0000B4 9C 1A 21             	STZ	M7SEL
0000B7                      ;
0000B7 9C 1B 21             	STZ	M7A	;LOW BYTES
0000BA 9C 1C 21             	STZ	M7B
0000BD 9C 1D 21             	STZ	M7C
0000C0 9C 1E 21             	STZ	M7D
0000C3 9C 1F 21             	STZ	M7X
0000C6 9C 20 21             	STZ	M7Y
0000C9                      ;
0000C9 A9 01                	LDA	#$01	;HIGH BYTES
0000CB 8D 1B 21             	STA	M7A
0000CE 9C 1C 21             	STZ	M7B
0000D1 9C 1D 21             	STZ	M7C
0000D4 8D 1E 21             	STA	M7D
0000D7 9C 1F 21             	STZ	M7X
0000DA 9C 20 21             	STZ	M7Y
0000DD                      ;
0000DD 9C 21 21             	STZ	CGADD
0000E0 9C 22 21             	STZ	WCGDATA
0000E3 9C 23 21             	STZ	W12SEL
0000E6 9C 24 21             	STZ	W34SEL
0000E9 9C 25 21             	STZ	WOBJSEL
0000EC 9C 26 21             	STZ	WH0
0000EF 9C 27 21             	STZ	WH1
0000F2 9C 28 21             	STZ	WH2
0000F5 9C 29 21             	STZ	WH3
0000F8 9C 2A 21             	STZ	WBGLOG
0000FB 9C 2C 21             	STZ	TM
0000FE 9C 2D 21             	STZ	TS
000101 9C 2E 21             	STZ	TMW
000104 9C 2F 21             	STZ	TSW
000107 A9 30                	LDA	#$30
000109 8D 30 21             	STA	CGSWSEL
00010C 9C 31 21             	STZ	CGADSUB
00010F A9 E0                	LDA	#$E0
000111 8D 32 21             	STA	COLDATA
000114 9C 33 21             	STZ	SETINI
000117                      ;
000117 9C 00 42             	STZ	NMITIMEN
00011A A9 FF                	LDA	#$FF
00011C 8D 01 42             	STA	WRIO
00011F 9C 02 42             	STZ	WRMPYA
000122 9C 03 42             	STZ	WRMPYB
000125 9C 04 42             	STZ	WRDIVL
000128 9C 05 42             	STZ	WRDIVH
00012B 9C 06 42             	STZ	WRDIVB
00012E 9C 07 42             	STZ	HTIMEL
000131 9C 08 42             	STZ	HTIMEH
000134 9C 0B 42             	STZ	MDMAEN
000137 9C 0C 42             	STZ	HDMAEN
00013A 9C 0D 42             	STZ	MEMSEL
00013D                      ;-----
00013D                      ;CLEAR SINGLE BYTE VARIABLES
00013D 9C 00 00             	STZ	FLIP_DATA
000140 9C 00 00             	STZ	SS_FLAG
000143 9C 00 00             	STZ	DMA_FLAG
000146 9C 00 00             	STZ	OAM_DMA_FLAG
000149 9C 00 00             	STZ	VRAM_DMA_FLAG
00014C 9C 00 00             	STZ	CG_DMA_FLAG
00014F 9C 00 00             	STZ	DMA_HEAP
000152                      ;-----
000152                      ;CLEAR WORD VARIABLES
000152 C2 20                	SET_A16
000154 9C 00 00             	STZ	DMA_HEAP_PTR
000157                      ;-----
000157 28                   	PLP
000158 6B                   	RTL
000159                      
000159                      	MODEND
000159                      
000159                      ;------------------
000159                      ;SET_BASES -- SET THE BASE ADDRESSES
000159                      
000159                      
000159                      SET_BASES	MODULE
000159                      
000159 08                   	PHP
00015A E2 30                	SET_AXY8
00015C                      ;-----
00015C                      ;OBJ SIZE = 8,16
00015C                      ;NAME SELECT = 00
00015C                      ;NAME BASE SELECT = $2000
00015C                      ;
00015C A9 01                	LDA	#1
00015E 48                   	PHA
00015F AB                   	PLB		;SET SEG OF TABLE
000160 AD 00 00             	LDA	SPRITE_SIZE
000163 4A                   	LSR
000164 4A                   	LSR
000165 4A                   	LSR
000166 4A                   	LSR		;SIZE / 16
000167 AA                   	TAX
000168 BD 00 00             	LDA	OBJ_SIZE_TABLE,X
00016B 09 01                	ORA	#$01	;SPRITES GO AT $2000
00016D 8D 01 21             	STA	OBJSEL
000170                      ;-----
000170                      ;BG SIZE = 
000170                      ;BG 3 = N/A
000170                      ;BG MODE = 1
000170                      ;
000170 A9 01                	LDA	#$01
000172 8D 05 21             	STA	BGMODE
000175                      ;-----
000175                      ;BG1 BASE = $6800
000175                      ;BG1 SC SIZE = 1
000175                      ;
000175 A9 68                	LDA	#$68
000177 8D 07 21             	STA	BG1SC
00017A                      ;-----
00017A                      ;BG2 BASE = $7000
00017A                      ;BG2 SC SIZE = 1
00017A                      ;
00017A A9 71                	LDA	#$71
00017C 8D 08 21             	STA	BG2SC
00017F                      ;-----
00017F                      ;BG3 BASE = $7800
00017F                      ;BG3 SC SIZE = 1
00017F                      ;
00017F A9 79                	LDA	#$79
000181 8D 09 21             	STA	BG3SC
000184                      ;-----
000184 A9 00                	LDA	#$00
000186 8D 0B 21             	STA	BG12NBA
000189 A9 00                	LDA	#$00
00018B 8D 0C 21             	STA	BG34NBA
00018E                      ;-----
00018E 28                   	PLP
00018F 6B                   	RTL
000190                      
000190                      	MODEND
000190                      
000190                      ;------------------
000190                      ;FADE_IN -- FADE THE PALETTE IN FROM BLACK
000190                      
000190                      FADE_IN	MODULE
000190                      
000190 08                   	PHP
000191 E2 20                	SET_A8
000193 A9 80                	LDA	#$80	;SET FLAG, BRIGHTNESS = 0
000195 8D 00 00             	STA	FADE_FLAG
000198 28                   	PLP
000199 6B                   	RTL
00019A                      
00019A                      	MODEND
00019A                      
00019A                      ;------------------
00019A                      ;FADE_OUT -- FADE THE PALETTE OUT TO BLACK
00019A                      
00019A                      FADE_OUT	MODULE
00019A                      
00019A 08                   	PHP
00019B E2 20                	SET_A8
00019D A9 CF                	LDA	#$CF	;SET FLAG, BRIGHTNESS = 15
00019F 8D 00 00             	STA	FADE_FLAG
0001A2 28                   	PLP
0001A3 6B                   	RTL
0001A4                      
0001A4                      	MODEND
0001A4                      
0001A4                      ;------------------
0001A4                      ;DO_FADE -- FADE THE PALETTE IN FROM BLACK
0001A4                      
0001A4                      DO_FADE	MODULE
0001A4                      
0001A4 08                   	PHP
0001A5 E2 20                	SET_A8
0001A7 AD 00 00             	LDA	FADE_FLAG	;GET FLAG
0001AA 89 80                	BIT	#$80	;ON ?
0001AC F0 00                	BEQ	@NO_FADE
0001AE                      ;-----
0001AE 89 40                	BIT	#$40	;DEC ?
0001B0 F0 00                	BEQ	@FADE_UP
0001B2 29 0F                	AND	#$0F
0001B4 CE 00 00             	DEC	FADE_FLAG
0001B7 3A                   	DEC	A
0001B8 D0 00                	BNE	@10
0001BA 8D 00 21             @END_FADE	STA	INIDISP	;SET BRIGHTNESS
0001BD 9C 00 00             	STZ	FADE_FLAG	;END IT
0001C0 4C 00 00             	JMP	@NO_FADE
0001C3                      ;
0001C3 29 0F                @FADE_UP	AND	#$0F
0001C5 EE 00 00             	INC	FADE_FLAG
0001C8 1A                   	INC	A
0001C9 C9 0F                	CMP	#$0F
0001CB F0 00                	BEQ	@END_FADE
0001CD 8D 00 21             @10	STA	INIDISP	;SET BRIGHTNESS
0001D0                      @NO_FADE
0001D0 28                   	PLP
0001D1 60                   	RTS
0001D2                      
0001D2                      	MODEND
0001D2                      
0001D2                      ;------------------
0001D2                      ;DRAW_FRAME -- DRAW ONE FRAME OF THE ANIMATION
0001D2                      
0001D2                      DRAW_FRAME	MODULE
0001D2                      
0001D2 08                   	PHP
0001D3                      ;-----
0001D3 C2 10                	SET_XY16
0001D5 E2 20                	SET_A8
0001D7 A9 01                	LDA	#1
0001D9 8D 00 00             	STA	DMA_FLAG	;NEED TO DO A DMA LATER
0001DC 9C 00 00             	STZ	EXTRA_SPRITE
0001DF A0 00 00             	LDY	#0
0001E2 B1 00                	LDA	(FRAME_ADDR),Y	;GET # OF SPRITES IN FRAME
0001E4 8D 00 00             	STA	SPRITE_COUNT
0001E7 CD 00 00             	CMP	MAX_SPRITE	;USES ALL THE SPRITE ?
0001EA F0 00                	BEQ	@10
0001EC 38                   	SEC
0001ED AD 00 00             	LDA	MAX_SPRITE	;MAX USED BY THIS ANIM
0001F0 F1 00                	SBC	(FRAME_ADDR),Y	;= # TO CLEAR AT END
0001F2 8D 00 00             	STA	EXTRA_SPRITE
0001F5                      @10
0001F5                      ;	INY
0001F5 C8                   	INY
0001F6 C8                   	INY		;POINT TO 1ST X OFFSET
0001F7                      ;
0001F7                      ;	LDA	#-1
0001F7                      ;	STA	NEXT_SPRITE
0001F7                      ;
0001F7 9C 00 00             	STZ	X_FLIP_DATA
0001FA 9C 00 00             	STZ	Y_FLIP_DATA
0001FD AD 00 00             	LDA	FLIP_DATA	;CHECK FLIP BITS
000200 89 40                	BIT	#$40	;X FLIP
000202 F0 00                	BEQ	@50
000204 A9 FF                	LDA	#$FF
000206 8D 00 00             	STA	X_FLIP_DATA
000209 89 80                @50	BIT	#$80	;Y FLIP
00020B F0 00                	BEQ	@90
00020D A9 FF                	LDA	#$FF
00020F 8D 00 00             	STA	Y_FLIP_DATA
000212 A2 00 00             @90	LDX	#0
000215 9C 00 00             	STZ	THIS_SPRITE	;SPRITE # BEING WORKED ON
000218 9C 00 00             	STZ	THIS_SPRITE_MSB	;SPRITE # BEING WORKED ON
00021B 9C 00 00             	STZ	THIS_SPRITE_BYTE	;SPRITE # BEING WORKED ON
00021E                      ;-----
00021E                      ;FIRST SEE IF THIS NEEDS TO BE A LARGE SPRITE OR NOT
00021E AD 00 00             @100	LDA	SPRITE_SIZE	;IS LARGE SPRITE ON ?
000221 C9 40                	CMP	#64
000223 D0 00                	BNE	DF_SMALL
000225 DA                   	PHX
000226 5A                   	PHY
000227 E2 30                	SET_AXY8
000229 AC 00 00             	LDY	THIS_SPRITE_MSB
00022C AE 00 00             	LDX	THIS_SPRITE_BYTE
00022F BD 00 00             	LDA	OBJ_MASK,X	;GET MASK FOR THIS SPRITE
000232 0A                   	ASL		;MAKE SIZE BIT
000233 19 00 00             	ORA	OAM_DATA+512,Y	;REMOVE ANY MSB
000236 99 00 00             	STA	OAM_DATA+512,Y	;RESET IT TO ZERO
000239 C2 10                	SET_XY16
00023B 7A                   	PLY
00023C FA                   	PLX
00023D                      ;-----	
00023D B1 00                DF_SMALL	LDA	(FRAME_ADDR),Y	;GET X OFFSET
00023F 18                   	CLC
000240 6D 00 00             	ADC	X_OFF	;TEST
000243 4D 00 00             	EOR	X_FLIP_DATA
000246 18                   	CLC
000247 6D 00 00             	ADC	FRAME_X
00024A 9D 00 00             	STA	OAM_DATA,X	;SET X
00024D B0 00                	BCS	SET_XMSB
00024F                      ;-----
00024F                      ;CLEAR THE X MSB OF THIS SPRITE
00024F DA                   	PHX
000250 5A                   	PHY
000251 E2 30                	SET_AXY8
000253 AC 00 00             	LDY	THIS_SPRITE_MSB
000256 AE 00 00             	LDX	THIS_SPRITE_BYTE
000259 BD 00 00             	LDA	OBJ_MASK,X	;GET MASK FOR THIS SPRITE
00025C 49 FF                	EOR	#$FF
00025E 39 00 00             	AND	OAM_DATA+512,Y	;REMOVE ANY MSB
000261 99 00 00             	STA	OAM_DATA+512,Y	;RESET IT TO ZERO
000264 C2 10                	SET_XY16
000266 7A                   	PLY
000267 FA                   	PLX
000268                      ;-----
000268                      ;SET THE X MSB OF THIS SPRITE
000268                      SET_XMSB
000268                      
000268                      
000268 E8                   	INX
000269 C8                   	INY
00026A B1 00                	LDA	(FRAME_ADDR),Y	;GET Y OFFSET
00026C 18                   	CLC
00026D 6D 00 00             	ADC	Y_OFF	;TEST
000270                      
000270 4D 00 00             	EOR	Y_FLIP_DATA
000273 18                   	CLC
000274 6D 00 00             	ADC	FRAME_Y
000277 9D 00 00             	STA	OAM_DATA,X	;SET Y
00027A E8                   	INX
00027B C8                   	INY
00027C                      
00027C C2 20                	SET_A16
00027E B1 00                	LDA	(FRAME_ADDR),Y	;GET TILE #
000280 E2 20                	SET_A8
000282                      
000282 9D 00 00             	STA	OAM_DATA,X	;TILE #
000285 E8                   	INX
000286 AD 00 00             	LDA	FLIP_DATA
000289 09 30                	ORA	#$30
00028B 9D 00 00             	STA	OAM_DATA,X	;FLIP, PRIORITY, COLOR
00028E E8                   	INX
00028F C8                   	INY
000290 C8                   	INY
000291 8C 00 00             	STY	DMA_LIST	;SAVE POINTER TO DMA LIST
000294                      ;	INY
000294 C8                   	INY		;TO NEXT X
000295                      ;-----
000295 EE 00 00             	INC	THIS_SPRITE	;NEXT SPRITE
000298 AD 00 00             	LDA	THIS_SPRITE
00029B 4A                   	LSR
00029C 4A                   	LSR
00029D 8D 00 00             	STA	THIS_SPRITE_MSB	;SAVE MSB POINTER
0002A0 AD 00 00             	LDA	THIS_SPRITE
0002A3 29 03                	AND	#3
0002A5 8D 00 00             	STA	THIS_SPRITE_BYTE	;SET BYTE POSITION
0002A8                      ;
0002A8 AD 00 00             	LDA	THIS_SPRITE	
0002AB CD 00 00             	CMP	SPRITE_COUNT	;DID ALL SPRITE FOR THIS OBJECT ?
0002AE F0 00                	BEQ	DF_DONE
0002B0 4C 00 00             	JMP	@100
0002B3 C2 20                DF_DONE	SET_A16
0002B5                      ;-----
0002B5 E2 30                	SET_AXY8
0002B7 AD 00 00             	LDA	EXTRA_SPRITE	;CLEAR ANY EXTRA ONES
0002BA A8                   	TAY
0002BB C0 00                	CPY	#0
0002BD F0 00                	BEQ	@300
0002BF                      @200
0002BF 5A                   	PHY
0002C0 AC 00 00             	LDY	THIS_SPRITE_MSB
0002C3 AE 00 00             	LDX	THIS_SPRITE_BYTE
0002C6 BD 00 00             	LDA	OBJ_MASK,X	;GET MASK FOR THIS SPRITE
0002C9 19 00 00             	ORA	OAM_DATA+512,Y	;SET THE MSB
0002CC 99 00 00             	STA	OAM_DATA+512,Y
0002CF 7A                   	PLY
0002D0 EE 00 00             	INC	THIS_SPRITE	;NEXT SPRITE
0002D3 AD 00 00             	LDA	THIS_SPRITE
0002D6 4A                   	LSR
0002D7 4A                   	LSR
0002D8 8D 00 00             	STA	THIS_SPRITE_MSB	;SAVE MSB POINTER
0002DB AD 00 00             	LDA	THIS_SPRITE
0002DE 29 03                	AND	#3
0002E0 8D 00 00             	STA	THIS_SPRITE_BYTE	;SET BYTE POSITION
0002E3                      
0002E3 88                   	DEY
0002E4 D0 00                	BNE	@200
0002E6                      @300
0002E6 28                   	PLP
0002E7 60                   	RTS
0002E8                      
0002E8                      
0002E8                      	MODEND
0002E8                      
0002E8                      ;------------------
0002E8                      ;CLEAR_SPRITES -- CLEAR ALL SPRITE OFF THE SCREEN
0002E8                      
0002E8                      CLEAR_SPRITES	MODULE
0002E8                      
0002E8 08                   	PHP
0002E9 C2 30                	SET_AXY16
0002EB A9 05 00             	LDA	#5
0002EE 8D 00 00             	STA	ANIM_FRAME
0002F1 A9 00 00             	LDA	#0
0002F4 8D 00 00             	STA	ANIM_PTR
0002F7 E2 20                	SET_A8
0002F9 9C 00 00             	STZ	X_OFF
0002FC 9C 00 00             	STZ	Y_OFF
0002FF 9C 00 00             	STZ	SPRITE_DIR
000302 A9 10                	LDA	#$10
000304 8D 02 21             	STA	OAMADDL
000307 A9 10                	LDA	#$10
000309 8D 03 21             	STA	OAMADDH
00030C                      
00030C A2 80 00             	LDX	#128
00030F A9 20                CS_LP	LDA	#$20	;X
000311 8D 04 21             	STA	OAMDATAW
000314 A9 00                	LDA	#$0
000316 8D 04 21             	STA	OAMDATAW
000319 A9 00                	LDA	#$0
00031B 8D 04 21             	STA	OAMDATAW
00031E A9 00                	LDA	#$0
000320 8D 04 21             	STA	OAMDATAW
000323 CA                   	DEX
000324 D0 00                	BNE	CS_LP
000326                      ;
000326 A2 20 00             	LDX	#128/4
000329 A9 55                	LDA	#$55
00032B 8D 04 21             CS_LP2	STA	OAMDATAW
00032E 8D 04 21             	STA	OAMDATAW
000331 CA                   	DEX
000332 D0 00                	BNE	CS_LP2
000334                      ;
000334 A9 00                	LDA	#^OAM_DATA
000336 48                   	PHA
000337 AB                   	PLB
000338 A2 00 00             	LDX	#0
00033B A9 20                CS_LP3	LDA	#$20
00033D 9D 00 00             	STA	OAM_DATA,X		;CLEAR OAM DATA AREA
000340 9E 00 00             	STZ	OAM_DATA+1,X
000343 9E 00 00             	STZ	OAM_DATA+2,X
000346 9E 00 00             	STZ	OAM_DATA+3,X
000349 E8                   	INX
00034A E8                   	INX
00034B E8                   	INX
00034C E8                   	INX
00034D E0 00 02             	CPX	#512
000350 D0 00                	BNE	CS_LP3
000352                      ;
000352 A2 00 00             	LDX	#0
000355 A9 55                	LDA	#$55	;FF
000357 9D 00 00             CS_LP3A	STA	OAM_DATA+512,X		;SET X MSB AND SIZE
00035A E8                   	INX
00035B E0 20 00             	CPX	#128/4
00035E D0 00                	BNE	CS_LP3A
000360                      ;
000360 A2 80 00             	LDX	#$80
000363 9E 00 00             CS_LP4	STZ	FADE_FLAG+1,X		;CLEAR VARIABLES   
000366 CA                   	DEX
000367 D0 00                	BNE	CS_LP4
000369                      ;
000369 28                   	PLP
00036A 6B                   	RTL
00036B                      
00036B                      	MODEND
00036B                      
00036B                      ;------------------
00036B                      ;ANIM_CONTROL -- CONTROL THE ANIM USING THE JOYPAD
00036B                      ;
00036B                      ; X = FLIP SPRITE IN X AXIS
00036B                      ; Y = FLIP SPRITE IN Y AXIS
00036B                      ; SELECT = TOGGLE SINGLE STEP / CONTINUEOUS ANIMATION
00036B                      ; A OR B = NEXT FRAME IN SINGLE STEP
00036B                      
00036B                      ANIM_CONTROL	MODULE
00036B                      
00036B 08                   	PHP
00036C C2 30                	SET_AXY16
00036E                      ;
00036E AD 00 00             	LDA	DB1_DATA		;GET DEBOUNCED JOY 1 DATA
000371 89 00 00             	BIT	#JOY_XBUTT		;FLIP IN X
000374 F0 00                	BEQ	@100
000376 E2 20                	SET_A8
000378 AD 00 00             	LDA	FLIP_DATA
00037B 49 40                	EOR	#$40
00037D 8D 00 00             	STA	FLIP_DATA
000380 C2 20                	SET_A16
000382 AD 00 00             	LDA	DB1_DATA
000385                      ;-----
000385 89 00 00             @100	BIT	#JOY_YBUTT		;FLIP IN Y
000388 F0 00                	BEQ	@200
00038A E2 20                	SET_A8
00038C AD 00 00             	LDA	FLIP_DATA
00038F 49 80                	EOR	#$80
000391 8D 00 00             	STA	FLIP_DATA
000394 C2 20                	SET_A16
000396 AD 00 00             	LDA	DB1_DATA
000399                      ;-----
000399 89 00 00             @200	BIT	#JOY_SELECT		;TOGGLE SINGLE STEP/ANIM
00039C F0 00                	BEQ	@300
00039E E2 20                    	SET_A8
0003A0 AD 00 00             	LDA	SS_FLAG
0003A3 49 01                	EOR	#1
0003A5 8D 00 00             	STA	SS_FLAG
0003A8 C2 20                	SET_A16
0003AA AD 00 00             	LDA	DB1_DATA
0003AD                      ;-----
0003AD AD 00 00             @300	LDA	JOY1_DATA		;USE RAW DATA
0003B0 89 00 00             	BIT	#JOY_LEFT		;MOVE LEFT ?
0003B3 F0 00                	BEQ	@400
0003B5 AD 00 00             	LDA	X_OFF
0003B8 38                   	SEC
0003B9 E9 02 00             	SBC	#2
0003BC 8D 00 00             	STA	X_OFF
0003BF AD 00 00             	LDA	JOY1_DATA
0003C2                      ;-----
0003C2 89 00 00             @400	BIT	#JOY_RIGHT		;MOVE RIGHT ?
0003C5 F0 00                	BEQ	@500
0003C7 AD 00 00             	LDA	X_OFF
0003CA 18                   	CLC
0003CB 69 02 00             	ADC	#2
0003CE 8D 00 00             	STA	X_OFF
0003D1 AD 00 00             	LDA	JOY1_DATA
0003D4                      ;-----
0003D4 89 00 00             @500	BIT	#JOY_UP		;MOVE UP ?
0003D7 F0 00                	BEQ	@600
0003D9 AD 00 00             	LDA	Y_OFF
0003DC 38                   	SEC
0003DD E9 02 00             	SBC	#2
0003E0 8D 00 00             	STA	Y_OFF
0003E3 AD 00 00             	LDA	JOY1_DATA
0003E6                      ;-----
0003E6 89 00 00             @600	BIT	#JOY_DOWN		;MOVE DOWN ?
0003E9 F0 00                	BEQ	@700
0003EB AD 00 00             	LDA	Y_OFF
0003EE 18                   	CLC
0003EF 69 02 00             	ADC	#2
0003F2 8D 00 00             	STA	Y_OFF
0003F5 AD 00 00             	LDA	JOY1_DATA
0003F8                      ;-----
0003F8                      @700
0003F8                      ;
0003F8 28                   	PLP
0003F9 60                   	RTS
0003FA                      
0003FA                      	MODEND
0003FA                      
0003FA                      ;------------------
0003FA                      ;DO_ANIM_CMDS -- EXECUTE THE ANIM COMMANDS
0003FA                      
0003FA                      
0003FA                      
0003FA                      DO_ANIM_CMDS	MODULE
0003FA                      
0003FA 08                   	PHP
0003FB                      ;-----
0003FB                      ;CENTER THE SPRITE
0003FB E2 20                	SET_A8
0003FD AD 00 00             	LDA	FLIP_DATA
000400 89 40                	BIT	#$40	;REVERSE IN X ?
000402 F0 00                	BEQ	@300
000404 AD 00 00             	LDA	MAX_WIDTH
000407 18                   	CLC
000408 69 70                	ADC	#$70
00040A 8D 00 00             	STA	FRAME_X
00040D 4C 00 00             	JMP	@310
000410                      ;
000410 AD 00 00             @300	LDA	MAX_WIDTH
000413 4A                   	LSR	A	;WIDTH / 2
000414 49 FF                	EOR	#$FF	;MAKE NEGATIVE
000416 18                   	CLC
000417 69 70                	ADC	#$0070
000419 8D 00 00             	STA	FRAME_X
00041C                      ;
00041C AD 00 00             @310	LDA	FLIP_DATA
00041F 89 80                	BIT	#$80	;REVERSE IN Y ?
000421 F0 00                	BEQ	@320
000423 AD 00 00             	LDA	MAX_HEIGTH
000426 4A                   	LSR	A
000427 18                   	CLC
000428 69 70                	ADC	#$70
00042A 8D 00 00             	STA	FRAME_Y
00042D 4C 00 00             	JMP	@330
000430                      ;
000430 AD 00 00             @320	LDA	MAX_HEIGTH
000433 4A                   	LSR	A
000434 49 FF                	EOR	#$FF
000436 18                   	CLC
000437 69 70                	ADC	#$0070	
000439 8D 00 00             	STA	FRAME_Y
00043C                      @330
00043C                      ;-----
00043C AD 00 00             	LDA	SS_FLAG	;SINGLE STEP NOW ?
00043F C9 01                	CMP	#1
000441 D0 00                	BNE	@5
000443 C2 20                	SET_A16
000445 AD 00 00             	LDA	DB1_DATA	;GET DEBOUNCED JOY DATA
000448 C9 00 00             	CMP	#JOY_ABUTT	;GO FORWARD ?
00044B F0 00                	BEQ	@8
00044D C9 00 00             	CMP	#JOY_BBUTT	;GO FORWARD ?
000450 F0 00                	BEQ	@8
000452 4C 00 00             	JMP	@999
000455                      
000455 C2 20                @5	SET_A16
000457 18                   	CLC
000458 AD 00 00             	LDA	NMI_CTR
00045B 69 01 00             	ADC	#1
00045E 8D 00 00             	STA	NMI_CTR
000461 89 03 00             	BIT	#$03
000464 D0 00                	BNE	@999
000466 E2 20                @8	SET_A8
000468 A9 01                	LDA	#1
00046A 48                   	PHA
00046B AB                   	PLB
00046C C2 10                	SET_XY16
00046E                      ;
00046E AE 00 00             @10	LDX	ANIM_PTR	;GET POINTER
000471 BD 00 00             	LDA	GOL2_ANIM,X	;GET COMMAND
000474 C9 FE                	CMP	#LOOP	;DO A LOOP
000476 D0 00                	BNE	@200
000478 C2 20                    	SET_A16
00047A E8                   	INX
00047B BD 00 00             	LDA	GOL2_ANIM,X	;GET ADDRESS TO LOOP TO
00047E 38                   	SEC
00047F E9 00 00             	SBC	#<GOL2_ANIM	;MAKE NEW ANIM_PTR
000482 8D 00 00             	STA	ANIM_PTR
000485 E2 20                	SET_A8
000487 4C 00 00             	JMP	@10
00048A                      ;
00048A C2 20                @200	SET_A16
00048C E8                   	INX
00048D BD 00 00             	LDA	GOL2_ANIM,X	;GET ADDRESS OF PICTURE TO DRAW
000490 8D 00 00             	STA	FRAME_ADDR	;SET ADDRESS OF FRAME DATA
000493 20 00 00             	JSR	DRAW_FRAME
000496 C2 30                	SET_AXY16
000498 18                   	CLC
000499 AD 00 00             	LDA	ANIM_PTR
00049C 69 05 00             	ADC	#5
00049F 8D 00 00             	STA	ANIM_PTR
0004A2 28                   @999	PLP
0004A3 60                   	RTS
0004A4                      
0004A4                      	MODEND
0004A4                      
0004A4                      ;------------------
0004A4                      ;TITLE_SCRN -- DRAW THE TITLE SCREEN AND WAIT FOR START BUTTON
0004A4                      
0004A4                      TITLE_SCRN	MODULE
0004A4                      
0004A4 08                   	PHP
0004A5 8B                   	PHB
0004A6                      ;-----
0004A6                      ;EXECUTE TITLE SCRIPT
0004A6                      
0004A6 E2 20 C2 10 A9 00 +  	RUN	TTL_SCRIPT	;EXECUTE TITLE SCRIPT
0004B5                      ;-----
0004B5 AB                   	PLB
0004B6 28                   	PLP
0004B7 6B                   	RTL
0004B8                      ;=====
0004B8 08                   TITLE_EXIT	PHP
0004B9 22 00 00 00          	JSL	FADE_OUT
0004BD E2 20                	SET_A8
0004BF AD 00 00             @FADE_WAIT	LDA	FADE_FLAG
0004C2 D0 00                	BNE	@FADE_WAIT
0004C4 78                   	SEI
0004C5 9C 00 00             	STZ	TITLE_FLAG
0004C8 22 00 00 00          	JSL	CLEAR_REGS
0004CC E2 20 C2 10 A9 00 +  	RUN	LVL1_SCRIPT
0004DB 28                   	PLP
0004DC 6B                   	RTL
0004DD                      
0004DD                      	MODEND
0004DD                      
0004DD                      ;------------------
0004DD                      ;LVL1_EXIT -- EXIT LEVEL 1 AND START LEVEL 2
0004DD                      
0004DD                      LVL1_EXIT	MODULE
0004DD                      
0004DD 08                   	PHP
0004DE 22 00 00 00          	JSL	FADE_OUT
0004E2 E2 20                	SET_A8
0004E4 AD 00 00             @FADE_WAIT	LDA	FADE_FLAG
0004E7 D0 00                	BNE	@FADE_WAIT
0004E9 78                   	SEI
0004EA 9C 00 00             	STZ	TITLE_FLAG
0004ED 22 00 00 00          	JSL	CLEAR_REGS
0004F1 E2 20 C2 10 A9 00 +  	RUN	LVL2_SCRIPT
000500 28                   	PLP
000501 6B                   	RTL
000502                      
000502                      	MODEND
000502                      
000502                      ;------------------
000502                      ;LVL2_EXIT -- EXIT LEVEL 2 AND START LEVEL 2
000502                      
000502                      LVL2_EXIT	MODULE
000502                      
000502 08                   	PHP
000503 22 00 00 00          	JSL	FADE_OUT
000507 E2 20                	SET_A8
000509 AD 00 00             @FADE_WAIT	LDA	FADE_FLAG
00050C D0 00                	BNE	@FADE_WAIT
00050E 78                   	SEI
00050F 9C 00 00             	STZ	TITLE_FLAG
000512 22 00 00 00          	JSL	CLEAR_REGS
000516 22 00 00 00          	JSL	SET_BASES
00051A 28                   	PLP
00051B 6B                   	RTL
00051C                      
00051C                      	MODEND
00051C                      
00051C                      ;------------------
00051C                      
00051C                      ;------------------
00051C                      
00051C                      	SECTION	REGISTER,REG_GROUP
000000                      
000000 47 41 52 47 4F 59 +  	DB	'GARGOYLES             '
000016 00                   	DB	0	;ROM CART
000017 09                   	DB	9	;512k
000018 00                   	DB	0	;NO RAM
000019 00 00                	DB	0,0	;MAKER CODE
00001B 00                   	DB	0	;VERSION #
00001C CD 7C                COMP_CHECK	DW	$7CCD	;COMPLEMENT CHECK
00001E 32 83                CHECK_SUM	DW	$8332	;CHECK SUM
000020                      
000020                      ;------------------
000020                      
000020                      	SECTION	INT_VECTORS,VECTOR_GROUP
000000                      
000000 38 00                	DW	COP_ENTRY	;FFE4 = COP
000002 00 00                	DW	BRK_ENTRY  	;FFE6 = BRK
000004 00 00                	DW	BRK_ENTRY  	;FFE8 = ABORT
000006 00 00                	DW	NMI_INT  	;FFEA = NMI
000008 00 00                	DW	0  	;FFEC
00000A 00 00                	DW	IRQ_INT	;FFEE = IRQ
00000C                      
00000C                      ;------------------
00000C                      
00000C                      	SECTION	DB_VECTORS,DEBUG_GROUP
000000                       
000000 5C 0B E0 7D          BRK_ENTRY  	JML	$7DE00B	;BRK ENTRY
000004 5C 0E E0 7D          COP_ENTRY	JML	$7DE00E	;COP ENTRY
000008 5C 00 E0 7D          COLD_START	JML	$7DE000	;COLD START
00000C                      
00000C                      ;------------------
00000C                      
00000C                      
00000C                      ;PROG_END	END	BEGIN
00000C                      
00000C                      	SECTION	DATA,PAGE01_GROUP
000000                      
000000                      
000000                      FONT1	INCBIN	FONT1.CHR
000C00                      PAL2	INCLUDE	FONT1.PAL
000C00                      ;*
000C00                      ;* FONT1.pal
000C00                      ;*
000C00                      ;* Palette generated by tPGEN
000C00                      ;*
000C00 00 00 42 08 84 10 +  	HEX	000042088410c61808214a298c31ce393146734eb556f75e39677b6fbd77ff7f
000C00 00 00 42 08 84 10 +  	HEX	000042088410c61808214a298c31ce393146734eb556f75e39677b6fbd77ff7f
000C20 00 60 A0 A0 A0       OBJ_SIZE_TABLE	DB	$00,$60,$A0,$A0,$A0	;SIZE OF SPRITES
000C25 01 04 10 40          OBJ_MASK	DB	$01,$04,$10,$40
000C29                      
000C29                      ;-----
000C29                      ;THIS IS WHERE I CAN LOOK UP THE ADDRESS OF ANY ANIMATION
000C29                      ;EACH ANIMATION TAKES UP 9 BYTES
000C29                      ;
000C29                      ;BYTE	DESCRIPTION
000C29                      ;--------------------------
000C29                      ; 0	ANIMATION COMMANDS LSB
000C29                      ; 1	ANIMATION COMMANDS MSB
000C29                      ; 2	ANIMATION COMMANDS PAGE #
000C29                      ; 3	CHARACTER TILES LSB
000C29                      ; 4	CHARACTER TILES MSB
000C29                      ; 5	CHARACTER TILES PAGE #
000C29                      ; 6
000C29                      ; 7
000C29                      ; 8
000C29                      
000C29                      ;******************
000C29                      ;THESE SECTIONS CONTAIN THE DATA FOR EACH ANIMATION IN THE GAME
000C29                      ;TO LOOK UP THE LOCATION OF AN ANIMATION MULTIPLY ITS # BY 3
000C29                      ;THE FIRST BYTE IS THE OFFSET LSB
000C29                      ;THE SECOND BYTE IS THE OFFSET MSB
000C29                      ;THE THIRD BYTE IS THE PAGE #
000C29                      ;
000C29                      ;ANIM #	DESCRIPTION
000C29                      ;---------------------------
000C29                      ;
000C29                      ; 0	GOLIATH RUNNING
000C29                      ; 1	
000C29                      ;
000C29                      ;
000C29                      ;-----
000C29                      	PUSHS	;SAVE CURRENT SECTION DEFINITION
000C29                      ;-----
000C29                      	SECTION ANIM_CMDS_SEC,PAGE01_GROUP
000000                      
000000                      ANIM_CMDS		;COMMAND LIST FOR EACH ANIMATION
000000                      
000000                      ;-----
000000                      	SECTION ANIM_TILES_SEC,PAGE01_GROUP
000000                      
000000                      ANIM_TILES		;TILE DATA FOR EACH ANIMATION
000000                      
000000                      ;-----
000000                      	SECTION ANIM_PALS_SEC,PAGE01_GROUP
000000                      
000000                      ANIM_PALS		;PALETTE DATA FOR EACH ANIMATION
000000                      
000000                      ;-----
000000                      	POPS	;RESTORE PREVIOUS SECTION DEFINITION
000C29                      
000C29                      ;******************
000C29                      ;ANIMATION DATA INCLUDED HERE
000C29                      
000C29                      	INCLUDE	..\SPRITES\GOLIATH\GOL2.ANY
000C29                      ;===================
000C29                      ;SNESCHOP ANIMATION DATA FOR: GOL2.ANM
000C29                      
000C29                      ;	INCLUDE	SNESANI.658
000C29                      
000C29                      	PUSHS
000C29                      
000C29                      	SECTION ANIM_CMDS_SEC
000000                      
000000 38 00 00             	DT	GOL2_ANIM	;LOCATION OF ANIMATION COMMANDS
000003                      
000003                      	SECTION ANIM_TILES_SEC
000000                      
000000 38 00 00             	DT	GOL2_CHR	;LOCATION OF CHAR TILES
000003                      
000003                      	SECTION ANIM_PALS_SEC
000000                      
000000 38 00 00             	DT	GOL2_PAL 	;LOCATION OF PALETTE DATA
000003                      
000003                      	POPS
000C29                       ;-----
000C29                      ;ANIMATION DATA FILES
000C29                      
000C29                      GOL2_PAL	INCLUDE	..\SPRITES\GOLIATH\GOL2.PAL	;PALETTE DATA
000C29 40 28 00 00 00 24 +  gol2_PAL	HEX	4028000000241F00243D000CB8427119CB082400CA3966310429A22040180010
000C29 40 28 00 00 00 24 +  gol2_PAL	HEX	4028000000241F00243D000CB8427119CB082400CA3966310429A22040180010
000C49                      
000C49                      GOL2_CHR	INCBIN	..\SPRITES\GOLIATH\GOL2.CHR	;SPRITE TILE DATA
004FC9                      
004FC9                      	INCLUDE	..\SPRITES\GOLIATH\GOL2.INC	;ANIMATION FRAME DATA
004FC9                      ;===================
004FC9                      ;GOL2 FRAME 000
004FC9                      
004FC9 0C                   GOL2_000	DB	012		;# OF SUB-SPRITES
004FCA                      
004FCA                      ;-----
004FCA                      ;SUB-SPRITE DATA: PAL #, X OFFSET, Y OFFSET, TILE #
004FCA                      
004FCA 00 0D 08             	DB	000,013,008
004FCD 00 00                	DW	0000
004FCF 00 1D 08             	DB	000,029,008
004FD2 02 00                	DW	0002
004FD4 00 2D 08             	DB	000,045,008
004FD7 04 00                	DW	0004
004FD9 00 3D 08             	DB	000,061,008
004FDC 06 00                	DW	0006
004FDE 00 05 18             	DB	000,005,024
004FE1 08 00                	DW	0008
004FE3 00 15 18             	DB	000,021,024
004FE6 0A 00                	DW	0010
004FE8 00 25 18             	DB	000,037,024
004FEB 0C 00                	DW	0012
004FED 00 35 18             	DB	000,053,024
004FF0 0E 00                	DW	0014
004FF2 00 05 28             	DB	000,005,040
004FF5 20 00                	DW	0032
004FF7 00 1D 28             	DB	000,029,040
004FFA 22 00                	DW	0034
004FFC 00 2D 28             	DB	000,045,040
004FFF 24 00                	DW	0036
005001 00 26 38             	DB	000,038,056
005004 26 00                	DW	0038
005006                      
005006                      ;-----
005006                      ;DMA DATA AREA
005006                      
005006 02                   	DB	002		;# OF DMA's
005007                      
005007 00 00                	DW	00000		;SOURCE OFFSET
005009 00 00                	DW	00000		;DEST OFFSET
00500B 00 05                	DW	01280		;DMA LENGTH
00500D                      
00500D 00 05                	DW	01280		;SOURCE OFFSET
00500F 00 03                	DW	00768		;DEST OFFSET
005011 00 01                	DW	00256		;DMA LENGTH
005013                      
005013                      ;-----
005013                      ;COLLISION DATA AREA
005013                      
005013 03                   	DB	003		;# OF COLLISION BOXES
005014                      ;
005014 00                   	DB	000		;COLLISION TYPE
005015 14                   	DB	020		;LEFT X
005016 28                   	DB	040		;RIGHT X
005017 23                   	DB	035		;TOP Y
005018 37                   	DB	055		;BOTTOM Y
005019                      ;
005019 01                   	DB	001		;COLLISION TYPE
00501A 19                   	DB	025		;LEFT X
00501B 2D                   	DB	045		;RIGHT X
00501C 28                   	DB	040		;TOP Y
00501D 3C                   	DB	060		;BOTTOM Y
00501E                      ;
00501E 02                   	DB	002		;COLLISION TYPE
00501F 05                   	DB	005		;LEFT X
005020 3C                   	DB	060		;RIGHT X
005021 0A                   	DB	010		;TOP Y
005022 41                   	DB	065		;BOTTOM Y
005023                      
005023                      ;===================
005023                      ;GOL2 FRAME 001
005023                      
005023 0B                   GOL2_001	DB	011		;# OF SUB-SPRITES
005024                      
005024                      ;-----
005024                      ;SUB-SPRITE DATA: PAL #, X OFFSET, Y OFFSET, TILE #
005024                      
005024 00 14 07             	DB	000,020,007
005027 00 00                	DW	0000
005029 00 24 07             	DB	000,036,007
00502C 02 00                	DW	0002
00502E 00 34 07             	DB	000,052,007
005031 04 00                	DW	0004
005033 00 0B 17             	DB	000,011,023
005036 06 00                	DW	0006
005038 00 1B 17             	DB	000,027,023
00503B 08 00                	DW	0008
00503D 00 2B 17             	DB	000,043,023
005040 0A 00                	DW	0010
005042 00 0A 27             	DB	000,010,039
005045 0C 00                	DW	0012
005047 00 1A 27             	DB	000,026,039
00504A 0E 00                	DW	0014
00504C 00 2A 27             	DB	000,042,039
00504F 20 00                	DW	0032
005051 00 3A 27             	DB	000,058,039
005054 22 00                	DW	0034
005056 00 23 37             	DB	000,035,055
005059 24 00                	DW	0036
00505B                      
00505B                      ;-----
00505B                      ;DMA DATA AREA
00505B                      
00505B 02                   	DB	002		;# OF DMA's
00505C                      
00505C 00 06                	DW	01536		;SOURCE OFFSET
00505E 00 00                	DW	00000		;DEST OFFSET
005060 C0 04                	DW	01216		;DMA LENGTH
005062                      
005062 C0 0A                	DW	02752		;SOURCE OFFSET
005064 00 03                	DW	00768		;DEST OFFSET
005066 C0 00                	DW	00192		;DMA LENGTH
005068                      
005068                      ;-----
005068                      ;COLLISION DATA AREA
005068                      
005068 00                   	DB	000		;# OF COLLISION BOXES
005069                      
005069                      ;===================
005069                      ;GOL2 FRAME 002
005069                      
005069 0B                   GOL2_002	DB	011		;# OF SUB-SPRITES
00506A                      
00506A                      ;-----
00506A                      ;SUB-SPRITE DATA: PAL #, X OFFSET, Y OFFSET, TILE #
00506A                      
00506A 00 1A 00             	DB	000,026,000
00506D 00 00                	DW	0000
00506F 00 2A 00             	DB	000,042,000
005072 02 00                	DW	0002
005074 00 14 10             	DB	000,020,016
005077 04 00                	DW	0004
005079 00 24 10             	DB	000,036,016
00507C 06 00                	DW	0006
00507E 00 34 10             	DB	000,052,016
005081 08 00                	DW	0008
005083 00 12 20             	DB	000,018,032
005086 0A 00                	DW	0010
005088 00 22 20             	DB	000,034,032
00508B 0C 00                	DW	0012
00508D 00 32 20             	DB	000,050,032
005090 0E 00                	DW	0014
005092 00 12 30             	DB	000,018,048
005095 20 00                	DW	0032
005097 00 22 30             	DB	000,034,048
00509A 22 00                	DW	0034
00509C 00 32 30             	DB	000,050,048
00509F 24 00                	DW	0036
0050A1                      
0050A1                      ;-----
0050A1                      ;DMA DATA AREA
0050A1                      
0050A1 02                   	DB	002		;# OF DMA's
0050A2                      
0050A2 80 0B                	DW	02944		;SOURCE OFFSET
0050A4 00 00                	DW	00000		;DEST OFFSET
0050A6 C0 04                	DW	01216		;DMA LENGTH
0050A8                      
0050A8 40 10                	DW	04160		;SOURCE OFFSET
0050AA 00 03                	DW	00768		;DEST OFFSET
0050AC C0 00                	DW	00192		;DMA LENGTH
0050AE                      
0050AE                      ;-----
0050AE                      ;COLLISION DATA AREA
0050AE                      
0050AE 00                   	DB	000		;# OF COLLISION BOXES
0050AF                      
0050AF                      ;===================
0050AF                      ;GOL2 FRAME 003
0050AF                      
0050AF 0B                   GOL2_003	DB	011		;# OF SUB-SPRITES
0050B0                      
0050B0                      ;-----
0050B0                      ;SUB-SPRITE DATA: PAL #, X OFFSET, Y OFFSET, TILE #
0050B0                      
0050B0 00 1B 00             	DB	000,027,000
0050B3 00 00                	DW	0000
0050B5 00 2B 00             	DB	000,043,000
0050B8 02 00                	DW	0002
0050BA 00 14 10             	DB	000,020,016
0050BD 04 00                	DW	0004
0050BF 00 24 10             	DB	000,036,016
0050C2 06 00                	DW	0006
0050C4 00 34 10             	DB	000,052,016
0050C7 08 00                	DW	0008
0050C9 00 13 20             	DB	000,019,032
0050CC 0A 00                	DW	0010
0050CE 00 23 20             	DB	000,035,032
0050D1 0C 00                	DW	0012
0050D3 00 33 20             	DB	000,051,032
0050D6 0E 00                	DW	0014
0050D8 00 11 30             	DB	000,017,048
0050DB 20 00                	DW	0032
0050DD 00 21 30             	DB	000,033,048
0050E0 22 00                	DW	0034
0050E2 00 31 30             	DB	000,049,048
0050E5 24 00                	DW	0036
0050E7                      
0050E7                      ;-----
0050E7                      ;DMA DATA AREA
0050E7                      
0050E7 02                   	DB	002		;# OF DMA's
0050E8                      
0050E8 00 11                	DW	04352		;SOURCE OFFSET
0050EA 00 00                	DW	00000		;DEST OFFSET
0050EC C0 04                	DW	01216		;DMA LENGTH
0050EE                      
0050EE C0 15                	DW	05568		;SOURCE OFFSET
0050F0 00 03                	DW	00768		;DEST OFFSET
0050F2 C0 00                	DW	00192		;DMA LENGTH
0050F4                      
0050F4                      ;-----
0050F4                      ;COLLISION DATA AREA
0050F4                      
0050F4 00                   	DB	000		;# OF COLLISION BOXES
0050F5                      
0050F5                      ;===================
0050F5                      ;GOL2 FRAME 004
0050F5                      
0050F5 0B                   GOL2_004	DB	011		;# OF SUB-SPRITES
0050F6                      
0050F6                      ;-----
0050F6                      ;SUB-SPRITE DATA: PAL #, X OFFSET, Y OFFSET, TILE #
0050F6                      
0050F6 00 19 00             	DB	000,025,000
0050F9 00 00                	DW	0000
0050FB 00 29 00             	DB	000,041,000
0050FE 02 00                	DW	0002
005100 00 11 10             	DB	000,017,016
005103 04 00                	DW	0004
005105 00 21 10             	DB	000,033,016
005108 06 00                	DW	0006
00510A 00 31 10             	DB	000,049,016
00510D 08 00                	DW	0008
00510F 00 0F 20             	DB	000,015,032
005112 0A 00                	DW	0010
005114 00 1F 20             	DB	000,031,032
005117 0C 00                	DW	0012
005119 00 2F 20             	DB	000,047,032
00511C 0E 00                	DW	0014
00511E 00 19 30             	DB	000,025,048
005121 20 00                	DW	0032
005123 00 29 30             	DB	000,041,048
005126 22 00                	DW	0034
005128 00 39 30             	DB	000,057,048
00512B 24 00                	DW	0036
00512D                      
00512D                      ;-----
00512D                      ;DMA DATA AREA
00512D                      
00512D 02                   	DB	002		;# OF DMA's
00512E                      
00512E 80 16                	DW	05760		;SOURCE OFFSET
005130 00 00                	DW	00000		;DEST OFFSET
005132 C0 04                	DW	01216		;DMA LENGTH
005134                      
005134 40 1B                	DW	06976		;SOURCE OFFSET
005136 00 03                	DW	00768		;DEST OFFSET
005138 C0 00                	DW	00192		;DMA LENGTH
00513A                      
00513A                      ;-----
00513A                      ;COLLISION DATA AREA
00513A                      
00513A 00                   	DB	000		;# OF COLLISION BOXES
00513B                      
00513B                      ;===================
00513B                      ;GOL2 FRAME 005
00513B                      
00513B 0B                   GOL2_005	DB	011		;# OF SUB-SPRITES
00513C                      
00513C                      ;-----
00513C                      ;SUB-SPRITE DATA: PAL #, X OFFSET, Y OFFSET, TILE #
00513C                      
00513C 00 1C 00             	DB	000,028,000
00513F 00 00                	DW	0000
005141 00 2C 00             	DB	000,044,000
005144 02 00                	DW	0002
005146 00 0F 10             	DB	000,015,016
005149 04 00                	DW	0004
00514B 00 1F 10             	DB	000,031,016
00514E 06 00                	DW	0006
005150 00 2F 10             	DB	000,047,016
005153 08 00                	DW	0008
005155 00 0B 20             	DB	000,011,032
005158 0A 00                	DW	0010
00515A 00 1B 20             	DB	000,027,032
00515D 0C 00                	DW	0012
00515F 00 2B 20             	DB	000,043,032
005162 0E 00                	DW	0014
005164 00 3B 20             	DB	000,059,032
005167 20 00                	DW	0032
005169 00 21 30             	DB	000,033,048
00516C 22 00                	DW	0034
00516E 00 31 30             	DB	000,049,048
005171 24 00                	DW	0036
005173                      
005173                      ;-----
005173                      ;DMA DATA AREA
005173                      
005173 02                   	DB	002		;# OF DMA's
005174                      
005174 00 1C                	DW	07168		;SOURCE OFFSET
005176 00 00                	DW	00000		;DEST OFFSET
005178 C0 04                	DW	01216		;DMA LENGTH
00517A                      
00517A C0 20                	DW	08384		;SOURCE OFFSET
00517C 00 03                	DW	00768		;DEST OFFSET
00517E C0 00                	DW	00192		;DMA LENGTH
005180                      
005180                      ;-----
005180                      ;COLLISION DATA AREA
005180                      
005180 00                   	DB	000		;# OF COLLISION BOXES
005181                      
005181                      ;===================
005181                      ;GOL2 FRAME 006
005181                      
005181 0B                   GOL2_006	DB	011		;# OF SUB-SPRITES
005182                      
005182                      ;-----
005182                      ;SUB-SPRITE DATA: PAL #, X OFFSET, Y OFFSET, TILE #
005182                      
005182 00 11 06             	DB	000,017,006
005185 00 00                	DW	0000
005187 00 21 06             	DB	000,033,006
00518A 02 00                	DW	0002
00518C 00 31 06             	DB	000,049,006
00518F 04 00                	DW	0004
005191 00 05 16             	DB	000,005,022
005194 06 00                	DW	0006
005196 00 15 16             	DB	000,021,022
005199 08 00                	DW	0008
00519B 00 25 16             	DB	000,037,022
00519E 0A 00                	DW	0010
0051A0 00 35 16             	DB	000,053,022
0051A3 0C 00                	DW	0012
0051A5 00 06 26             	DB	000,006,038
0051A8 0E 00                	DW	0014
0051AA 00 1C 26             	DB	000,028,038
0051AD 20 00                	DW	0032
0051AF 00 2C 26             	DB	000,044,038
0051B2 22 00                	DW	0034
0051B4 00 27 36             	DB	000,039,054
0051B7 24 00                	DW	0036
0051B9                      
0051B9                      ;-----
0051B9                      ;DMA DATA AREA
0051B9                      
0051B9 02                   	DB	002		;# OF DMA's
0051BA                      
0051BA 80 21                	DW	08576		;SOURCE OFFSET
0051BC 00 00                	DW	00000		;DEST OFFSET
0051BE C0 04                	DW	01216		;DMA LENGTH
0051C0                      
0051C0 40 26                	DW	09792		;SOURCE OFFSET
0051C2 00 03                	DW	00768		;DEST OFFSET
0051C4 C0 00                	DW	00192		;DMA LENGTH
0051C6                      
0051C6                      ;-----
0051C6                      ;COLLISION DATA AREA
0051C6                      
0051C6 00                   	DB	000		;# OF COLLISION BOXES
0051C7                      
0051C7                      ;===================
0051C7                      ;GOL2 FRAME 007
0051C7                      
0051C7 0A                   GOL2_007	DB	010		;# OF SUB-SPRITES
0051C8                      
0051C8                      ;-----
0051C8                      ;SUB-SPRITE DATA: PAL #, X OFFSET, Y OFFSET, TILE #
0051C8                      
0051C8 00 18 06             	DB	000,024,006
0051CB 00 00                	DW	0000
0051CD 00 28 06             	DB	000,040,006
0051D0 02 00                	DW	0002
0051D2 00 38 06             	DB	000,056,006
0051D5 04 00                	DW	0004
0051D7 00 11 16             	DB	000,017,022
0051DA 06 00                	DW	0006
0051DC 00 21 16             	DB	000,033,022
0051DF 08 00                	DW	0008
0051E1 00 31 16             	DB	000,049,022
0051E4 0A 00                	DW	0010
0051E6 00 11 26             	DB	000,017,038
0051E9 0C 00                	DW	0012
0051EB 00 21 26             	DB	000,033,038
0051EE 0E 00                	DW	0014
0051F0 00 31 26             	DB	000,049,038
0051F3 20 00                	DW	0032
0051F5 00 22 36             	DB	000,034,054
0051F8 22 00                	DW	0034
0051FA                      
0051FA                      ;-----
0051FA                      ;DMA DATA AREA
0051FA                      
0051FA 02                   	DB	002		;# OF DMA's
0051FB                      
0051FB 00 27                	DW	09984		;SOURCE OFFSET
0051FD 00 00                	DW	00000		;DEST OFFSET
0051FF 80 04                	DW	01152		;DMA LENGTH
005201                      
005201 80 2B                	DW	11136		;SOURCE OFFSET
005203 00 03                	DW	00768		;DEST OFFSET
005205 80 00                	DW	00128		;DMA LENGTH
005207                      
005207                      ;-----
005207                      ;COLLISION DATA AREA
005207                      
005207 00                   	DB	000		;# OF COLLISION BOXES
005208                      
005208                      ;===================
005208                      ;GOL2 FRAME 008
005208                      
005208 0B                   GOL2_008	DB	011		;# OF SUB-SPRITES
005209                      
005209                      ;-----
005209                      ;SUB-SPRITE DATA: PAL #, X OFFSET, Y OFFSET, TILE #
005209                      
005209 00 17 03             	DB	000,023,003
00520C 00 00                	DW	0000
00520E 00 27 03             	DB	000,039,003
005211 02 00                	DW	0002
005213 00 37 03             	DB	000,055,003
005216 04 00                	DW	0004
005218 00 11 13             	DB	000,017,019
00521B 06 00                	DW	0006
00521D 00 21 13             	DB	000,033,019
005220 08 00                	DW	0008
005222 00 31 13             	DB	000,049,019
005225 0A 00                	DW	0010
005227 00 11 23             	DB	000,017,035
00522A 0C 00                	DW	0012
00522C 00 21 23             	DB	000,033,035
00522F 0E 00                	DW	0014
005231 00 31 23             	DB	000,049,035
005234 20 00                	DW	0032
005236 00 16 33             	DB	000,022,051
005239 22 00                	DW	0034
00523B 00 36 33             	DB	000,054,051
00523E 24 00                	DW	0036
005240                      
005240                      ;-----
005240                      ;DMA DATA AREA
005240                      
005240 02                   	DB	002		;# OF DMA's
005241                      
005241 00 2C                	DW	11264		;SOURCE OFFSET
005243 00 00                	DW	00000		;DEST OFFSET
005245 C0 04                	DW	01216		;DMA LENGTH
005247                      
005247 C0 30                	DW	12480		;SOURCE OFFSET
005249 00 03                	DW	00768		;DEST OFFSET
00524B C0 00                	DW	00192		;DMA LENGTH
00524D                      
00524D                      ;-----
00524D                      ;COLLISION DATA AREA
00524D                      
00524D 00                   	DB	000		;# OF COLLISION BOXES
00524E                      
00524E                      ;===================
00524E                      ;GOL2 FRAME 009
00524E                      
00524E 0C                   GOL2_009	DB	012		;# OF SUB-SPRITES
00524F                      
00524F                      ;-----
00524F                      ;SUB-SPRITE DATA: PAL #, X OFFSET, Y OFFSET, TILE #
00524F                      
00524F 00 18 01             	DB	000,024,001
005252 00 00                	DW	0000
005254 00 28 01             	DB	000,040,001
005257 02 00                	DW	0002
005259 00 38 01             	DB	000,056,001
00525C 04 00                	DW	0004
00525E 00 10 11             	DB	000,016,017
005261 06 00                	DW	0006
005263 00 20 11             	DB	000,032,017
005266 08 00                	DW	0008
005268 00 30 11             	DB	000,048,017
00526B 0A 00                	DW	0010
00526D 00 0F 21             	DB	000,015,033
005270 0C 00                	DW	0012
005272 00 1F 21             	DB	000,031,033
005275 0E 00                	DW	0014
005277 00 2F 21             	DB	000,047,033
00527A 20 00                	DW	0032
00527C 00 13 31             	DB	000,019,049
00527F 22 00                	DW	0034
005281 00 23 31             	DB	000,035,049
005284 24 00                	DW	0036
005286 00 33 31             	DB	000,051,049
005289 26 00                	DW	0038
00528B                      
00528B                      ;-----
00528B                      ;DMA DATA AREA
00528B                      
00528B 02                   	DB	002		;# OF DMA's
00528C                      
00528C 80 31                	DW	12672		;SOURCE OFFSET
00528E 00 00                	DW	00000		;DEST OFFSET
005290 00 05                	DW	01280		;DMA LENGTH
005292                      
005292 80 36                	DW	13952		;SOURCE OFFSET
005294 00 03                	DW	00768		;DEST OFFSET
005296 00 01                	DW	00256		;DMA LENGTH
005298                      
005298                      ;-----
005298                      ;COLLISION DATA AREA
005298                      
005298 00                   	DB	000		;# OF COLLISION BOXES
005299                      
005299                      ;===================
005299                      ;GOL2 FRAME 010
005299                      
005299 0C                   GOL2_010	DB	012		;# OF SUB-SPRITES
00529A                      
00529A                      ;-----
00529A                      ;SUB-SPRITE DATA: PAL #, X OFFSET, Y OFFSET, TILE #
00529A                      
00529A 00 16 02             	DB	000,022,002
00529D 00 00                	DW	0000
00529F 00 26 02             	DB	000,038,002
0052A2 02 00                	DW	0002
0052A4 00 36 02             	DB	000,054,002
0052A7 04 00                	DW	0004
0052A9 00 0E 12             	DB	000,014,018
0052AC 06 00                	DW	0006
0052AE 00 1E 12             	DB	000,030,018
0052B1 08 00                	DW	0008
0052B3 00 2E 12             	DB	000,046,018
0052B6 0A 00                	DW	0010
0052B8 00 0C 22             	DB	000,012,034
0052BB 0C 00                	DW	0012
0052BD 00 1C 22             	DB	000,028,034
0052C0 0E 00                	DW	0014
0052C2 00 2C 22             	DB	000,044,034
0052C5 20 00                	DW	0032
0052C7 00 0E 32             	DB	000,014,050
0052CA 22 00                	DW	0034
0052CC 00 1E 32             	DB	000,030,050
0052CF 24 00                	DW	0036
0052D1 00 2E 32             	DB	000,046,050
0052D4 26 00                	DW	0038
0052D6                      
0052D6                      ;-----
0052D6                      ;DMA DATA AREA
0052D6                      
0052D6 02                   	DB	002		;# OF DMA's
0052D7                      
0052D7 80 37                	DW	14208		;SOURCE OFFSET
0052D9 00 00                	DW	00000		;DEST OFFSET
0052DB 00 05                	DW	01280		;DMA LENGTH
0052DD                      
0052DD 80 3C                	DW	15488		;SOURCE OFFSET
0052DF 00 03                	DW	00768		;DEST OFFSET
0052E1 00 01                	DW	00256		;DMA LENGTH
0052E3                      
0052E3                      ;-----
0052E3                      ;COLLISION DATA AREA
0052E3                      
0052E3 00                   	DB	000		;# OF COLLISION BOXES
0052E4                      
0052E4                      ;===================
0052E4                      ;GOL2 FRAME 011
0052E4                      
0052E4 0C                   GOL2_011	DB	012		;# OF SUB-SPRITES
0052E5                      
0052E5                      ;-----
0052E5                      ;SUB-SPRITE DATA: PAL #, X OFFSET, Y OFFSET, TILE #
0052E5                      
0052E5 00 13 02             	DB	000,019,002
0052E8 00 00                	DW	0000
0052EA 00 23 02             	DB	000,035,002
0052ED 02 00                	DW	0002
0052EF 00 33 02             	DB	000,051,002
0052F2 04 00                	DW	0004
0052F4 00 0A 12             	DB	000,010,018
0052F7 06 00                	DW	0006
0052F9 00 1A 12             	DB	000,026,018
0052FC 08 00                	DW	0008
0052FE 00 2A 12             	DB	000,042,018
005301 0A 00                	DW	0010
005303 00 06 22             	DB	000,006,034
005306 0C 00                	DW	0012
005308 00 16 22             	DB	000,022,034
00530B 0E 00                	DW	0014
00530D 00 26 22             	DB	000,038,034
005310 20 00                	DW	0032
005312 00 36 22             	DB	000,054,034
005315 22 00                	DW	0034
005317 00 24 32             	DB	000,036,050
00531A 24 00                	DW	0036
00531C 00 34 32             	DB	000,052,050
00531F 26 00                	DW	0038
005321                      
005321                      ;-----
005321                      ;DMA DATA AREA
005321                      
005321 02                   	DB	002		;# OF DMA's
005322                      
005322 80 3D                	DW	15744		;SOURCE OFFSET
005324 00 00                	DW	00000		;DEST OFFSET
005326 00 05                	DW	01280		;DMA LENGTH
005328                      
005328 80 42                	DW	17024		;SOURCE OFFSET
00532A 00 03                	DW	00768		;DEST OFFSET
00532C 00 01                	DW	00256		;DMA LENGTH
00532E                      
00532E                      ;-----
00532E                      ;COLLISION DATA AREA
00532E                      
00532E 00                   	DB	000		;# OF COLLISION BOXES
00532F                      
00532F                      
00532F                      
00532F                      ;-----
00532F                      ;SPRITE STATISTICS
00532F                      
00532F 10                   SPRITE_SIZE	DB	016	;SPRITE SIZE
005330                      
005330 0C                   MAX_SPRITE	DB	012	;MAX # OF SPRITES USED
005331                      
005331 3B                   MAX_WIDTH	DB	059	;MAX WIDTH ACROSS ALL FRAMES
005332                      
005332 3F                   MAX_HEIGTH	DB	063	;MAX HEIGTH ACROSS ALL FRAMES
005333                      
005333                      ;-----
005333                      ;ANIMATION COMMANDS
005333                      
005333 FF                   GOL2_ANIM	DB	DRAW
005334 00 00 00 00          	DL	GOL2_000
005338                      ;
005338 FF                   	DB	DRAW
005339 00 00 00 00          	DL	GOL2_001
00533D                      ;
00533D FF                   	DB	DRAW
00533E 00 00 00 00          	DL	GOL2_002
005342                      ;
005342 FF                   	DB	DRAW
005343 00 00 00 00          	DL	GOL2_003
005347                      ;
005347 FF                   	DB	DRAW
005348 00 00 00 00          	DL	GOL2_004
00534C                      ;
00534C FF                   	DB	DRAW
00534D 00 00 00 00          	DL	GOL2_005
005351                      ;
005351 FF                   	DB	DRAW
005352 00 00 00 00          	DL	GOL2_006
005356                      ;
005356 FF                   	DB	DRAW
005357 00 00 00 00          	DL	GOL2_007
00535B                      ;
00535B FF                   	DB	DRAW
00535C 00 00 00 00          	DL	GOL2_008
005360                      ;
005360 FF                   	DB	DRAW
005361 00 00 00 00          	DL	GOL2_009
005365                      ;
005365 FF                   	DB	DRAW
005366 00 00 00 00          	DL	GOL2_010
00536A                      ;
00536A FF                   	DB	DRAW
00536B 00 00 00 00          	DL	GOL2_011
00536F                      ;
00536F FE                   	DB	LOOP
005370 00 00 00 00          	DL	GOL2_ANIM
005374                      
005374                      ;	END	BEGIN
005374                      
005374                      
005374                      
005374                      
005374                      
005374                      ;------------------
005374                      
005374                      	SECTION	TITLE,?
000000                      
000000                      TTL_BLOCK	INCLUDE	..\TUME_ART\TITLE\GGTTL.BLK
000000                      ;*
000000                      ;* GGTTL.blk
000000                      ;*
000000                      ;* Block Table generated by tPGEN
000000                      ;*
000000                      ;* <177> : No.Tiles
000000                      ;*
000000 01 00 02 00 03 00 +  	db	$01,$00,$02,$00,$03,$00,$04,$00	;0
000008 05 00 06 00 07 00 +  	db	$05,$00,$06,$00,$07,$00,$08,$00	;1
000010 09 00 0A 00 0B 00 +  	db	$09,$00,$0a,$00,$0b,$00,$0c,$00	;2
000018 0D 00 0E 00 0F 00 +  	db	$0d,$00,$0e,$00,$0f,$00,$10,$00	;3
000020 11 00 12 00 13 00 +  	db	$11,$00,$12,$00,$13,$00,$14,$00	;4
000028 15 00 16 00 17 00 +  	db	$15,$00,$16,$00,$17,$00,$18,$00	;5
000030 19 00 1A 00 1B 00 +  	db	$19,$00,$1a,$00,$1b,$00,$1c,$00	;6
000038 1D 00 1E 00 1F 00 +  	db	$1d,$00,$1e,$00,$1f,$00,$20,$00	;7
000040 21 00 22 00 23 00 +  	db	$21,$00,$22,$00,$23,$00,$24,$00	;8
000048 25 00 26 00 27 00 +  	db	$25,$00,$26,$00,$27,$00,$28,$00	;9
000050 29 00 2A 00 2B 00 +  	db	$29,$00,$2a,$00,$2b,$00,$2c,$00	;10
000058 2D 00 2E 00 2F 00 +  	db	$2d,$00,$2e,$00,$2f,$00,$30,$00	;11
000060 31 00 32 00 33 00 +  	db	$31,$00,$32,$00,$33,$00,$34,$00	;12
000068 35 00 36 00 37 00 +  	db	$35,$00,$36,$00,$37,$00,$38,$00	;13
000070 39 00 3A 00 3B 00 +  	db	$39,$00,$3a,$00,$3b,$00,$3c,$00	;14
000078 3D 00 3E 00 3F 00 +  	db	$3d,$00,$3e,$00,$3f,$00,$40,$00	;15
000080 41 00 42 00 43 00 +  	db	$41,$00,$42,$00,$43,$00,$44,$00	;16
000088 45 00 46 00 47 00 +  	db	$45,$00,$46,$00,$47,$00,$48,$00	;17
000090 49 00 4A 00 4B 00 +  	db	$49,$00,$4a,$00,$4b,$00,$4c,$00	;18
000098 4D 00 4E 00 4F 00 +  	db	$4d,$00,$4e,$00,$4f,$00,$50,$00	;19
0000A0 51 00 52 00 53 00 +  	db	$51,$00,$52,$00,$53,$00,$54,$00	;20
0000A8 55 00 56 00 57 00 +  	db	$55,$00,$56,$00,$57,$00,$58,$00	;21
0000B0 59 00 5A 00 5B 00 +  	db	$59,$00,$5a,$00,$5b,$00,$5c,$00	;22
0000B8 5D 00 5E 00 5F 00 +  	db	$5d,$00,$5e,$00,$5f,$00,$60,$00	;23
0000C0 61 00 62 00 63 00 +  	db	$61,$00,$62,$00,$63,$00,$64,$00	;24
0000C8 65 00 66 00 67 00 +  	db	$65,$00,$66,$00,$67,$00,$68,$00	;25
0000D0 69 00 6A 00 6B 00 +  	db	$69,$00,$6a,$00,$6b,$00,$6c,$00	;26
0000D8 6D 00 6E 00 6F 00 +  	db	$6d,$00,$6e,$00,$6f,$00,$70,$00	;27
0000E0 71 00 72 00 73 00 +  	db	$71,$00,$72,$00,$73,$00,$74,$00	;28
0000E8 75 00 76 00 77 00 +  	db	$75,$00,$76,$00,$77,$00,$78,$00	;29
0000F0 79 00 7A 00 7B 00 +  	db	$79,$00,$7a,$00,$7b,$00,$7c,$00	;30
0000F8 7D 00 7E 00 7F 00 +  	db	$7d,$00,$7e,$00,$7f,$00,$80,$00	;31
000100 81 00 82 00 83 00 +  	db	$81,$00,$82,$00,$83,$00,$84,$00	;32
000108 85 00 86 00 87 00 +  	db	$85,$00,$86,$00,$87,$00,$88,$00	;33
000110 89 00 8A 00 8B 00 +  	db	$89,$00,$8a,$00,$8b,$00,$8c,$00	;34
000118 8D 00 8E 00 8F 00 +  	db	$8d,$00,$8e,$00,$8f,$00,$90,$00	;35
000120 91 00 92 00 93 00 +  	db	$91,$00,$92,$00,$93,$00,$94,$00	;36
000128 95 00 96 00 97 00 +  	db	$95,$00,$96,$00,$97,$00,$98,$00	;37
000130 99 00 9A 00 9B 00 +  	db	$99,$00,$9a,$00,$9b,$00,$9c,$00	;38
000138 9D 00 9E 00 9F 00 +  	db	$9d,$00,$9e,$00,$9f,$00,$a0,$00	;39
000140 A1 00 A2 00 A3 00 +  	db	$a1,$00,$a2,$00,$a3,$00,$a4,$00	;40
000148 A5 00 A6 00 A7 00 +  	db	$a5,$00,$a6,$00,$a7,$00,$a8,$00	;41
000150 A9 00 AA 00 AB 00 +  	db	$a9,$00,$aa,$00,$ab,$00,$ac,$00	;42
000158 AD 00 AE 00 AF 00 +  	db	$ad,$00,$ae,$00,$af,$00,$b0,$00	;43
000160 B1 00 B2 00 B3 00 +  	db	$b1,$00,$b2,$00,$b3,$00,$b4,$00	;44
000168 B5 00 B6 00 B7 00 +  	db	$b5,$00,$b6,$00,$b7,$00,$b8,$00	;45
000170 B9 00 BA 00 BB 00 +  	db	$b9,$00,$ba,$00,$bb,$00,$bc,$00	;46
000178 BD 00 BE 00 BF 00 +  	db	$bd,$00,$be,$00,$bf,$00,$c0,$00	;47
000180 C1 00 C2 00 C3 00 +  	db	$c1,$00,$c2,$00,$c3,$00,$c4,$00	;48
000188 C5 00 C6 00 C7 00 +  	db	$c5,$00,$c6,$00,$c7,$00,$c8,$00	;49
000190 C9 00 CA 00 CB 00 +  	db	$c9,$00,$ca,$00,$cb,$00,$cc,$00	;50
000198 CD 00 CE 00 CF 00 +  	db	$cd,$00,$ce,$00,$cf,$00,$d0,$00	;51
0001A0 D1 00 D2 00 D3 00 +  	db	$d1,$00,$d2,$00,$d3,$00,$d4,$00	;52
0001A8 D5 00 D6 00 D7 00 +  	db	$d5,$00,$d6,$00,$d7,$00,$d8,$00	;53
0001B0 D9 00 DA 00 DB 00 +  	db	$d9,$00,$da,$00,$db,$00,$dc,$00	;54
0001B8 DD 00 DE 00 DF 00 +  	db	$dd,$00,$de,$00,$df,$00,$e0,$00	;55
0001C0 E1 00 E2 00 E3 00 +  	db	$e1,$00,$e2,$00,$e3,$00,$e4,$00	;56
0001C8 E5 00 E6 00 E7 00 +  	db	$e5,$00,$e6,$00,$e7,$00,$e8,$00	;57
0001D0 E9 00 EA 00 EB 00 +  	db	$e9,$00,$ea,$00,$eb,$00,$ec,$00	;58
0001D8 ED 00 EE 00 EF 00 +  	db	$ed,$00,$ee,$00,$ef,$00,$f0,$00	;59
0001E0 F1 00 F2 00 F3 00 +  	db	$f1,$00,$f2,$00,$f3,$00,$f4,$00	;60
0001E8 F5 00 F6 00 F7 00 +  	db	$f5,$00,$f6,$00,$f7,$00,$f8,$00	;61
0001F0 F9 00 FA 00 FB 00 +  	db	$f9,$00,$fa,$00,$fb,$00,$fc,$00	;62
0001F8 FD 00 FE 00 FF 00 +  	db	$fd,$00,$fe,$00,$ff,$00,$00,$01	;63
000200 01 01 02 01 03 01 +  	db	$01,$01,$02,$01,$03,$01,$04,$01	;64
000208 05 01 06 01 07 01 +  	db	$05,$01,$06,$01,$07,$01,$08,$01	;65
000210 09 01 0A 01 0B 01 +  	db	$09,$01,$0a,$01,$0b,$01,$0c,$01	;66
000218 0D 01 0E 01 0F 01 +  	db	$0d,$01,$0e,$01,$0f,$01,$10,$01	;67
000220 11 01 12 01 13 01 +  	db	$11,$01,$12,$01,$13,$01,$14,$01	;68
000228 15 01 16 01 17 01 +  	db	$15,$01,$16,$01,$17,$01,$18,$01	;69
000230 19 01 1A 01 1B 01 +  	db	$19,$01,$1a,$01,$1b,$01,$1c,$01	;70
000238 1D 01 1E 01 1F 01 +  	db	$1d,$01,$1e,$01,$1f,$01,$20,$01	;71
000240 21 01 22 01 23 01 +  	db	$21,$01,$22,$01,$23,$01,$24,$01	;72
000248 25 01 26 01 27 01 +  	db	$25,$01,$26,$01,$27,$01,$28,$01	;73
000250 29 01 2A 01 2B 01 +  	db	$29,$01,$2a,$01,$2b,$01,$2c,$01	;74
000258 2D 01 2E 01 2F 01 +  	db	$2d,$01,$2e,$01,$2f,$01,$30,$01	;75
000260 31 01 32 01 33 01 +  	db	$31,$01,$32,$01,$33,$01,$34,$01	;76
000268 35 01 36 01 37 01 +  	db	$35,$01,$36,$01,$37,$01,$38,$01	;77
000270 39 01 3A 01 3B 01 +  	db	$39,$01,$3a,$01,$3b,$01,$3c,$01	;78
000278 3D 01 3E 01 3F 01 +  	db	$3d,$01,$3e,$01,$3f,$01,$40,$01	;79
000280 41 01 42 01 43 01 +  	db	$41,$01,$42,$01,$43,$01,$44,$01	;80
000288 45 01 46 01 47 01 +  	db	$45,$01,$46,$01,$47,$01,$48,$01	;81
000290 49 01 4A 01 4B 01 +  	db	$49,$01,$4a,$01,$4b,$01,$4c,$01	;82
000298 4D 01 4E 01 4F 01 +  	db	$4d,$01,$4e,$01,$4f,$01,$50,$01	;83
0002A0 51 01 52 01 53 01 +  	db	$51,$01,$52,$01,$53,$01,$54,$01	;84
0002A8 55 01 56 01 57 01 +  	db	$55,$01,$56,$01,$57,$01,$58,$01	;85
0002B0 59 01 5A 01 5B 01 +  	db	$59,$01,$5a,$01,$5b,$01,$5c,$01	;86
0002B8 5D 01 5E 01 5F 01 +  	db	$5d,$01,$5e,$01,$5f,$01,$60,$01	;87
0002C0 61 01 62 01 63 01 +  	db	$61,$01,$62,$01,$63,$01,$64,$01	;88
0002C8 65 01 66 01 67 01 +  	db	$65,$01,$66,$01,$67,$01,$68,$01	;89
0002D0 69 01 6A 01 6B 01 +  	db	$69,$01,$6a,$01,$6b,$01,$6c,$01	;90
0002D8 6D 01 6E 01 6F 01 +  	db	$6d,$01,$6e,$01,$6f,$01,$70,$01	;91
0002E0 71 01 72 01 73 01 +  	db	$71,$01,$72,$01,$73,$01,$74,$01	;92
0002E8 75 01 76 01 77 01 +  	db	$75,$01,$76,$01,$77,$01,$78,$01	;93
0002F0 79 01 7A 01 7B 01 +  	db	$79,$01,$7a,$01,$7b,$01,$7c,$01	;94
0002F8 7D 01 7E 01 7F 01 +  	db	$7d,$01,$7e,$01,$7f,$01,$80,$01	;95
000300 81 01 82 01 83 01 +  	db	$81,$01,$82,$01,$83,$01,$84,$01	;96
000308 85 01 86 01 87 01 +  	db	$85,$01,$86,$01,$87,$01,$88,$01	;97
000310 89 01 8A 01 8B 01 +  	db	$89,$01,$8a,$01,$8b,$01,$8c,$01	;98
000318 8D 01 8E 01 8F 01 +  	db	$8d,$01,$8e,$01,$8f,$01,$90,$01	;99
000320 91 01 92 01 93 01 +  	db	$91,$01,$92,$01,$93,$01,$94,$01	;100
000328 95 01 96 01 97 01 +  	db	$95,$01,$96,$01,$97,$01,$98,$01	;101
000330 99 01 9A 01 9B 01 +  	db	$99,$01,$9a,$01,$9b,$01,$9c,$01	;102
000338 9D 01 9E 01 9F 01 +  	db	$9d,$01,$9e,$01,$9f,$01,$a0,$01	;103
000340 A1 01 A2 01 A3 01 +  	db	$a1,$01,$a2,$01,$a3,$01,$a4,$01	;104
000348 A5 01 A6 01 A7 01 +  	db	$a5,$01,$a6,$01,$a7,$01,$a8,$01	;105
000350 A9 01 AA 01 AB 01 +  	db	$a9,$01,$aa,$01,$ab,$01,$ac,$01	;106
000358 AD 01 AE 01 AF 01 +  	db	$ad,$01,$ae,$01,$af,$01,$b0,$01	;107
000360 B1 01 B2 01 B3 01 +  	db	$b1,$01,$b2,$01,$b3,$01,$b4,$01	;108
000368 B5 01 B6 01 B7 01 +  	db	$b5,$01,$b6,$01,$b7,$01,$b8,$01	;109
000370 B9 01 BA 01 BB 01 +  	db	$b9,$01,$ba,$01,$bb,$01,$bc,$01	;110
000378 BD 01 BE 01 BF 01 +  	db	$bd,$01,$be,$01,$bf,$01,$c0,$01	;111
000380 C1 01 C2 01 C3 01 +  	db	$c1,$01,$c2,$01,$c3,$01,$c4,$01	;112
000388 C5 01 C6 01 C7 01 +  	db	$c5,$01,$c6,$01,$c7,$01,$c8,$01	;113
000390 C9 01 CA 01 CB 01 +  	db	$c9,$01,$ca,$01,$cb,$01,$cc,$01	;114
000398 CD 01 CE 01 CF 01 +  	db	$cd,$01,$ce,$01,$cf,$01,$d0,$01	;115
0003A0 D1 01 D2 01 D3 01 +  	db	$d1,$01,$d2,$01,$d3,$01,$d4,$01	;116
0003A8 D5 01 D6 01 D7 01 +  	db	$d5,$01,$d6,$01,$d7,$01,$d8,$01	;117
0003B0 D9 01 DA 01 DB 01 +  	db	$d9,$01,$da,$01,$db,$01,$dc,$01	;118
0003B8 DD 01 DE 01 DF 01 +  	db	$dd,$01,$de,$01,$df,$01,$e0,$01	;119
0003C0 E1 01 E2 01 E3 01 +  	db	$e1,$01,$e2,$01,$e3,$01,$e4,$01	;120
0003C8 E5 01 E6 01 E7 01 +  	db	$e5,$01,$e6,$01,$e7,$01,$e8,$01	;121
0003D0 E9 01 EA 01 EB 01 +  	db	$e9,$01,$ea,$01,$eb,$01,$ec,$01	;122
0003D8 ED 01 EE 01 EF 01 +  	db	$ed,$01,$ee,$01,$ef,$01,$f0,$01	;123
0003E0 F1 01 F2 01 F3 01 +  	db	$f1,$01,$f2,$01,$f3,$01,$f4,$01	;124
0003E8 F5 01 F6 01 F7 01 +  	db	$f5,$01,$f6,$01,$f7,$01,$f8,$01	;125
0003F0 F9 01 FA 01 FB 01 +  	db	$f9,$01,$fa,$01,$fb,$01,$fc,$01	;126
0003F8 FD 01 FE 01 FF 01 +  	db	$fd,$01,$fe,$01,$ff,$01,$00,$02	;127
000400 01 02 02 02 03 02 +  	db	$01,$02,$02,$02,$03,$02,$04,$02	;128
000408 05 02 06 02 07 02 +  	db	$05,$02,$06,$02,$07,$02,$08,$02	;129
000410 09 02 0A 02 0B 02 +  	db	$09,$02,$0a,$02,$0b,$02,$0c,$02	;130
000418 0D 02 0E 02 0F 02 +  	db	$0d,$02,$0e,$02,$0f,$02,$10,$02	;131
000420 11 02 12 02 13 02 +  	db	$11,$02,$12,$02,$13,$02,$14,$02	;132
000428 15 02 16 02 17 02 +  	db	$15,$02,$16,$02,$17,$02,$18,$02	;133
000430 19 02 1A 02 1B 02 +  	db	$19,$02,$1a,$02,$1b,$02,$1c,$02	;134
000438 1D 02 1E 02 1F 02 +  	db	$1d,$02,$1e,$02,$1f,$02,$20,$02	;135
000440 21 02 22 02 23 02 +  	db	$21,$02,$22,$02,$23,$02,$24,$02	;136
000448 25 02 26 02 27 02 +  	db	$25,$02,$26,$02,$27,$02,$28,$02	;137
000450 29 02 2A 02 2B 02 +  	db	$29,$02,$2a,$02,$2b,$02,$2c,$02	;138
000458 2D 02 2E 02 2F 02 +  	db	$2d,$02,$2e,$02,$2f,$02,$30,$02	;139
000460 31 02 32 02 33 02 +  	db	$31,$02,$32,$02,$33,$02,$34,$02	;140
000468 35 02 36 02 37 02 +  	db	$35,$02,$36,$02,$37,$02,$38,$02	;141
000470 39 02 3A 02 3B 02 +  	db	$39,$02,$3a,$02,$3b,$02,$3c,$02	;142
000478 3D 02 3E 02 3F 02 +  	db	$3d,$02,$3e,$02,$3f,$02,$40,$02	;143
000480 41 02 42 02 43 02 +  	db	$41,$02,$42,$02,$43,$02,$44,$02	;144
000488 45 02 46 02 47 02 +  	db	$45,$02,$46,$02,$47,$02,$48,$02	;145
000490 49 02 4A 02 4B 02 +  	db	$49,$02,$4a,$02,$4b,$02,$4c,$02	;146
000498 4D 02 4E 02 4F 02 +  	db	$4d,$02,$4e,$02,$4f,$02,$50,$02	;147
0004A0 51 02 52 02 53 02 +  	db	$51,$02,$52,$02,$53,$02,$54,$02	;148
0004A8 55 02 56 02 57 02 +  	db	$55,$02,$56,$02,$57,$02,$58,$02	;149
0004B0 59 02 5A 02 5B 02 +  	db	$59,$02,$5a,$02,$5b,$02,$5c,$02	;150
0004B8 5D 02 5E 02 5F 02 +  	db	$5d,$02,$5e,$02,$5f,$02,$60,$02	;151
0004C0 61 02 62 02 63 02 +  	db	$61,$02,$62,$02,$63,$02,$64,$02	;152
0004C8 65 02 66 02 67 02 +  	db	$65,$02,$66,$02,$67,$02,$68,$02	;153
0004D0 69 02 6A 02 6B 02 +  	db	$69,$02,$6a,$02,$6b,$02,$6c,$02	;154
0004D8 6D 02 6E 02 6F 02 +  	db	$6d,$02,$6e,$02,$6f,$02,$70,$02	;155
0004E0 71 02 72 02 73 02 +  	db	$71,$02,$72,$02,$73,$02,$74,$02	;156
0004E8 75 02 76 02 77 02 +  	db	$75,$02,$76,$02,$77,$02,$78,$02	;157
0004F0 79 02 7A 02 7B 02 +  	db	$79,$02,$7a,$02,$7b,$02,$7c,$02	;158
0004F8 7D 02 7E 02 7F 02 +  	db	$7d,$02,$7e,$02,$7f,$02,$80,$02	;159
000500 81 02 82 02 83 02 +  	db	$81,$02,$82,$02,$83,$02,$84,$02	;160
000508 85 02 86 02 87 02 +  	db	$85,$02,$86,$02,$87,$02,$88,$02	;161
000510 89 02 8A 02 8B 02 +  	db	$89,$02,$8a,$02,$8b,$02,$8c,$02	;162
000518 8D 02 8E 02 8F 02 +  	db	$8d,$02,$8e,$02,$8f,$02,$90,$02	;163
000520 91 02 92 02 93 02 +  	db	$91,$02,$92,$02,$93,$02,$94,$02	;164
000528 95 02 96 02 97 02 +  	db	$95,$02,$96,$02,$97,$02,$98,$02	;165
000530 99 02 9A 02 9B 02 +  	db	$99,$02,$9a,$02,$9b,$02,$9c,$02	;166
000538 9D 02 9E 02 9F 02 +  	db	$9d,$02,$9e,$02,$9f,$02,$a0,$02	;167
000540 A1 02 A2 02 A3 02 +  	db	$a1,$02,$a2,$02,$a3,$02,$a4,$02	;168
000548 A5 02 A6 02 A7 02 +  	db	$a5,$02,$a6,$02,$a7,$02,$a8,$02	;169
000550 A9 02 AA 02 AB 02 +  	db	$a9,$02,$aa,$02,$ab,$02,$ac,$02	;170
000558 AD 02 AE 02 AF 02 +  	db	$ad,$02,$ae,$02,$af,$02,$b0,$02	;171
000560 B1 02 B2 02 B3 02 +  	db	$b1,$02,$b2,$02,$b3,$02,$b4,$02	;172
000568 B5 02 B6 02 B7 02 +  	db	$b5,$02,$b6,$02,$b7,$02,$b8,$02	;173
000570 B9 02 BA 02 BB 02 +  	db	$b9,$02,$ba,$02,$bb,$02,$bc,$02	;174
000578 BD 02 BE 02 BF 02 +  	db	$bd,$02,$be,$02,$bf,$02,$c0,$02	;175
000580 00 00 00 00 00 00 +  	db	$00,$00,$00,$00,$00,$00,$00,$00	;176
000580 00 00 00 00 00 00 +  	db	$00,$00,$00,$00,$00,$00,$00,$00	;176
000588                      TTL_CHAR	INCBIN	..\TUME_ART\TITLE\GGTTL.CHR
005DC8                      TTL_PAL	INCLUDE	..\TUME_ART\TITLE\GGTITLE.PAL
005DC8                      ;*
005DC8                      ;* ggtitle.pal
005DC8                      ;*
005DC8                      ;* Palette generated by tPGEN
005DC8                      ;*
005DC8 00 00 1F 00 E0 03 +  	HEX	00001f00e003ff03007c1f7ce07fa51cb1312e32543a2a51b2612e569d6fff7f
005DE8 00 00 00 00 00 00 +  	HEX	0000000000000000000000000000000000000000000000000000000000000000
005E08 00 00 00 00 00 00 +  	HEX	0000000000000000000000000000000000000000000000000000000000000000
005E28 00 00 00 00 00 00 +  	HEX	0000000000000000000000000000000000000000000000000000000000000000
005E48 00 00 00 00 00 00 +  	HEX	0000000000000000000000000000000000000000000000000000000000000000
005E68 00 00 00 00 00 00 +  	HEX	0000000000000000000000000000000000000000000000000000000000000000
005E88 00 00 00 00 00 00 +  	HEX	0000000000000000000000000000000000000000000000000000000000000000
005EA8 00 00 00 00 00 00 +  	HEX	0000000000000000000000000000000000000000000000000000000000000000
005EA8 00 00 00 00 00 00 +  	HEX	0000000000000000000000000000000000000000000000000000000000000000
005EC8                      TTL_MAP	INCBIN	..\TUME_ART\TITLE\GGTITLE.MAP
0060C8                      ;------------------
0060C8                      
0060C8                      	SECTION	LVL1,?
000000                      
000000                      LVL1_BLOCK	INCLUDE	..\TUME_ART\SUBWAY\BRKSBWY0.BLK
000000                      ;*
000000                      ;* BRKSBWY0.blk
000000                      ;*
000000                      ;* Block Table generated by tPGEN
000000                      ;*
000000                      ;* < 47> : No.Tiles
000000                      ;*
000000 01 00 02 00 03 00 +  	db	$01,$00,$02,$00,$03,$00,$04,$00	;0
000008 05 00 01 00 06 00 +  	db	$05,$00,$01,$00,$06,$00,$07,$00	;1
000010 02 00 05 00 04 00 +  	db	$02,$00,$05,$00,$04,$00,$08,$00	;2
000018 01 00 02 00 CA 00 +  	db	$01,$00,$02,$00,$ca,$00,$cb,$00	;3
000020 CC 00 CD 00 CE 00 +  	db	$cc,$00,$cd,$00,$ce,$00,$cf,$00	;4
000028 D0 00 D1 00 D2 00 +  	db	$d0,$00,$d1,$00,$d2,$00,$d3,$00	;5
000030 D4 00 D5 00 D6 00 +  	db	$d4,$00,$d5,$00,$d6,$00,$d7,$00	;6
000038 D8 00 D9 00 DA 00 +  	db	$d8,$00,$d9,$00,$da,$00,$db,$00	;7
000040 3B 00 3C 00 3D 00 +  	db	$3b,$00,$3c,$00,$3d,$00,$3e,$00	;8
000048 3F 00 40 00 41 00 +  	db	$3f,$00,$40,$00,$41,$00,$42,$00	;9
000050 43 00 44 00 45 00 +  	db	$43,$00,$44,$00,$45,$00,$46,$00	;10
000058 F2 00 F3 00 3D 00 +  	db	$f2,$00,$f3,$00,$3d,$00,$f4,$00	;11
000060 F5 00 F6 00 F7 00 +  	db	$f5,$00,$f6,$00,$f7,$00,$f8,$00	;12
000068 F9 00 FA 00 FB 00 +  	db	$f9,$00,$fa,$00,$fb,$00,$fc,$00	;13
000070 FD 00 FE 00 FF 00 +  	db	$fd,$00,$fe,$00,$ff,$00,$00,$01	;14
000078 01 01 02 01 03 01 +  	db	$01,$01,$02,$01,$03,$01,$04,$01	;15
000080 77 00 78 00 79 00 +  	db	$77,$00,$78,$00,$79,$00,$7a,$00	;16
000088 7B 00 7C 00 7D 00 +  	db	$7b,$00,$7c,$00,$7d,$00,$7e,$00	;17
000090 7F 00 80 00 81 00 +  	db	$7f,$00,$80,$00,$81,$00,$82,$00	;18
000098 77 00 09 01 79 00 +  	db	$77,$00,$09,$01,$79,$00,$0a,$01	;19
0000A0 0B 01 0C 01 0D 01 +  	db	$0b,$01,$0c,$01,$0d,$01,$0e,$01	;20
0000A8 0F 01 10 01 11 01 +  	db	$0f,$01,$10,$01,$11,$01,$12,$01	;21
0000B0 13 01 14 01 15 01 +  	db	$13,$01,$14,$01,$15,$01,$16,$01	;22
0000B8 17 01 7C 00 18 01 +  	db	$17,$01,$7c,$00,$18,$01,$19,$01	;23
0000C0 9C 00 9D 00 9E 00 +  	db	$9c,$00,$9d,$00,$9e,$00,$9f,$00	;24
0000C8 A0 00 A1 00 A2 00 +  	db	$a0,$00,$a1,$00,$a2,$00,$a3,$00	;25
0000D0 A4 00 A5 00 A6 00 +  	db	$a4,$00,$a5,$00,$a6,$00,$a7,$00	;26
0000D8 4F 00 50 00 51 00 +  	db	$4f,$00,$50,$00,$51,$00,$52,$00	;27
0000E0 4B 00 4C 00 4D 00 +  	db	$4b,$00,$4c,$00,$4d,$00,$4e,$00	;28
0000E8 47 00 48 00 49 00 +  	db	$47,$00,$48,$00,$49,$00,$4a,$00	;29
0000F0 BE 00 BF 00 C0 00 +  	db	$be,$00,$bf,$00,$c0,$00,$c1,$00	;30
0000F8 C2 00 C3 00 C4 00 +  	db	$c2,$00,$c3,$00,$c4,$00,$c5,$00	;31
000100 C6 00 C7 00 C8 00 +  	db	$c6,$00,$c7,$00,$c8,$00,$c9,$00	;32
000108 8B 00 8C 00 8D 00 +  	db	$8b,$00,$8c,$00,$8d,$00,$8e,$00	;33
000110 87 00 88 00 89 00 +  	db	$87,$00,$88,$00,$89,$00,$8a,$00	;34
000118 83 00 84 00 85 00 +  	db	$83,$00,$84,$00,$85,$00,$86,$00	;35
000120 E6 00 E7 00 E8 00 +  	db	$e6,$00,$e7,$00,$e8,$00,$e9,$00	;36
000128 EA 00 EB 00 EC 00 +  	db	$ea,$00,$eb,$00,$ec,$00,$ed,$00	;37
000130 EE 00 EF 00 F0 00 +  	db	$ee,$00,$ef,$00,$f0,$00,$f1,$00	;38
000138 B0 00 B1 00 B2 00 +  	db	$b0,$00,$b1,$00,$b2,$00,$b3,$00	;39
000140 AC 00 AD 00 AE 00 +  	db	$ac,$00,$ad,$00,$ae,$00,$af,$00	;40
000148 A8 00 A9 00 AA 00 +  	db	$a8,$00,$a9,$00,$aa,$00,$ab,$00	;41
000150 B4 00 B4 00 B4 00 +  	db	$b4,$00,$b4,$00,$b4,$00,$b4,$00	;42
000158 8F 00 8F 00 90 00 +  	db	$8f,$00,$8f,$00,$90,$00,$90,$00	;43
000160 91 00 8F 00 90 00 +  	db	$91,$00,$8f,$00,$90,$00,$90,$00	;44
000168 90 00 90 00 90 00 +  	db	$90,$00,$90,$00,$90,$00,$90,$00	;45
000170 00 00 00 00 00 00 +  	db	$00,$00,$00,$00,$00,$00,$00,$00	;46
000170 00 00 00 00 00 00 +  	db	$00,$00,$00,$00,$00,$00,$00,$00	;46
000178                      LVL1_CHAR	INCBIN	..\TUME_ART\SUBWAY\BRKSBWY0.CHR
0024B8                      LVL1_PAL	INCLUDE	..\TUME_ART\SUBWAY\BRKSBWY0.PAL
0024B8                      ;*
0024B8                      ;* brksbwy0.pal
0024B8                      ;*
0024B8                      ;* Palette generated by tPGEN
0024B8                      ;*
0024B8 C2 00 00 00 1F 00 +  	HEX	c20000001f001f001f006128a234ec451f00104a8b3d0735c428821c40142008
0024D8 BD 77 E0 03 E0 03 +  	HEX	bd77e003e003e003e003e107cf3d6a31e61c611422041015cd108b0c69084600
0024F8 44 16 00 00 40 2D +  	HEX	44160000402d0d007410007c74250e3eab3d052d621c0010ae314c21c9104708
002518 7F 6F FF 5E 7F 4E +  	HEX	7f6fff5e7f4eff3d7f2d1f219f101f00bf2e7f223f12ff01bc01990156013301
002538 FF 6F FF 5F FF 4F +  	HEX	ff6fff5fff4fff3fff2fdf23df13df037c031903b60273021002ae014b010801
002558 FA 2F F8 23 F6 13 +  	HEX	fa2ff823f613f40392033003ce026c02fb6ff75ff34ff03fec2fe823e413e003
002578 E0 03 A0 03 80 03 +  	HEX	e003a003800340032003e002c002800260022002e001c0018001600120010001
002598 FB 7F F7 7F F3 7F +  	HEX	fb7ff77ff37fef7feb7fe87fe47fe07f80732067c05a604e0042c039602d0021
002598 FB 7F F7 7F F3 7F +  	HEX	fb7ff77ff37fef7feb7fe87fe47fe07f80732067c05a604e0042c039602d0021
0025B8                      LVL1_MAP	INCBIN	..\TUME_ART\SUBWAY\BRKSBWY0.MAP
0029B8                      
0029B8                      LVL1_BLOCK2	INCLUDE	..\TUME_ART\SUBWAY\TRAINMDL.BLK
0029B8                      ;*
0029B8                      ;* TRAINMDL.blk
0029B8                      ;*
0029B8                      ;* Block Table generated by tPGEN
0029B8                      ;*
0029B8                      ;* < 41> : No.Tiles
0029B8                      ;*
0029B8 00 00 00 00 00 00 +  	db	$00,$00,$00,$00,$00,$00,$00,$00	;0
0029C0 96 00 97 00 98 00 +  	db	$96,$00,$97,$00,$98,$00,$99,$00	;1
0029C8 92 00 93 00 94 00 +  	db	$92,$00,$93,$00,$94,$00,$95,$00	;2
0029D0 38 00 39 00 3A 00 +  	db	$38,$00,$39,$00,$3a,$00,$3a,$00	;3
0029D8 38 00 38 00 3A 00 +  	db	$38,$00,$38,$00,$3a,$00,$3a,$00	;4
0029E0 2E 00 2E 40 2F 00 +  	db	$2e,$00,$2e,$40,$2f,$00,$2f,$40	;5
0029E8 B6 00 B7 00 B8 00 +  	db	$b6,$00,$b7,$00,$b8,$00,$b9,$00	;6
0029F0 74 00 75 00 76 00 +  	db	$74,$00,$75,$00,$76,$00,$b5,$00	;7
0029F8 74 00 75 00 76 00 +  	db	$74,$00,$75,$00,$76,$00,$76,$00	;8
002A00 6F 00 6F 40 70 00 +  	db	$6f,$00,$6f,$40,$70,$00,$70,$40	;9
002A08 E0 00 E1 00 E2 00 +  	db	$e0,$00,$e1,$00,$e2,$00,$e3,$00	;10
002A10 DC 00 DD 00 DE 00 +  	db	$dc,$00,$dd,$00,$de,$00,$df,$00	;11
002A18 34 00 35 00 36 00 +  	db	$34,$00,$35,$00,$36,$00,$37,$00	;12
002A20 30 00 31 00 32 00 +  	db	$30,$00,$31,$00,$32,$00,$33,$00	;13
002A28 9A 00 9A 40 9B 00 +  	db	$9a,$00,$9a,$40,$9b,$00,$9b,$40	;14
002A30 06 01 07 01 73 00 +  	db	$06,$01,$07,$01,$73,$00,$08,$01	;15
002A38 05 01 06 01 73 00 +  	db	$05,$01,$06,$01,$73,$00,$73,$00	;16
002A40 71 00 72 00 73 00 +  	db	$71,$00,$72,$00,$73,$00,$73,$00	;17
002A48 BA 00 BB 00 BC 00 +  	db	$ba,$00,$bb,$00,$bc,$00,$bd,$00	;18
002A50 73 00 08 01 73 00 +  	db	$73,$00,$08,$01,$73,$00,$08,$01	;19
002A58 73 00 73 00 73 00 +  	db	$73,$00,$73,$00,$73,$00,$73,$00	;20
002A60 E4 00 E4 40 E5 00 +  	db	$e4,$00,$e4,$40,$e5,$00,$e5,$40	;21
002A68 17 00 18 00 19 00 +  	db	$17,$00,$18,$00,$19,$00,$1a,$00	;22
002A70 1B 00 1C 00 1D 00 +  	db	$1b,$00,$1c,$00,$1d,$00,$1e,$00	;23
002A78 23 00 24 00 25 00 +  	db	$23,$00,$24,$00,$25,$00,$26,$00	;24
002A80 0F 00 27 00 28 00 +  	db	$0f,$00,$27,$00,$28,$00,$29,$00	;25
002A88 2A 00 2B 00 2C 00 +  	db	$2a,$00,$2b,$00,$2c,$00,$2d,$00	;26
002A90 13 00 14 00 15 00 +  	db	$13,$00,$14,$00,$15,$00,$16,$00	;27
002A98 0F 00 0F 00 12 00 +  	db	$0f,$00,$0f,$00,$12,$00,$12,$00	;28
002AA0 0E 00 0F 00 10 00 +  	db	$0e,$00,$0f,$00,$10,$00,$11,$00	;29
002AA8 09 00 0C 00 09 00 +  	db	$09,$00,$0c,$00,$09,$00,$0d,$00	;30
002AB0 09 00 0A 00 09 00 +  	db	$09,$00,$0a,$00,$09,$00,$0b,$00	;31
002AB8 1F 00 20 00 21 00 +  	db	$1f,$00,$20,$00,$21,$00,$22,$00	;32
002AC0 5F 00 60 00 61 00 +  	db	$5f,$00,$60,$00,$61,$00,$62,$00	;33
002AC8 6B 00 6C 00 6D 00 +  	db	$6b,$00,$6c,$00,$6d,$00,$6e,$00	;34
002AD0 5B 00 5C 00 5D 00 +  	db	$5b,$00,$5c,$00,$5d,$00,$5e,$00	;35
002AD8 57 00 58 00 59 00 +  	db	$57,$00,$58,$00,$59,$00,$5a,$00	;36
002AE0 63 00 64 00 65 00 +  	db	$63,$00,$64,$00,$65,$00,$66,$00	;37
002AE8 67 00 68 00 69 00 +  	db	$67,$00,$68,$00,$69,$00,$6a,$00	;38
002AF0 54 00 55 00 00 00 +  	db	$54,$00,$55,$00,$00,$00,$56,$00	;39
002AF8 53 00 53 00 00 00 +  	db	$53,$00,$53,$00,$00,$00,$00,$00	;40
002AF8 53 00 53 00 00 00 +  	db	$53,$00,$53,$00,$00,$00,$00,$00	;40
002B00                      LVL1_MAP2	INCBIN	..\TUME_ART\SUBWAY\TRAINMID.MAP
002F00                      
002F00                      ;------------------
002F00                      
002F00                      	SECTION	LVL2,?
000000                      
000000                      LVL2_BLOCK	INCLUDE	..\TUME_ART\TEST\TEST.BLK
000000                      ;*
000000                      ;* TEST.blk
000000                      ;*
000000                      ;* Block Table generated by tPGEN
000000                      ;*
000000                      ;* < 32> : No.Tiles
000000                      ;*
000000 58 00 59 00 59 C0 +  	db	$58,$00,$59,$00,$59,$c0,$59,$80	;0
000008 5A 00 5B 00 5B C0 +  	db	$5a,$00,$5b,$00,$5b,$c0,$5b,$80	;1
000010 5E 00 5F 00 5F C0 +  	db	$5e,$00,$5f,$00,$5f,$c0,$5f,$80	;2
000018 5C 00 5D 00 5D C0 +  	db	$5c,$00,$5d,$00,$5d,$c0,$5d,$80	;3
000020 00 00 01 00 02 00 +  	db	$00,$00,$01,$00,$02,$00,$03,$00	;4
000028 00 00 00 00 00 00 +  	db	$00,$00,$00,$00,$00,$00,$00,$00	;5
000030 63 00 63 40 63 80 +  	db	$63,$00,$63,$40,$63,$80,$63,$c0	;6
000038 04 00 05 00 06 00 +  	db	$04,$00,$05,$00,$06,$00,$07,$00	;7
000040 08 00 09 00 0A 00 +  	db	$08,$00,$09,$00,$0a,$00,$0b,$00	;8
000048 0C 00 0D 00 0E 00 +  	db	$0c,$00,$0d,$00,$0e,$00,$0f,$00	;9
000050 10 00 10 40 11 00 +  	db	$10,$00,$10,$40,$11,$00,$12,$00	;10
000058 13 00 14 00 15 00 +  	db	$13,$00,$14,$00,$15,$00,$15,$00	;11
000060 16 00 17 00 18 00 +  	db	$16,$00,$17,$00,$18,$00,$19,$00	;12
000068 16 00 1A 00 1B 00 +  	db	$16,$00,$1a,$00,$1b,$00,$1c,$00	;13
000070 1D 00 1E 00 1F 00 +  	db	$1d,$00,$1e,$00,$1f,$00,$20,$00	;14
000078 21 00 22 00 23 00 +  	db	$21,$00,$22,$00,$23,$00,$24,$00	;15
000080 25 00 26 00 27 00 +  	db	$25,$00,$26,$00,$27,$00,$28,$00	;16
000088 29 00 2A 00 2B 00 +  	db	$29,$00,$2a,$00,$2b,$00,$2c,$00	;17
000090 2D 00 2E 00 2F 00 +  	db	$2d,$00,$2e,$00,$2f,$00,$30,$00	;18
000098 31 00 32 00 33 00 +  	db	$31,$00,$32,$00,$33,$00,$34,$00	;19
0000A0 35 00 36 00 37 00 +  	db	$35,$00,$36,$00,$37,$00,$34,$40	;20
0000A8 38 00 39 00 3A 00 +  	db	$38,$00,$39,$00,$3a,$00,$3b,$00	;21
0000B0 3C 00 3D 00 3E 00 +  	db	$3c,$00,$3d,$00,$3e,$00,$3e,$40	;22
0000B8 3F 00 40 00 41 00 +  	db	$3f,$00,$40,$00,$41,$00,$42,$00	;23
0000C0 3F 40 43 00 44 00 +  	db	$3f,$40,$43,$00,$44,$00,$45,$00	;24
0000C8 46 00 47 00 48 00 +  	db	$46,$00,$47,$00,$48,$00,$49,$00	;25
0000D0 60 00 60 40 61 00 +  	db	$60,$00,$60,$40,$61,$00,$60,$c0	;26
0000D8 62 00 62 40 62 80 +  	db	$62,$00,$62,$40,$62,$80,$62,$c0	;27
0000E0 4A 00 4B 00 4C 00 +  	db	$4a,$00,$4b,$00,$4c,$00,$4d,$00	;28
0000E8 4E 00 4F 00 50 00 +  	db	$4e,$00,$4f,$00,$50,$00,$51,$00	;29
0000F0 52 00 53 00 54 00 +  	db	$52,$00,$53,$00,$54,$00,$51,$40	;30
0000F8 55 00 56 00 57 00 +  	db	$55,$00,$56,$00,$57,$00,$00,$00	;31
0000F8 55 00 56 00 57 00 +  	db	$55,$00,$56,$00,$57,$00,$00,$00	;31
000100                      LVL2_CHAR	INCBIN	..\TUME_ART\TEST\TEST.CHR
000D80                      LVL2_PAL	INCLUDE	..\TUME_ART\TEST\BACK1.PAL
000D80                      ;*
000D80                      ;* back1.pal
000D80                      ;*
000D80                      ;* Palette generated by tPGEN
000D80                      ;*
000D80 00 00 00 54 A0 02 +  	HEX	00000054a002a056150015545501b5564a294a7dea2bea7f5f295f7dff2bff7f
000DA0 BD 77 7B 6F 5A 6B +  	HEX	bd777b6f5a6b1863d65ab556734e3146ef3dce398c314a292925e71ca5148410
000DC0 1F 00 1D 00 1C 00 +  	HEX	1f001d001c001a001900170016001400130011000f000e000c000b0009000800
000DE0 7F 6F FF 5E 7F 4E +  	HEX	7f6fff5e7f4eff3d7f2d1f219f101f00bf2e7f223f12ff01bc01990156013301
000E00 FF 6F FF 5F FF 4F +  	HEX	ff6fff5fff4fff3fff2fdf23df13df037c031903b60273021002ae014b010801
000E20 FA 2F F8 23 F6 13 +  	HEX	fa2ff823f613f40392033003ce026c02fb6ff75ff34ff03fec2fe823e413e003
000E40 E0 03 A0 03 80 03 +  	HEX	e003a003800340032003e002c002800260022002e001c0018001600120010001
000E60 FB 7F F7 7F F3 7F +  	HEX	fb7ff77ff37fef7feb7fe87fe47fe07f80732067c05a604e0042c039602d0021
000E60 FB 7F F7 7F F3 7F +  	HEX	fb7ff77ff37fef7feb7fe87fe47fe07f80732067c05a604e0042c039602d0021
000E80                      LVL2_MAP	INCBIN	..\TUME_ART\TEST\BACK1.MAP
005CA0                      
005CA0                      ;******************
005CA0                      ;CODE SOURCE FILES INCLUDED HERE
005CA0                      
005CA0                      	INCLUDE GG_SCRPT.658	;EXECUTE SCRIPTS
005CA0                      ;------------------
005CA0                      ;
005CA0                      ;GG_SCRIPT.658
005CA0                      ;
005CA0                      ;  THE SCRIPT HANDLER CAN EXECUTE A SERIES OF PROGRAMMED COMMANDS WHEN
005CA0                      ;CALLED. IT IS USED PRIMARILY TO SETUP LEVELS, SCREENS...
005CA0                      ;
005CA0                      ;
005CA0                      ;------------------
005CA0                      
005CA0                      	SECTION	GG_CODE,?
000000                      
000000                      ;------------------
000000                      ;EQUATES
000000                      
000000                      ;-----
000000                      ;DRAW_SCRN EQUATES
000000                      
000000 =00000000            DS_SCRN	EQU	0	;SCREEN #
000000 =00000002            DS_MAPADD	EQU	2	;MAP ADDRESS
000000 =00000004            DS_MAPPAGE	EQU	4	;MAP PAGE
000000 =00000005            DS_MAPSIZE	EQU	5	;MAP SIZE
000000 =00000007            DS_MAPW	EQU	7	;MAP WIDTH
000000 =00000009            DS_MAPH	EQU	9	;MAP HEIGTH
000000 =0000000B            DS_BLKADD	EQU	11	;BLOCK ADDRESS
000000 =0000000D            DS_BLKPAGE	EQU	13	;BLOCK PAGE
000000 =0000000E            DS_BLKSIZE	EQU	14	;BLOCK SIZE
000000 =00000010            DS_SCRNX	EQU	16	;SCREEN X
000000 =00000012            DS_SCRNY	EQU	18	;SCREEN Y
000000 =00000014            DS_END	EQU	20	;SIZE OF DATA AREA
000000                      
000000                      ;-----
000000                      ;INIT_MAP EQUATES
000000                      
000000 =00000000            IM_SCRN	EQU	0	;SCREEN #
000000 =00000002            IM_MAPX	EQU	2	;SCREEN X
000000 =00000004            IM_MAPY	EQU	4	;SCREEN Y
000000 =00000006            IM_MAPW	EQU	6	;MAP WIDTH
000000 =00000008            IM_MAPH	EQU	8	;MAP HEIGTH
000000 =0000000A            IM_MAPADD	EQU	10	;MAP ADDRESS
000000 =0000000C            IM_MAPPAGE	EQU	12	;MAP PAGE
000000 =0000000D            IM_MAPSIZE	EQU	13	;MAP SIZE
000000 =0000000F            IM_BLKADD	EQU	15	;BLOCK ADDRESS
000000 =00000011            IM_BLKPAGE	EQU	17	;BLOCK PAGE
000000 =00000012            IM_BLKSIZE	EQU	18	;BLOCK SIZE
000000 =00000014            IM_END	EQU	20	;SIZE OF DATA AREA
000000                      
000000                      ;-----
000000                      ;SET PLAYER X,Y
000000                      
000000 =00000000            P_X	EQU	0	;PLAYER'S X
000000 =00000002            P_Y	EQU	2	;PLAYER'S Y
000000 =00000004            PXY_END	EQU	4
000000                      
000000                      ;------------------
000000                      ;SCRIPT ROUTINE TABLE
000000                      
000000 00 00                SCRIPT_TABLE	DW	0
000002 00 00                	DW	DO_SC_PAL	;1 = COPY DATA TO PALETTE
000004 00 00                	DW	DO_SC_VRAM	;2 = COPY DATA TO VRAM
000006 00 00                	DW	SET_JPH	;3 = SET THE JOYPAD HANDLER
000008 00 00                	DW	INIT_LVL	;4 = INITIALIZE A GAME LEVEL
00000A 00 00                	DW	TURN_SC_ON	;5 = TURN SCREEN ON
00000C 00 00                	DW	DO_SC_JSL	;6 = CALL LONG ROUTINE
00000E 00 00                	DW	DRAW_SCRN	;7 = DRAW A SCREEN
000010 00 00                	DW	INIT_MAP	;8 = INIT A MAP
000012 00 00                	DW	SET_PLAYER	;9 = SET THE PLAYER X,Y
000014 00 00                	DW	DO_CLR_BKGD	;10 = CLEAR A BKGD
000016 00 00                	DW	DO_CLR_VRAM	;11 = CLEAR ALL OF VRAM
000018 00 00                	DW	DO_CLR_SCRN	;12 = CLEAR SCRN_BUF
00001A                      
00001A                      ;------------------
00001A                      ;SCRIPTS
00001A                      
00001A                      ;=====
00001A                      ;TITLE SCRIPT
00001A                      
00001A 06 00 00 00          TTL_SCRIPT	SC_JSL	RESET_RAM		;RESET RAM ALLOCATION
00001E                      
00001E 04 00 00 00          	SC_LVL	TITLE_LVD		;INIT LEVEL DATA
000022                      
000022 0B                   	SC_CLRV			;CLEAR ALL OF VRAM
000023                      
000023 01 00 00 00 00 20    	SC_PAL	TTL_PAL,0*16,16*2	;COPY TITLE PAL TO PAL #0
000029                      
000029 02 00 00 00 00 00 +  	SC_VRAM	TTL_CHAR,0,22592		;COPY TITLE SCREEN TO VRAM
000031                      
000031 01 00 00 00 10 40    	SC_PAL	PAL2,1*16,32*2		;COPY TEXT PAL TO PAL #1
000037                      
000037 02 00 00 00 00 60 +  	SC_VRAM	FONT1,$6000,96*32	;COPY FONT INTO VRAM
00003F                      
00003F 03 00 00 00          	SC_JPH	TITLE_JPL		;SET JOYPAD HANDLER
000043                      
000043 07 02 00 00 00 00 +  	SC_SCRN	&		;DRAW TITLE SCREEN
000058                      
000058 0C                   	SC_CLR_SB		;CLEAR SCRN_BUF
000059                      
000059 06 00 00 00          	SC_JSL	TEST_TEXT		;TEXT TEXT ROUTINES
00005D                      
00005D 05                   	SC_ON			;TURN SCREEN ON NOW
00005E                      
00005E 06 00 00 00          	SC_JSL	FADE_IN		;START FADE IN
000062                      
000062 00                   	SC_END
000063                      
000063                      ;=====
000063                      ;LEVEL 1 SETUP SCRIPT
000063                      
000063 06 00 00 00          LVL1_SCRIPT	SC_JSL	RESET_RAM		;RESET RAM ALLOCATION
000067                      
000067 04 00 00 00          	SC_LVL	LVL1_LVD		;INIT LEVEL DATA
00006B                      
00006B 01 00 00 00 00 40    	SC_PAL	LVL1_PAL,0*16,32*2	;COPY LVL1 PALETTE TO CG-RAM
000071                      
000071 02 00 00 00 00 00 +  	SC_VRAM	LVL1_CHAR,0,9024 	;COPY LVL1 TILES TO VRAM
000079                      
000079 03 00 00 00          	SC_JPH	LVL1_JPL		;SET JOYPAD HANDLER
00007D                      
00007D 08 01 00 00 00 00 +  	SC_MAP	&		;DRAW LEVEL 1 MAP
000092                      
000092 08 02 00 00 00 00 +  	SC_MAP	&		;DRAW LEVEL 1 MAP
0000A7                      
0000A7 09 E4 00 80 00       	SC_PXY	228,128		;SET THE PLAYER X,Y
0000AC                      
0000AC 05                   	SC_ON			;TURN SCREEN ON NOW
0000AD                      
0000AD 06 00 00 00          	SC_JSL	FADE_IN		;START FADE IN
0000B1                      
0000B1 00                   	SC_END
0000B2                      
0000B2                      ;=====
0000B2                      ;LEVEL 2 SETUP SCRIPT
0000B2                      
0000B2 06 00 00 00          LVL2_SCRIPT	SC_JSL	RESET_RAM		;RESET RAM ALLOCATION
0000B6                      
0000B6 04 00 00 00          	SC_LVL	LVL2_LVD		;INIT LEVEL DATA
0000BA                      
0000BA 01 00 00 00 00 40    	SC_PAL	LVL2_PAL,0*16,32*2	;COPY LVL1 PALETTE TO CG-RAM
0000C0                      
0000C0 02 00 00 00 00 00 +  	SC_VRAM	LVL2_CHAR,0,3200 	;COPY LVL1 TILES TO VRAM
0000C8                      
0000C8 03 00 00 00          	SC_JPH	LVL2_JPL		;SET JOYPAD HANDLER
0000CC                      
0000CC 08 01 00 00 00 00 +  	SC_MAP	&		;DRAW LEVEL 1 MAP
0000E1                      
0000E1 09 80 00 80 00       	SC_PXY	128,128		;SET THE PLAYER X,Y
0000E6                      
0000E6 05                   	SC_ON			;TURN SCREEN ON NOW
0000E7                      
0000E7 06 00 00 00          	SC_JSL	FADE_IN		;START FADE IN
0000EB                      
0000EB 00                   	SC_END
0000EC                      
0000EC                      
0000EC                      
0000EC                      ;------------------
0000EC                      ;DO_SCRIPT -- EXECUTE SCRIPT COMMAND 
0000EC                      ;
0000EC                      ;	DB,Y -- ADDRESS OF SCRIPT TO EXECUTE
0000EC                      
0000EC                      ;-----
0000EC                      ;SCRIPT COMMANDS
0000EC                      
0000EC =00000000            SC_END_CODE	EQU	0	;END OF SCRIPT
0000EC                      
0000EC                      ;-----
0000EC                      
0000EC                      DO_SCRIPT	MODULE
0000EC                      
0000EC 08                   	PHP
0000ED                      DS_LP:
0000ED C2 30                	SET_AXY16
0000EF A9 00 00             	LDA	#0	;CLEAR MSB
0000F2 E2 20                	SET_A8
0000F4 B9 00 00             	LDA	$0,Y	;GET A COMMAND
0000F7 C9 00                	CMP	#SC_END_CODE	;END OF SCRIPT ?
0000F9 F0 00                	BEQ	DS_DONE
0000FB C8                   	INY
0000FC 0A                   	ASL		;WORD POINTER
0000FD AA                   	TAX
0000FE FC 00 00             	JSR	(SCRIPT_TABLE,X)
000101 4C 00 00             	JMP	DS_LP
000104                      ;-----
000104 28                   DS_DONE	PLP
000105 6B                   	RTL
000106                      
000106                      	MODEND
000106                      
000106                      ;------------------
000106                      ;DO_SC_PAL -- DMA COLOR DATA TO PALETTE
000106                      
000106                      DO_SC_PAL	MODULE
000106                      
000106 08                   	PHP
000107 8B                   	PHB		;SAVE CURRENT BANK
000108                      ;
000108 9C 0B 42             	STZ	MDMAEN	;CLEAR DMA CHANNEL
00010B A9 00                	LDA	#$00
00010D 8D 00 43             	STA	WDMAP0	;DMA PARAMETER DATA FOR CHANNEL 0
000110 A9 22                	LDA	#<WCGDATA	;WRITE TO HERE
000112 8D 01 43             	STA	BADMA0
000115                      ;
000115 B9 00 00             	LDA	$0,Y	;GET ADDRESS OF PALETTE
000118 C8                   	INY
000119 8D 02 43             	STA	A1ADMAL0	;LOW
00011C B9 00 00             	LDA	$0,Y
00011F C8                   	INY
000120 8D 03 43             	STA	A1ADMAH0	;HIGH
000123                      ;
000123 B9 00 00             	LDA	$0,Y	;GET DATA BANK OF PALETTE
000126 C8                   	INY
000127 8D 04 43             	STA	A1ADMAB0	;BANK
00012A                      ;
00012A B9 00 00             	LDA	$0,Y	;GET DEST ADDRESS IN PALETTE
00012D C8                   	INY
00012E 8D 21 21             	STA	CGADD	;SET WRITE ADDRESS
000131                      ;
000131 B9 00 00             	LDA	$0,Y	;# OF BYTES TO SEND
000134 C8                   	INY
000135 8D 05 43             	STA	DMADATL0	;LOW
000138 A9 00                	LDA	#0
00013A 8D 06 43             	STA	DMADATH0	;HIGH
00013D                      ;
00013D A9 01                	LDA	#1
00013F 8D 0B 42             	STA	MDMAEN	;START DMA
000142                      ;	
000142 AB                   	PLB	
000143 28                   	PLP
000144 60                   	RTS	
000145                      
000145                      	MODEND
000145                      ;------------------
000145                      ;DO_SC_VRAM -- DMA DATA INTO VRAM
000145                      
000145                      DO_SC_VRAM	MODULE
000145                      
000145 08                   	PHP
000146 8B                   	PHB		;SAVE CURRENT BANK
000147 E2 20                	SET_A8
000149                      ;
000149 A9 80                	LDA	#$80
00014B 8D 15 21             	STA	VMAINC
00014E                      ;
00014E 9C 0B 42             	STZ	MDMAEN	;CLEAR DMA CHANNEL
000151 A9 01                	LDA	#$01
000153 8D 00 43             	STA	WDMAP0	;DMA PARAMETER DATA FOR CHANNEL 0
000156 A9 18                	LDA	#<WVMDATAL	;WRITE TO HERE
000158 8D 01 43             	STA	BADMA0
00015B                      ;
00015B B9 00 00             	LDA	$0,Y	;GET ADDRESS OF SOURCE
00015E C8                   	INY
00015F 8D 02 43             	STA	A1ADMAL0	;LOW
000162 B9 00 00             	LDA	$0,Y
000165 C8                   	INY
000166 8D 03 43             	STA	A1ADMAH0	;HIGH
000169                      ;
000169 B9 00 00             	LDA	$0,Y	;GET DATA BANK OF SOURCE
00016C C8                   	INY
00016D 8D 04 43             	STA	A1ADMAB0	;BANK
000170                      ;
000170 C2 20                	SET_A16
000172 B9 00 00             	LDA	$0,Y	;GET DEST ADDRESS IN VRAM
000175 C8                   	INY
000176 C8                   	INY
000177 8D 16 21             	STA	VMADDL	;SET VRAM WRITE ADDRESS
00017A                      ;
00017A B9 00 00             	LDA	$0,Y	;# OF BYTES TO SEND
00017D C8                   	INY
00017E C8                   	INY
00017F E2 20                	SET_A8
000181 8D 05 43             	STA	DMADATL0	;LOW
000184 EB                   	XBA
000185 8D 06 43             	STA	DMADATH0	;HIGH
000188                      ;
000188 A9 01                	LDA	#1
00018A 8D 0B 42             	STA	MDMAEN	;START DMA
00018D                      ;	
00018D AB                   	PLB	
00018E 28                   	PLP
00018F 60                   	RTS	
000190                      
000190                      	MODEND
000190                      
000190                      ;------------------
000190                      ;SET_JPH -- SET THE ADDRESS OF THE JOYPAD HANDLER
000190                      
000190                      SET_JPH	MODULE
000190                      
000190 08                   	PHP
000191                      ;
000191 C2 20                	SET_A16
000193 B9 00 00             	LDA	$0,Y	;GET ADDRESS OF JP LIST
000196 C8                   	INY
000197 C8                   	INY
000198 8D 00 00             	STA	JP_LIST	;GET ADDRESS
00019B E2 20                	SET_A8
00019D B9 00 00             	LDA	$0,Y
0001A0 C8                   	INY
0001A1 8D 00 00             	STA	JP_LIST+2	;SET BANK
0001A4                      ;
0001A4 28                   	PLP
0001A5 60                   	RTS
0001A6                      
0001A6                      
0001A6                      	MODEND
0001A6                      
0001A6                      ;------------------
0001A6                      ;INIT_LVL -- INITIALIZE A GAME LEVEL
0001A6                      
0001A6                      INIT_LVL	MODULE
0001A6                      
0001A6 08                   	PHP
0001A7 8B                   	PHB
0001A8 5A                   	PHY
0001A9                      ;-----
0001A9 C2 20                	SET_A16
0001AB B9 00 00             	LDA	$0,Y	;GET ADDRESS OF LEVEL DATA
0001AE AA                   	TAX
0001AF E2 20                	SET_A8
0001B1 B9 02 00             	LDA	$2,Y	;GET BANK OF LEVEL DATA
0001B4 48                   	PHA
0001B5 AB                   	PLB
0001B6 9B                   	TXY
0001B7                      ;-----
0001B7                      ;SET OBJSEL = $2101
0001B7                      
0001B7 C2 20                	SET_A16
0001B9 9C 00 00             	STZ	TEMP_WORD	;CLEAR TEMP AREA
0001BC B9 00 00             	LDA	$0,Y	;GET OBJ BASE ADDRESS
0001BF 8D 00 00             	STA	OBJ_BASE
0001C2 18                   	CLC
0001C3 2A                   	ROL	A
0001C4 2A                   	ROL	A
0001C5 2A                   	ROL	A
0001C6 2A                   	ROL	A	;ADJUST FOR 
0001C7 E2 20                	SET_A8
0001C9 29 07                	AND	#$07
0001CB 8D 00 00             	STA	TEMP_WORD
0001CE                      ;
0001CE B9 02 00             	LDA	$2,Y	;GET OBJ DATA AREA
0001D1 8D 00 00             	STA	OBJ_AREA
0001D4 0A                   	ASL	A
0001D5 0A                   	ASL	A
0001D6 0A                   	ASL	A
0001D7 29 18                	AND	#$18	;MASK IT
0001D9 0D 00 00             	ORA	TEMP_WORD	;COMBINE
0001DC 8D 00 00             	STA	TEMP_WORD	;SAVE
0001DF                      ;
0001DF B9 03 00             	LDA	$3,Y	;GET OBJ SIZES
0001E2 8D 00 00             	STA	OBJ_SIZE
0001E5 18                   	CLC
0001E6 6A                   	ROR	A
0001E7 6A                   	ROR	A
0001E8 6A                   	ROR	A
0001E9 6A                   	ROR	A
0001EA 29 E0                	AND	#$E0	;MASK IT
0001EC 0D 00 00             	ORA	TEMP_WORD
0001EF 8D 01 21             	STA	OBJSEL	;SET HARDWARE REGISTER
0001F2                      ;-----
0001F2                      ;SET BGMODE = $2105
0001F2                      
0001F2 B9 04 00             	LDA	$4,Y	;GET SCREEN MODE
0001F5 8D 00 00             	STA	SC_MODE
0001F8 29 07                	AND	#$07	;MASK IT
0001FA 8D 00 00             	STA	TEMP_WORD
0001FD                      ;
0001FD B9 05 00             	LDA	$5,Y	;GET BG 3 PRIORITY
000200 8D 00 00             	STA	BG3_PRIO
000203 0A                   	ASL	A
000204 0A                   	ASL	A
000205 0A                   	ASL	A	;ADJUST IT
000206 29 08                	AND	#$08	;MASK IT
000208 0D 00 00             	ORA	TEMP_WORD	;COMBINE
00020B 8D 00 00             	STA	TEMP_WORD	;SAVE IT
00020E                      ;
00020E B9 06 00             	LDA	$6,Y	;GET BG CHAR SIZE
000211 8D 00 00             	STA	BG_CSIZE
000214 0A                   	ASL	A
000215 0A                   	ASL	A
000216 0A                   	ASL	A
000217 0A                   	ASL	A
000218 29 F0                	AND	#$F0	;MASK IT
00021A 0D 00 00             	ORA	TEMP_WORD	;COMBINE IT
00021D 8D 05 21             	STA	BGMODE	;SET HARDWARE REGISTER
000220                      ;-----
000220                      ;SET BG1SC = $2107
000220                      
000220 B9 07 00             	LDA	$7,Y	;GET BG1 SCREEN SIZE
000223 8D 00 00             	STA	BG1_SIZE
000226 29 03                	AND	#$03	;MASK IT
000228 8D 00 00             	STA	TEMP_WORD
00022B                      ;
00022B C2 20                	SET_A16
00022D B9 08 00             	LDA	$8,Y	;GET BG1 SC BASE ADDRESS
000230 8D 00 00             	STA	BG1_SC
000233 EB                   	XBA
000234 E2 20                	SET_A8
000236 29 FC                	AND	#$FC	;MASK IT
000238 0D 00 00             	ORA	TEMP_WORD
00023B 8D 07 21             	STA	BG1SC	;SET HARDWARE REGISTER
00023E                      ;-----
00023E                      ;SET BG2SC = $2108
00023E                      
00023E B9 0A 00             	LDA	$A,Y	;GET BG2 SCREEN SIZE
000241 8D 00 00             	STA	BG2_SIZE
000244 29 03                	AND	#$03	;MASK IT
000246 8D 00 00             	STA	TEMP_WORD
000249                      ;
000249 C2 20                	SET_A16
00024B B9 0B 00             	LDA	$B,Y	;GET BG2 SC BASE ADDRESS
00024E 8D 00 00             	STA	BG2_SC
000251 EB                   	XBA
000252 E2 20                	SET_A8
000254 29 FC                	AND	#$FC	;MASK IT
000256 0D 00 00             	ORA	TEMP_WORD
000259 8D 08 21             	STA	BG2SC	;SET HARDWARE REGISTER
00025C                      ;-----
00025C                      ;SET BG3SC = $2109
00025C                      
00025C B9 0D 00             	LDA	$D,Y	;GET BG3 SCREEN SIZE
00025F 8D 00 00             	STA	BG3_SIZE
000262 29 03                	AND	#$03	;MASK IT
000264 8D 00 00             	STA	TEMP_WORD
000267                      ;
000267 C2 20                	SET_A16
000269 B9 0E 00             	LDA	$E,Y	;GET BG3 SC BASE ADDRESS
00026C 8D 00 00             	STA	BG3_SC
00026F EB                   	XBA
000270 E2 20                	SET_A8
000272 29 FC                	AND	#$FC	;MASK IT
000274 0D 00 00             	ORA	TEMP_WORD
000277 8D 09 21             	STA	BG3SC	;SET HARDWARE REGISTER
00027A                      ;-----
00027A                      ;SET BG4SC = $210A
00027A                      
00027A B9 10 00             	LDA	$10,Y	;GET BG4 SCREEN SIZE
00027D 8D 00 00             	STA	BG4_SIZE
000280 29 03                	AND	#$03	;MASK IT
000282 8D 00 00             	STA	TEMP_WORD
000285                      ;
000285 C2 20                	SET_A16
000287 B9 11 00             	LDA	$11,Y	;GET BG4 SC BASE ADDRESS
00028A 8D 00 00             	STA	BG4_SC
00028D EB                   	XBA
00028E E2 20                	SET_A8
000290 29 FC                	AND	#$FC	;MASK IT
000292 0D 00 00             	ORA	TEMP_WORD
000295 8D 0A 21             	STA	BG4SC	;SET HARDWARE REGISTER
000298                      ;-----
000298                      ;SET BG12NBA = $210B
000298                      
000298 C2 20                	SET_A16
00029A B9 13 00             	LDA	$13,Y	;GET BG 1 CHAR DATA BASE ADDRESS
00029D 8D 00 00             	STA	BG1_CHAR
0002A0 E2 20                	SET_A8
0002A2 EB                   	XBA
0002A3 4A                   	LSR	A
0002A4 4A                   	LSR	A
0002A5 4A                   	LSR	A
0002A6 4A                   	LSR	A
0002A7 29 0F                	AND	#$0F
0002A9 8D 00 00             	STA	TEMP_WORD
0002AC C2 20                	SET_A16
0002AE B9 15 00             	LDA	$15,Y	;GET BG 2 CHAR DATA BASE ADDRESS
0002B1 8D 00 00             	STA	BG2_CHAR
0002B4 E2 20                	SET_A8
0002B6 EB                   	XBA
0002B7 29 F0                	AND	#$F0	;MASK IT
0002B9 0D 00 00             	ORA	TEMP_WORD
0002BC 8D 0B 21             	STA	BG12NBA	;SET HARDWARE REGISTER
0002BF                      ;-----
0002BF                      ;SET BG34NBA = $210C
0002BF                      
0002BF C2 20                	SET_A16
0002C1 B9 17 00             	LDA	$17,Y	;GET BG 3 CHAR DATA BASE ADDRESS
0002C4 8D 00 00             	STA	BG3_CHAR
0002C7 E2 20                	SET_A8
0002C9 EB                   	XBA
0002CA 4A                   	LSR	A
0002CB 4A                   	LSR	A
0002CC 4A                   	LSR	A
0002CD 4A                   	LSR	A
0002CE 29 0F                	AND	#$0F
0002D0 8D 00 00             	STA	TEMP_WORD
0002D3 C2 20                	SET_A16
0002D5 B9 19 00             	LDA	$19,Y	;GET BG 4 CHAR DATA BASE ADDRESS
0002D8 8D 00 00             	STA	BG4_CHAR
0002DB E2 20                	SET_A8
0002DD EB                   	XBA
0002DE 29 F0                	AND	#$F0	;MASK IT
0002E0 0D 00 00             	ORA	TEMP_WORD
0002E3 8D 0C 21             	STA	BG34NBA	;SET HARDWARE REGISTER
0002E6                      ;-----
0002E6                      ;GET BUT DON'T SET TM
0002E6 B9 1B 00             	LDA	$1B,Y	;GET MAIN SCREEN DESIGNATION
0002E9 8D 00 00             	STA	TM_VALUE
0002EC                      ;-----
0002EC C2 30                	SET_AXY16
0002EE 68                   	PLA
0002EF 18                   	CLC
0002F0 69 03 00             	ADC	#3	;SKIP ADDRESS
0002F3 A8                   	TAY
0002F4 AB                   	PLB
0002F5 28                   	PLP
0002F6 60                   	RTS
0002F7                      
0002F7                      
0002F7                      	MODEND
0002F7                      
0002F7                      ;------------------
0002F7                      ;TURN_SC_ON -- TURN THE SCREEN ON NOW
0002F7                      
0002F7                      TURN_SC_ON	MODULE
0002F7                      
0002F7 08                   	PHP
0002F8 E2 20                	SET_A8
0002FA                      ;-----
0002FA AD 00 00             	LDA	TM_VALUE
0002FD 8D 2C 21             	STA	TM	;ENABLE SCREENS
000300                      ;-----
000300                      ;RELEASE FORCED BLANK
000300 A9 00                	LDA	#$00	;ENABLE DISPLAY BUT BRIGHTNESS = 0
000302 8D 00 21             	STA	INIDISP
000305                      ;-----
000305                      ;ENABLE "NMI ENABLE"
000305                      ;ENABLE "JOY-C ENABLE"
000305                      
000305 A9 81                	LDA	#$81
000307 8D 00 42             	STA	NMITIMEN	;ENABLE NMI 
00030A 58                   	CLI   		;ENABLE INTERRUPTS
00030B                      ;-----
00030B 28                   	PLP
00030C 60                   	RTS
00030D                      
00030D                      	MODEND
00030D                      
00030D                      ;------------------
00030D                      ;DO_SC_JSL -- CALL A LONG ROUTINE
00030D                      
00030D                      DO_SC_JSL	MODULE
00030D                      
00030D 08                   	PHP
00030E 8B                   	PHB
00030F 5A                   	PHY
000310                      ;-----
000310 4B                   	PHK		;PUSH PROGRAM BANK
000311 62 00 00             	PER	@RETURN-1	;SAVE RETURN ADDRESS
000314                      ;
000314 E2 20                	SET_A8
000316 B9 02 00             	LDA	$2,Y	;GET BANK
000319 48                   	PHA		;PUSH PROGRAM BANK ADDRESS
00031A C2 20                	SET_A16
00031C B9 00 00             	LDA	$0,Y	;GET ADDRESS OF ROUTINE
00031F 38                   	SEC
000320 E9 01 00             	SBC	#1
000323 48                   	PHA		;PUSH ADDRESS
000324 6B                   	RTL		;GO THERE NOW
000325                      ;-----
000325 C2 30                @RETURN	SET_AXY16
000327 68                   	PLA
000328 18                   	CLC
000329 69 03 00             	ADC	#3
00032C A8                   	TAY
00032D AB                   	PLB
00032E 28                   	PLP
00032F 60                   	RTS
000330                      
000330                      	MODEND
000330                      
000330                      ;------------------
000330                      ;DRAW_SCRN -- DRAW A SCREEN INTO VRAM
000330                      
000330                      DRAW_SCRN	MODULE
000330                      
000330 08                   	PHP
000331 8B                   	PHB
000332 C2 30                	SET_AXY16
000334 8C 00 00             	STY	SCRIPT_PTR	;SAVE POINTER
000337                      ;-----
000337                      ;GET SCREEN # AND MAKE POINTER
000337 B9 00 00             	LDA	DS_SCRN,Y	;GET SCREEN #
00033A 3A                   	DEC	A
00033B 0A                   	ASL	A
00033C 8D 00 00             	STA	SCRN_PTR
00033F 18                   	CLC
000340 79 00 00             	ADC	$0,Y	;SCRN # * 3
000343 8D 00 00             	STA	SCRN_PTR3
000346                      ;-----
000346                      ;LOAD ALL THE DATA INTO VARIABLES
000346 B9 02 00             	LDA	DS_MAPADD,Y	;GET OFFSET OF MAP
000349 8D 00 00             	STA	MAP_IN_ROM	;SAVE OFFSET
00034C B9 0B 00             	LDA	DS_BLKADD,Y	;GET OFFSET OF BLOCK
00034F 8D 00 00             	STA	BLK_IN_ROM	;SAVE OFFSET
000352 E2 20                	SET_A8
000354 B9 04 00             	LDA	DS_MAPPAGE,Y	;GET BANK OF MAP
000357 8D 00 00             	STA	MAP_IN_ROM+2
00035A B9 0D 00             	LDA	DS_BLKPAGE,Y	;GET BANK OF BLOCK
00035D 8D 00 00             	STA	BLK_IN_ROM+2
000360 C2 20                	SET_A16
000362 B9 0E 00             	LDA	DS_BLKSIZE,Y	;GET SIZE OF BLOCK DATA
000365 8D 00 00             	STA	BLK_BYTES	;SAVE FOR MOVE
000368 B9 05 00             	LDA	DS_MAPSIZE,Y	;GET MAP SIZE IN BYTES
00036B 8D 00 00             	STA	MAP_BYTES	;SAVE FOR MOVE
00036E                      ;-----
00036E                      ;ALLOCATE RAM FOR MAP
00036E 22 00 00 00          	JSL	ALLOC_RAM	;ALLOCATE RAM
000372 AE 00 00             	LDX	SCRN_PTR	;GET SCREEN PTR
000375 9D 00 00             	STA	MAP1_HANDLE,X	;POINTER TO MAP RAM BLOCK
000378 8D 00 00             	STA	MAP_HANDLE	;SAVE IN TEMP HANDLE
00037B                      ;-----
00037B                      ;COPY MAP TO RAM
00037B AE 00 00             	LDX	MAP_HANDLE
00037E BD 00 00             	LDA	RAM_BLOCK0,X	;OFFSET OF AVAILABLE RAM
000381 8D 00 00             	STA	MAP_IN_RAM
000384 BD 00 00             	LDA	RAM_BLOCK0+2,X
000387 E2 20                	SET_A8
000389 8D 00 00             	STA	MAP_IN_RAM+2	;BANK OF RAM
00038C                      ;
00038C C2 20                	SET_A16
00038E 20 00 00             	JSR	MAP_2_RAM	;COPY MAP INTO WORK RAM
000391                      ;-----
000391                      ;ALLOCATE RAM FOR BLOCK DATA
000391 AD 00 00             	LDA	BLK_BYTES	;SIZE OF BLOCK
000394 22 00 00 00          	JSL	ALLOC_RAM	;ALLOCATE RAM
000398 AE 00 00             	LDX	SCRN_PTR	;GET SCREEN PTR
00039B 9D 00 00             	STA	BLK1_HANDLE,X	;POINTER TO MAP RAM BLOCK
00039E 8D 00 00             	STA	BLK_HANDLE	;SAVE IN TEMP HANDLE
0003A1                      ;-----
0003A1                      ;COPY BLOCK TO RAM
0003A1 AE 00 00             	LDX	BLK_HANDLE
0003A4 BD 00 00             	LDA	RAM_BLOCK0,X	;OFFSET OF AVAILABLE RAM
0003A7 8D 00 00             	STA	BLK_IN_RAM
0003AA BD 00 00             	LDA	RAM_BLOCK0+2,X
0003AD E2 20                	SET_A8
0003AF 8D 00 00             	STA	BLK_IN_RAM+2	;BANK OF RAM
0003B2                      ;
0003B2 C2 20                	SET_A16
0003B4 20 00 00             	JSR	BLK_2_RAM	;COPY BLOCK TO WORK RAM
0003B7                      ;-----
0003B7 22 00 00 00          	JSL	CLR_SCRN_BUF	;CLEAR OUT THE SCRN_BUF
0003BB                      ;-----
0003BB                      ;FIGURE THE OFFSET INTO THE SCREEN BUF TO DRAW
0003BB AE 00 00             	LDX	SCRN_PTR	;GET SCREEN #
0003BE AC 00 00             	LDY	SCRIPT_PTR	;RESTORE SCRIPT POINTER
0003C1 B9 07 00             	LDA	DS_MAPW,Y	;GET MAP WIDTH
0003C4 8D 00 00             	STA	MAP_WIDTH
0003C7 9D 00 00             	STA	MAP1_WIDTH,X
0003CA B9 09 00             	LDA	DS_MAPH,Y	;GET MAP HEIGTH
0003CD 8D 00 00             	STA	MAP_HEIGTH
0003D0 9D 00 00             	STA	MAP1_HEIGTH,X
0003D3 B9 12 00             	LDA	DS_SCRNY,Y	;GET SCREEN Y
0003D6 8D 00 00             	STA	SCRN_Y
0003D9 E2 20                	SET_A8
0003DB 8D 02 42             	STA	WRMPYA	;SET MULTIPLICAND
0003DE A9 40                	LDA	#64	;WIDTH OF SCREEN
0003E0 8D 03 42             	STA	WRMPYB	;SET MULTIPLIER
0003E3 EA                   	NOP
0003E4 EA                   	NOP
0003E5 EA                   	NOP
0003E6 EA                   	NOP
0003E7 EA                   	NOP		;WAIT 8 CYCLES
0003E8 AD 17 42             	LDA	RDMPYH	;GET HIGH
0003EB EB                   	XBA
0003EC AD 16 42             	LDA	RDMPYL	;GET LOW
0003EF C2 20                	SET_A16
0003F1 8D 00 00             	STA	SCRN_OFF	;SAVE IT
0003F4 B9 10 00             	LDA	DS_SCRNX,Y	;GET SCREEN X
0003F7 8D 00 00             	STA	SCRN_X	;SAVE START X
0003FA 18                   	CLC
0003FB 6D 00 00             	ADC	SCRN_OFF	;ADD SCRN X
0003FE 8D 00 00             	STA	SCRN_OFF	;SAVE IT
000401                      ;-----
000401                      ;NOW DRAW THE MAP INTO THE SCRN_BUF
000401 E2 20                	SET_A8
000403 A9 00                	LDA	#^SCRN_BUF
000405 48                   	PHA
000406 AB                   	PLB    		;SET SCRN_BUF PAGE
000407 C2 20                	SET_A16
000409                      ;
000409 A0 00 00             	LDY	#0	;AT BEGINNING
00040C AD 00 00             	LDA	MAP_HEIGTH
00040F 8D 00 00             	STA	SCRN_HEIGTH	;SET COUNTER
000412                      ;
000412 AE 00 00             @LOOP3	LDX	SCRN_OFF	;START NEW ROW
000415 AD 00 00             	LDA	MAP_WIDTH	;GET WIDTH
000418 8D 00 00             	STA	SCRN_WIDTH	;SET COUNTER
00041B                      ;
00041B B7 00                @LOOP4	LDA	[MAP_IN_RAM],Y	;GET A MAP REFERENCE
00041D C8                   	INY
00041E C8                   	INY
00041F 5A                   	PHY
000420 A8                   	TAY
000421 29 00 3C             	AND	#$3C00
000424 8D 00 00             	STA	MAP_PC	;SAVE PRIORITY AND COLOR
000427 98                   	TYA
000428 29 00 C0             	AND	#$C000
00042B 8D 00 00             	STA	MAP_FB	;SAVE FLIP BITS
00042E 98                   	TYA
00042F 29 FF 03             	AND	#$03FF	;JUST INDEX DATA
000432 0A                   	ASL
000433 0A                   	ASL
000434 0A                   	ASL
000435 A8                   	TAY		;POINT INTO BLOCK DATA
000436 B7 00                	LDA	[BLK_IN_RAM],Y
000438 0D 00 00             	ORA	MAP_PC	;ADD PRIORITY AND COLOR
00043B 4D 00 00             	EOR	MAP_FB	;ADD FLIP BITS
00043E C8                   	INY
00043F C8                   	INY
000440 8D 00 00             	STA	T0	;SAVE TILE 0
000443 B7 00                	LDA	[BLK_IN_RAM],Y
000445 0D 00 00             	ORA	MAP_PC	;ADD PRIORITY AND COLOR
000448 4D 00 00             	EOR	MAP_FB	;ADD FLIP BITS
00044B C8                   	INY
00044C C8                   	INY
00044D 8D 00 00             	STA	T1	;SAVE TILE 1
000450 B7 00                	LDA	[BLK_IN_RAM],Y
000452 0D 00 00             	ORA	MAP_PC	;ADD PRIORITY AND COLOR
000455 4D 00 00             	EOR	MAP_FB	;ADD FLIP BITS
000458 C8                   	INY
000459 C8                   	INY
00045A 8D 00 00             	STA	T2	;SAVE TILE 2
00045D B7 00                	LDA	[BLK_IN_RAM],Y
00045F 0D 00 00             	ORA	MAP_PC	;ADD PRIORITY AND COLOR
000462 4D 00 00             	EOR	MAP_FB	;ADD FLIP BITS
000465 8D 00 00             	STA	T3	;SAVE TILE 3
000468                      ;-----
000468                      ;TEST FLIP BITS AND ADJUST
000468 AD 00 00             	LDA	MAP_FB	;GET FLIP BITS
00046B 89 00 40             	BIT	#$4000	;X FLIP ?
00046E F0 00                	BEQ	NO_X_FLIP
000470 AD 00 00             	LDA	T0
000473 AC 00 00             	LDY	T1
000476 8D 00 00             	STA	T1
000479 8C 00 00             	STY	T0	;FLIP T0,T1
00047C AD 00 00             	LDA	T2
00047F AC 00 00             	LDY	T3
000482 8D 00 00             	STA	T3
000485 8C 00 00             	STY	T2	;FLIP T2,T3
000488                      ;
000488 AD 00 00             NO_X_FLIP	LDA	MAP_FB	;GET FLIP BITS
00048B 89 00 80             	BIT	#$8000	;Y FLIP ?
00048E F0 00                	BEQ	NO_Y_FLIP
000490 AD 00 00             	LDA	T0
000493 AC 00 00             	LDY	T2
000496 8D 00 00             	STA	T2
000499 8C 00 00             	STY	T0	;FLIP T0,T2
00049C AD 00 00             	LDA	T1
00049F AC 00 00             	LDY	T3
0004A2 8D 00 00             	STA	T3
0004A5 8C 00 00             	STY	T1	;FLIP T1,T3
0004A8 7A                   NO_Y_FLIP	PLY
0004A9                      ;-----
0004A9                      ;NOW STORE IT IN THE CORRECT LOCATION IN THE SCRN_BUF
0004A9 AD 00 00             	LDA	T0
0004AC 9D 00 00             	STA	SCRN_BUF,X	;SAVE TOP LEFT TILE
0004AF AD 00 00             	LDA	T1
0004B2 9D 00 00             	STA	SCRN_BUF+2,X	;SAVE TOP RIGHT TILE
0004B5 AD 00 00             	LDA	T2
0004B8 9D 00 00             	STA	SCRN_BUF+64,X	;SAVE BOTTOM LEFT
0004BB AD 00 00             	LDA	T3
0004BE 9D 00 00             	STA	SCRN_BUF+66,X	;SAVE BOTTOM RIGHT
0004C1 18                   	CLC
0004C2 8A                   	TXA
0004C3 69 04 00             	ADC	#4	;NEXT BLOCK
0004C6 AA                   	TAX
0004C7                      ;-----
0004C7 CE 00 00             	DEC	SCRN_WIDTH
0004CA F0 00                	BEQ	@ROW_DONE
0004CC 4C 00 00             	JMP	@LOOP4
0004CF 18                   @ROW_DONE	CLC
0004D0 AD 00 00             	LDA	SCRN_OFF	;GET START OF THIS ROW
0004D3 69 80 00             	ADC	#64*2	;ADD 2 ROWS
0004D6 8D 00 00             	STA	SCRN_OFF
0004D9 CE 00 00             	DEC	SCRN_HEIGTH
0004DC F0 00                	BEQ	@MAP_DONE
0004DE 4C 00 00             	JMP	@LOOP3
0004E1                      @MAP_DONE
0004E1                      ;-----
0004E1                      ;NOW DMA THE DATA OVER TO VRAM
0004E1 E2 20                	SET_A8
0004E3 A9 00                	LDA	#0
0004E5 48                   	PHA
0004E6 AB                   	PLB		;RESET BANK FOR TRANSFER
0004E7 9C 0B 42             	STZ	MDMAEN	;CLEAR DMA CHANNEL
0004EA A9 01                	LDA	#$01
0004EC 8D 00 43             	STA	WDMAP0	;DMA PARAMETER DATA FOR CHANNEL 0
0004EF A9 18                	LDA	#<WVMDATAL	;WRITE TO HERE
0004F1 8D 01 43             	STA	BADMA0
0004F4                      ;
0004F4 A9 00                	LDA	#<SCRN_BUF	;GET ADDRESS OF SOURCE
0004F6 8D 02 43             	STA	A1ADMAL0	;LOW
0004F9 A9 00                	LDA	#>SCRN_BUF
0004FB 8D 03 43             	STA	A1ADMAH0	;HIGH
0004FE A9 00                	LDA	#^SCRN_BUF	;GET DATA BANK OF SOURCE
000500 8D 04 43             	STA	A1ADMAB0	;BANK
000503                      ;
000503 AE 00 00             	LDX	SCRN_PTR
000506 C2 20                	SET_A16
000508 BD 00 00             	LDA	BG1_SC,X	;GET DEST ADDRESS IN VRAM
00050B 8D 16 21             	STA	VMADDL	;SET VRAM WRITE ADDRESS
00050E                      ;
00050E A9 00 08             	LDA	#2048	;# OF BYTES TO SEND
000511 E2 20                	SET_A8
000513 8D 05 43             	STA	DMADATL0	;LOW
000516 EB                   	XBA
000517 8D 06 43             	STA	DMADATH0	;HIGH
00051A                      ;
00051A A9 01                	LDA	#1
00051C 8D 0B 42             	STA	MDMAEN	;START DMA
00051F                      @SKIP
00051F                      ;-----
00051F C2 30                	SET_AXY16
000521 AD 00 00             	LDA	SCRIPT_PTR	;GET POINTER
000524 18                   	CLC
000525 69 14 00             	ADC	#DS_END	;SKIP DATA
000528 A8                   	TAY
000529 AB                   	PLB
00052A 28                   	PLP
00052B 60                   	RTS
00052C                      
00052C                      	MODEND
00052C                      
00052C                      ;------------------
00052C                      ;CLR_SCRN_BUF -- CLEAR THE SCREEN BUFFER
00052C                      
00052C                      CLR_SCRN_BUF	MODULE
00052C                      
00052C 20 00 00             	JSR	DO_CLR_SCRN
00052F 6B                   	RTL
000530                      ;=====
000530 08                   DO_CLR_SCRN	PHP
000531 8B                   	PHB
000532                      ;-----
000532 E2 20                	SET_A8
000534 C2 10                	SET_XY16
000536 5A                   	PHY
000537 A9 00                	LDA	#^SCRN_BUF
000539 48                   	PHA
00053A AB                   	PLB		;SET SCRN_BUF DATA BANK
00053B                      ;-----
00053B C2 20                	SET_A16
00053D 9C 00 00             	STZ	SCRN_BUF	;CLEAR FIRST BYTE
000540 A2 00 00             	LDX	#<SCRN_BUF	;FROM
000543 A0 00 00             	LDY	#<SCRN_BUF+1	;TO
000546 A9 FE 07             	LDA	#2048-2	;LENGTH
000549 54 00 00             	MVN	SCRN_BUF,SCRN_BUF	;ZERO OUT AREA
00054C                      ;-----
00054C 7A                   	PLY
00054D AB                   	PLB
00054E 28                   	PLP
00054F 60                   	RTS
000550                      
000550                      	MODEND
000550                      
000550                      ;------------------
000550                      ;INIT_MAP -- INITIALIZE A MAP
000550                      
000550                      INIT_MAP	MODULE
000550                      
000550 08                   	PHP
000551 8B                   	PHB
000552 C2 30                	SET_AXY16
000554 8C 00 00             	STY	SCRIPT_PTR	;SAVE POINTER
000557                      ;-----
000557                      ;GET SCREEN # AND MAKE POINTER
000557 B9 00 00             	LDA	IM_SCRN,Y	;GET SCREEN #
00055A 3A                   	DEC	A
00055B 0A                   	ASL	A
00055C 8D 00 00             	STA	SCRN_PTR
00055F 18                   	CLC
000560 79 00 00             	ADC	IM_SCRN,Y	;SCRN # * 3
000563 8D 00 00             	STA	SCRN_PTR3
000566                      ;-----
000566                      ;LOAD ALL THE DATA INTO VARIABLES
000566 AE 00 00             	LDX	SCRN_PTR
000569 B9 02 00             	LDA	IM_MAPX,Y
00056C 9D 00 00             	STA	MAP1_X,X	;MAP START X
00056F 9D 00 00             	STA	MAP1_STARTX,X
000572 8D 00 00             	STA	MAP_STARTX
000575 B9 04 00             	LDA	IM_MAPY,Y
000578 8D 00 00             	STA	MAP1_Y	;MAP START Y
00057B 8D 00 00             	STA	MAP1_STARTY
00057E 8D 00 00             	STA	MAP_STARTY
000581                      ;
000581 B9 06 00             	LDA	IM_MAPW,Y
000584 9D 00 00             	STA	MAP1_WIDTH,X	;MAP WIDTH
000587 8D 00 00             	STA	MAP_WIDTH
00058A AD 08 00             	LDA	IM_MAPH
00058D 9D 00 00             	STA	MAP1_HEIGTH,X	;MAP HEIGTH
000590 8D 00 00             	STA	MAP_HEIGTH
000593                      ;
000593 B9 0A 00             	LDA	IM_MAPADD,Y	;GET OFFSET OF MAP
000596 8D 00 00             	STA	MAP_IN_ROM	;SAVE OFFSET
000599 B9 0F 00             	LDA	IM_BLKADD,Y	;GET OFFSET OF BLOCK
00059C 8D 00 00             	STA	BLK_IN_ROM	;SAVE OFFSET
00059F                      ;
00059F E2 20                	SET_A8
0005A1 B9 0C 00             	LDA	IM_MAPPAGE,Y	;GET BANK OF MAP
0005A4 8D 00 00             	STA	MAP_IN_ROM+2
0005A7 B9 11 00             	LDA	IM_BLKPAGE,Y	;GET BANK OF BLOCK
0005AA 8D 00 00             	STA	BLK_IN_ROM+2
0005AD C2 20                	SET_A16
0005AF                      ;
0005AF B9 12 00             	LDA	IM_BLKSIZE,Y	;GET SIZE OF BLOCK DATA
0005B2 8D 00 00             	STA	BLK_BYTES	;SAVE FOR MOVE
0005B5 B9 0D 00             	LDA	IM_MAPSIZE,Y	;GET MAP SIZE IN BYTES
0005B8 8D 00 00             	STA	MAP_BYTES	;SAVE FOR MOVE
0005BB                      ;-----
0005BB                      ;ALLOCATE RAM FOR MAP
0005BB 22 00 00 00          	JSL	ALLOC_RAM	;ALLOCATE RAM
0005BF AE 00 00             	LDX	SCRN_PTR	;GET SCREEN PTR
0005C2 9D 00 00             	STA	MAP1_HANDLE,X	;POINTER TO MAP RAM BLOCK
0005C5 8D 00 00             	STA	MAP_HANDLE	;SAVE IN TEMP HANDLE
0005C8                      ;-----
0005C8                      ;ALLOCATE RAM FOR BLOCK DATA
0005C8 AD 00 00             	LDA	BLK_BYTES	;SIZE OF BLOCK
0005CB 22 00 00 00          	JSL	ALLOC_RAM	;ALLOCATE RAM
0005CF AE 00 00             	LDX	SCRN_PTR	;GET SCREEN PTR
0005D2 9D 00 00             	STA	BLK1_HANDLE,X	;POINTER TO MAP RAM BLOCK
0005D5 8D 00 00             	STA	BLK_HANDLE	;SAVE IN TEMP HANDLE
0005D8                      ;-----
0005D8                      ;COPY MAP TO RAM
0005D8 AE 00 00             	LDX	MAP_HANDLE
0005DB BD 00 00             	LDA	RAM_BLOCK0,X	;OFFSET OF AVAILABLE RAM
0005DE 8D 00 00             	STA	MAP_IN_RAM
0005E1 BD 00 00             	LDA	RAM_BLOCK0+2,X
0005E4 E2 20                	SET_A8
0005E6 8D 00 00             	STA	MAP_IN_RAM+2	;BANK OF RAM
0005E9 C2 20                	SET_A16
0005EB 20 00 00             	JSR	MAP_2_RAM	;COPY MAP INTO WORK RAM
0005EE                      ;-----
0005EE                      ;COPY BLOCK TO RAM
0005EE AE 00 00             	LDX	BLK_HANDLE
0005F1 BD 00 00             	LDA	RAM_BLOCK0,X	;OFFSET OF AVAILABLE RAM
0005F4 8D 00 00             	STA	BLK_IN_RAM
0005F7 BD 00 00             	LDA	RAM_BLOCK0+2,X
0005FA E2 20                	SET_A8
0005FC 8D 00 00             	STA	BLK_IN_RAM+2	;BANK OF RAM
0005FF C2 20                	SET_A16
000601 20 00 00             	JSR	BLK_2_RAM	;COPY BLOCK DATA TO WORK RAM
000604                      ;-----
000604 22 00 00 00          	JSL	CLR_SCRN_BUF	;CLEAR OUT THE SCRN_BUF
000608                      ;-----
000608                      ;SAVE LOCATION OF DATA AREAS
000608 AE 00 00             	LDX	SCRN_PTR3
00060B AD 00 00             	LDA	MAP_IN_RAM
00060E 9D 00 00             	STA	MAP1_IN_RAM,X	;SET ADDRESS OF MAP
000611 AD 00 00             	LDA	BLK_IN_RAM
000614 8D 00 00             	STA	BLK1_IN_RAM	;SET ADDRESS OF BLOCK
000617 E2 20                	SET_A8
000619 AD 00 00             	LDA	MAP_IN_RAM+2	;GET PAGE #
00061C 9D 00 00             	STA	MAP1_IN_RAM+2,X
00061F AD 00 00             	LDA	BLK_IN_RAM+2	;GET PAGE #
000622 9D 00 00             	STA	BLK1_IN_RAM+2,X
000625                      ;-----
000625                      ;DRAW SCREEN SIZE = 1
000625 AE 00 00             	LDX	SCRN_PTR
000628 AD 00 00             	LDA	BG1_SIZE	;GET SCREEN SIZE
00062B C9 00                	CMP	#0	;1 SCREEN ?
00062D D0 00                	BNE	@SIZE1
00062F 20 00 00             	JSR 	QUAD1	;DRAW QUAD 1
000632 4C 00 00             	JMP	IM_DONE
000635                      ;-----
000635 C9 01                @SIZE1	CMP	#1	;2 SCREENS WIDE ?
000637 D0 00                	BNE	@SIZE2
000639 20 00 00             	JSR	QUAD1	;LEFT SIDE
00063C 20 00 00             	JSR	QUAD2	;RIGHT SIDE
00063F 4C 00 00             	JMP	IM_DONE
000642                      ;-----
000642 C9 02                @SIZE2	CMP	#2	;2 SCREENS HIGH
000644 D0 00                	BNE	@SIZE3
000646 20 00 00             	JSR	QUAD1
000649 20 00 00             	JSR	QUAD2V
00064C 4C 00 00             	JMP	IM_DONE
00064F                      ;-----
00064F 20 00 00             @SIZE3 	JSR	QUAD1
000652 20 00 00             	JSR	QUAD2
000655 20 00 00             	JSR	QUAD3
000658 20 00 00             	JSR	QUAD4
00065B                      ;-----
00065B C2 30                IM_DONE	SET_AXY16
00065D AD 00 00             	LDA	SCRIPT_PTR	;GET POINTER
000660 18                   	CLC
000661 69 14 00             	ADC	#IM_END	;SKIP DATA
000664 A8                   	TAY
000665 AB                   	PLB
000666 28                   	PLP
000667 60                   	RTS
000668                      ;=====
000668                      ;DRAW QUAD 1
000668 C2 30                QUAD1	SET_AXY16
00066A AD 00 00             	LDA	MAP_STARTY	;GET START Y
00066D AE 00 00             	LDX	MAP_WIDTH	;Y x WIDTH
000670 AC 00 00             	LDY	MAP_STARTX	;GET START X
000673 20 00 00             	JSR	CALC_OFF	;CALC THE MAP_OFF
000676 20 00 00             	JSR	DRAW_MAP	;DRAW THE MAP TO SCRN_BUF
000679 A0 00 00             	LDY	#0
00067C 4C 00 00             	JMP	DMA_SCRN	;DMA THE SCRN_BUF TO VRAM
00067F                      
00067F                      ;=====
00067F                      ;DRAW QUAD 2
00067F C2 30                QUAD2	SET_AXY16
000681 AD 00 00             	LDA	MAP_STARTX	;GET START X
000684 18                   	CLC
000685 69 10 00             	ADC	#16	;1 SCREEN TO THE RIGHT
000688 A8                   	TAY
000689 AD 00 00             	LDA	MAP_STARTY	;GET START Y
00068C AE 00 00             	LDX	MAP_WIDTH	;Y x WIDTH
00068F 20 00 00             	JSR	CALC_OFF	;CALC THE MAP_OFF
000692 20 00 00             	JSR	DRAW_MAP	;DRAW THE MAP TO SCRN_BUF
000695 A0 00 04             	LDY	#$400
000698 4C 00 00             	JMP	DMA_SCRN	;DMA THE SCRN_BUF TO VRAM
00069B                      ;=====
00069B                      ;DRAW QUAD 2 VERTICAL
00069B C2 30                QUAD2V	SET_AXY16
00069D AD 00 00             	LDA	MAP_STARTY	;GET START Y
0006A0 18                   	CLC
0006A1 69 10 00             	ADC	#16	;NEXT SCREEN DOWN
0006A4 AE 00 00             	LDX	MAP_WIDTH	;Y x WIDTH
0006A7 AC 00 00             	LDY	MAP_STARTX	;GET START X
0006AA 20 00 00             	JSR	CALC_OFF	;CALC THE MAP_OFF
0006AD 20 00 00             	JSR	DRAW_MAP	;DRAW THE MAP TO SCRN_BUF
0006B0 A0 00 04             	LDY	#$400
0006B3 4C 00 00             	JMP	DMA_SCRN	;DMA THE SCRN_BUF TO VRAM
0006B6                      ;=====
0006B6                      ;DRAW QUAD 3
0006B6 C2 30                QUAD3	SET_AXY16
0006B8 AD 00 00             	LDA	MAP_STARTY	;GET START Y
0006BB 18                   	CLC
0006BC 69 10 00             	ADC	#16	;NEXT SCREEN DOWN
0006BF AE 00 00             	LDX	MAP_WIDTH	;Y x WIDTH
0006C2 AC 00 00             	LDY	MAP_STARTX	;GET START X
0006C5 20 00 00             	JSR	CALC_OFF	;CALC THE MAP_OFF
0006C8 20 00 00             	JSR	DRAW_MAP	;DRAW THE MAP TO SCRN_BUF
0006CB A0 00 08             	LDY	#$400*2
0006CE 4C 00 00             	JMP	DMA_SCRN	;DMA THE SCRN_BUF TO VRAM
0006D1                      ;=====
0006D1                      ;DRAW QUAD 4
0006D1 C2 30                QUAD4	SET_AXY16
0006D3 AD 00 00             	LDA	MAP_STARTX	;GET START X
0006D6 18                   	CLC	
0006D7 69 10 00             	ADC	#16	;ONE SCREEN OVER
0006DA A8                   	TAY
0006DB AD 00 00             	LDA	MAP_STARTY	;GET START Y
0006DE 18                   	CLC
0006DF 69 10 00             	ADC	#16	;ONE SCREEN DOWN
0006E2 AE 00 00             	LDX	MAP_WIDTH	;Y x WIDTH
0006E5 20 00 00             	JSR	CALC_OFF	;CALC THE MAP_OFF
0006E8 20 00 00             	JSR	DRAW_MAP	;DRAW THE MAP TO SCRN_BUF
0006EB A0 00 0C             	LDY	#$400*3
0006EE 4C 00 00             	JMP	DMA_SCRN	;DMA THE SCRN_BUF TO VRAM
0006F1                      
0006F1                      	MODEND
0006F1                      
0006F1                      ;------------------
0006F1                      ;MAP_2_RAM -- COPY MAP DATA TO WORK RAM
0006F1                      
0006F1                      MAP_2_RAM	MODULE
0006F1                      
0006F1 08                   	PHP
0006F2                      ;
0006F2 E2 20                	SET_A8
0006F4 9C 0B 42             	STZ	MDMAEN	;CLEAR DMA CHANNEL
0006F7 A9 00                	LDA	#$00
0006F9 8D 00 43             	STA	WDMAP0	;DMA PARAMETER DATA FOR CHANNEL 0
0006FC A9 80                	LDA	#<WMDATA	;WRITE TO WORK RAM
0006FE 8D 01 43             	STA	BADMA0
000701                      ;
000701 AD 00 00             	LDA	MAP_IN_ROM
000704 8D 02 43             	STA	A1ADMAL0	;LOW
000707 AD 00 00             	LDA	MAP_IN_ROM+1
00070A 8D 03 43             	STA	A1ADMAH0	;HIGH
00070D                      ;
00070D AD 00 00             	LDA	MAP_IN_ROM+2
000710 8D 04 43             	STA	A1ADMAB0	;BANK
000713                      ;
000713 AD 00 00             	LDA	MAP_IN_RAM
000716 8D 81 21             	STA	WMADDL	;DEST LOW
000719 AD 00 00             	LDA	MAP_IN_RAM+1
00071C 8D 82 21             	STA	WMADDM	;DEST HIGH
00071F AD 00 00             	LDA	MAP_IN_RAM+2
000722 8D 83 21             	STA	WMADDH	;DEST BANK
000725                      ;
000725 AD 00 00             	LDA	MAP_BYTES
000728 8D 05 43             	STA	DMADATL0	;LOW
00072B AD 00 00             	LDA	MAP_BYTES+1
00072E 8D 06 43             	STA	DMADATH0	;HIGH
000731                      ;
000731 A9 01                	LDA	#1
000733 8D 0B 42             	STA	MDMAEN	;START DMA
000736                      ;	
000736 28                   	PLP
000737 60                   	RTS
000738                      
000738                      	MODEND
000738                      
000738                      ;------------------
000738                      ;BLK_2_RAM -- COPY BLOCK DATA TO WORK RAM
000738                      
000738                      BLK_2_RAM	MODULE
000738                      
000738 08                   	PHP
000739                      ;
000739 E2 20                	SET_A8
00073B 9C 0B 42             	STZ	MDMAEN	;CLEAR DMA CHANNEL
00073E A9 00                	LDA	#$00
000740 8D 00 43             	STA	WDMAP0	;DMA PARAMETER DATA FOR CHANNEL 0
000743 A9 80                	LDA	#<WMDATA	;WRITE TO WORK RAM
000745 8D 01 43             	STA	BADMA0
000748                      ;
000748 AD 00 00             	LDA	BLK_IN_ROM
00074B 8D 02 43             	STA	A1ADMAL0	;LOW
00074E AD 00 00             	LDA	BLK_IN_ROM+1
000751 8D 03 43             	STA	A1ADMAH0	;HIGH
000754                      ;
000754 AD 00 00             	LDA	BLK_IN_ROM+2
000757 8D 04 43             	STA	A1ADMAB0	;BANK
00075A                      ;
00075A AD 00 00             	LDA	BLK_IN_RAM
00075D 8D 81 21             	STA	WMADDL	;DEST LOW
000760 AD 00 00             	LDA	BLK_IN_RAM+1
000763 8D 82 21             	STA	WMADDM	;DEST HIGH
000766 AD 00 00             	LDA	BLK_IN_RAM+2
000769 8D 83 21             	STA	WMADDH	;DEST BANK
00076C                      ;
00076C AD 00 00             	LDA	BLK_BYTES
00076F 8D 05 43             	STA	DMADATL0	;LOW
000772 AD 00 00             	LDA	BLK_BYTES+1
000775 8D 06 43             	STA	DMADATH0	;HIGH
000778                      ;
000778 A9 01                	LDA	#1
00077A 8D 0B 42             	STA	MDMAEN	;START DMA
00077D                      ;	
00077D 28                   	PLP
00077E 60                   	RTS
00077F                      
00077F                      	MODEND
00077F                      
00077F                      ;------------------
00077F                      ;CALC_OFF -- CALCULATE THE MAP_OFF FOR THIS X,Y POSITION
00077F                      
00077F                      CALC_OFF	MODULE
00077F                      
00077F E2 30                	SET_AXY8
000781 8D 02 42             	STA	WRMPYA	;SET MULTIPLICAND
000784 8E 03 42             	STX	WRMPYB	;SET MULTIPLIER
000787 EA                   	NOP
000788 EA                   	NOP
000789 EA                   	NOP
00078A EA                   	NOP
00078B EA                   	NOP		;WAIT 8 CYCLES
00078C AD 17 42             	LDA	RDMPYH	;GET HIGH
00078F EB                   	XBA
000790 AD 16 42             	LDA	RDMPYL	;GET LOW
000793 C2 30                	SET_AXY16
000795 8D 00 00             	STA	MAP_OFF	;SAVE IT
000798 98                   	TYA		;GET START X
000799 18                   	CLC
00079A 6D 00 00             	ADC	MAP_OFF	;ADD MAP X
00079D 8D 00 00             	STA	MAP_OFF	;SAVE IT
0007A0 60                   	RTS
0007A1                      
0007A1                      	MODEND
0007A1                      
0007A1                      
0007A1                      ;------------------;------------------
0007A1                      ;DRAW_MAP -- DRAW A 32 x 32 AREA FROM THE MAP INTO THE SCRN_BUF
0007A1                      
0007A1                      DRAW_MAP	MODULE
0007A1                      
0007A1 08                   	PHP
0007A2                      ;-----
0007A2 E2 20                	SET_A8
0007A4 A9 00                	LDA	#^SCRN_BUF
0007A6 48                   	PHA
0007A7 AB                   	PLB    		;SET SCRN_BUF PAGE
0007A8 C2 20                	SET_A16
0007AA                      ;
0007AA A9 10 00             	LDA    	#16
0007AD 8D 00 00             	STA	SCRN_HEIGTH	;SET COUNTER
0007B0 A2 00 00             	LDX	#0	;START NEW ROW
0007B3                      ;
0007B3 A9 10 00             @LOOP3	LDA	#16	;WIDTH OF ONE SCREEN
0007B6 8D 00 00             	STA	SCRN_WIDTH	;SET COUNTER
0007B9 AC 00 00             	LDY	MAP_OFF	;FROM MAP
0007BC                      ;
0007BC B7 00                @LOOP4	LDA	[MAP_IN_RAM],Y	;GET A MAP REFERENCE
0007BE C8                   	INY
0007BF C8                   	INY
0007C0 5A                   	PHY
0007C1 A8                   	TAY
0007C2 29 00 3C             	AND	#$3C00
0007C5 8D 00 00             	STA	MAP_PC	;SAVE PRIORITY AND COLOR
0007C8 98                   	TYA
0007C9 29 00 C0             	AND	#$C000
0007CC 8D 00 00             	STA	MAP_FB	;SAVE FLIP BITS
0007CF 98                   	TYA
0007D0 29 FF 03             	AND	#$03FF	;JUST INDEX DATA
0007D3 0A                   	ASL
0007D4 0A                   	ASL
0007D5 0A                   	ASL
0007D6 A8                   	TAY		;POINT INTO BLOCK DATA
0007D7 B7 00                	LDA	[BLK_IN_RAM],Y
0007D9 0D 00 00             	ORA	MAP_PC	;ADD PRIORITY AND COLOR
0007DC 4D 00 00             	EOR	MAP_FB	;ADD FLIP BITS
0007DF C8                   	INY
0007E0 C8                   	INY
0007E1 8D 00 00             	STA	T0	;SAVE TILE 0
0007E4 B7 00                	LDA	[BLK_IN_RAM],Y
0007E6 0D 00 00             	ORA	MAP_PC	;ADD PRIORITY AND COLOR
0007E9 4D 00 00             	EOR	MAP_FB	;ADD FLIP BITS
0007EC C8                   	INY
0007ED C8                   	INY
0007EE 8D 00 00             	STA	T1	;SAVE TILE 1
0007F1 B7 00                	LDA	[BLK_IN_RAM],Y
0007F3 0D 00 00             	ORA	MAP_PC	;ADD PRIORITY AND COLOR
0007F6 4D 00 00             	EOR	MAP_FB	;ADD FLIP BITS
0007F9 C8                   	INY
0007FA C8                   	INY
0007FB 8D 00 00             	STA	T2	;SAVE TILE 2
0007FE B7 00                	LDA	[BLK_IN_RAM],Y
000800 0D 00 00             	ORA	MAP_PC	;ADD PRIORITY AND COLOR
000803 4D 00 00             	EOR	MAP_FB	;ADD FLIP BITS
000806 8D 00 00             	STA	T3	;SAVE TILE 3
000809                      ;-----
000809                      ;TEST FLIP BITS AND ADJUST
000809 AD 00 00             	LDA	MAP_FB	;GET FLIP BITS
00080C 89 00 40             	BIT	#$4000	;X FLIP ?
00080F F0 00                	BEQ	@NO_X_FLIP
000811 AD 00 00             	LDA	T0
000814 AC 00 00             	LDY	T1
000817 8D 00 00             	STA	T1
00081A 8C 00 00             	STY	T0	;FLIP T0,T1
00081D AD 00 00             	LDA	T2
000820 AC 00 00             	LDY	T3
000823 8D 00 00             	STA	T3
000826 8C 00 00             	STY	T2	;FLIP T2,T3
000829                      ;
000829 AD 00 00             @NO_X_FLIP	LDA	MAP_FB	;GET FLIP BITS
00082C 89 00 80             	BIT	#$8000	;Y FLIP ?
00082F F0 00                	BEQ	@NO_Y_FLIP
000831 AD 00 00             	LDA	T0
000834 AC 00 00             	LDY	T2
000837 8D 00 00             	STA	T2
00083A 8C 00 00             	STY	T0	;FLIP T0,T2
00083D AD 00 00             	LDA	T1
000840 AC 00 00             	LDY	T3
000843 8D 00 00             	STA	T3
000846 8C 00 00             	STY	T1	;FLIP T1,T3
000849 7A                   @NO_Y_FLIP	PLY
00084A                      ;-----
00084A                      ;NOW STORE IT IN THE CORRECT LOCATION IN THE SCRN_BUF
00084A AD 00 00             	LDA	T0
00084D 9D 00 00             	STA	SCRN_BUF,X	;SAVE TOP LEFT TILE
000850 AD 00 00             	LDA	T1
000853 9D 00 00             	STA	SCRN_BUF+2,X	;SAVE TOP RIGHT TILE
000856 AD 00 00             	LDA	T2
000859 9D 00 00             	STA	SCRN_BUF+64,X	;SAVE BOTTOM LEFT
00085C AD 00 00             	LDA	T3
00085F 9D 00 00             	STA	SCRN_BUF+66,X	;SAVE BOTTOM RIGHT
000862 18                   	CLC
000863 8A                   	TXA
000864 69 04 00             	ADC	#4	;NEXT BLOCK
000867 AA                   	TAX
000868                      ;-----
000868 CE 00 00             	DEC	SCRN_WIDTH
00086B F0 00                	BEQ	@ROW_DONE
00086D 4C 00 00             	JMP	@LOOP4
000870                      ;
000870 CE 00 00             @ROW_DONE	DEC	SCRN_HEIGTH
000873 F0 00                	BEQ	@MAP_DONE
000875 18                   	CLC
000876 AD 00 00             	LDA	MAP_OFF	;GET START OF THIS ROW
000879 6D 00 00             	ADC	MAP_WIDTH
00087C 6D 00 00             	ADC	MAP_WIDTH	;NEXT MAP ROW
00087F 8D 00 00             	STA	MAP_OFF
000882 8A                   	TXA
000883 18                   	CLC
000884 69 40 00             	ADC	#64	;SKIP 2ND ROWS
000887 AA                   	TAX
000888 4C 00 00             	JMP	@LOOP3
00088B                      @MAP_DONE
00088B 28                   	PLP
00088C 60                   	RTS
00088D                      
00088D                      	MODEND
00088D                      
00088D                      ;------------------
00088D                      ;DMA_SCRN -- DMA THE SCRN_BUF OVER TO THE VRAM
00088D                      
00088D                      DMA_SCRN	MODULE
00088D                      
00088D 08                   	PHP
00088E E2 20                	SET_A8
000890 A9 00                	LDA	#0
000892 48                   	PHA
000893 AB                   	PLB		;RESET BANK FOR TRANSFER
000894 9C 0B 42             	STZ	MDMAEN	;CLEAR DMA CHANNEL
000897 A9 01                	LDA	#$01
000899 8D 00 43             	STA	WDMAP0	;DMA PARAMETER DATA FOR CHANNEL 0
00089C A9 18                	LDA	#<WVMDATAL	;WRITE TO HERE
00089E 8D 01 43             	STA	BADMA0
0008A1                      ;
0008A1 A9 00                	LDA	#<SCRN_BUF	;GET ADDRESS OF SOURCE
0008A3 8D 02 43             	STA	A1ADMAL0	;LOW
0008A6 A9 00                	LDA	#>SCRN_BUF
0008A8 8D 03 43             	STA	A1ADMAH0	;HIGH
0008AB A9 00                	LDA	#^SCRN_BUF	;GET DATA BANK OF SOURCE
0008AD 8D 04 43             	STA	A1ADMAB0	;BANK
0008B0                      ;
0008B0 C2 20                	SET_A16
0008B2 AE 00 00             	LDX	SCRN_PTR
0008B5 98                   	TYA
0008B6 18                   	CLC
0008B7 7D 00 00             	ADC	BG1_SC,X	;MAKE DEST ADDRESS IN VRAM
0008BA 8D 16 21             	STA	VMADDL	;SET VRAM WRITE ADDRESS
0008BD A9 00 08             	LDA	#2048	;# OF BYTES TO SEND
0008C0 E2 20                	SET_A8
0008C2 8D 05 43             	STA	DMADATL0	;LOW
0008C5 EB                   	XBA
0008C6 8D 06 43             	STA	DMADATH0	;HIGH
0008C9                      ;
0008C9 A9 01                	LDA	#1
0008CB 8D 0B 42             	STA	MDMAEN	;START DMA
0008CE 28                   	PLP
0008CF 60                   	RTS
0008D0                      
0008D0                      	MODEND
0008D0                      
0008D0                      ;------------------
0008D0                      ;SET_PLAYER -- SET THE PLAYER'S STARTING X,Y AND SET SCROLL VALUES
0008D0                      
0008D0                      SET_PLAYER	MODULE
0008D0                      
0008D0 08                   	PHP
0008D1 C2 30                	SET_AXY16
0008D3 8C 00 00             	STY	SCRIPT_PTR	;SAVE POINTER
0008D6                      ;-----
0008D6 B9 00 00             	LDA	P_X,Y	;GET X
0008D9 8D 00 00             	STA	PLAYER_X
0008DC 38                   	SEC
0008DD E9 80 00             	SBC	#128
0008E0 8D 00 00             	STA	MAP1_SCRLX
0008E3 8D 00 00             	STA	MAP2_SCRLX
0008E6 8D 00 00             	STA	MAP3_SCRLX
0008E9 E2 20                	SET_A8
0008EB 8D 0D 21             	STA	BG1HOFS	;LOW BYTE
0008EE EB                   	XBA
0008EF 8D 0D 21             	STA	BG1HOFS	;HIGH BYTE
0008F2 EB                   	XBA
0008F3 8D 0F 21             	STA	BG2HOFS	;LOW BYTE
0008F6 EB                   	XBA
0008F7 8D 0F 21             	STA	BG2HOFS	;HIGH BYTE
0008FA EB                   	XBA
0008FB 8D 11 21             	STA	BG3HOFS	;LOW BYTE
0008FE EB                   	XBA
0008FF 8D 11 21             	STA	BG3HOFS	;HIGH BYTE
000902 C2 20                	SET_A16
000904                      ;
000904 B9 02 00             	LDA	P_Y,Y	;GET Y
000907 8D 00 00             	STA	PLAYER_Y
00090A 38                   	SEC
00090B E9 80 00             	SBC	#128
00090E 8D 00 00             	STA	MAP1_SCRLY
000911 8D 00 00             	STA	MAP2_SCRLY
000914 8D 00 00             	STA	MAP3_SCRLY
000917 E2 20                	SET_A8
000919 8D 0E 21             	STA	BG1VOFS	;LOW BYTE
00091C EB                   	XBA
00091D 8D 0E 21             	STA	BG1VOFS	;HIGH BYTE
000920 EB                   	XBA
000921 8D 10 21             	STA	BG2VOFS	;LOW BYTE
000924 EB                   	XBA
000925 8D 10 21             	STA	BG2VOFS	;HIGH BYTE
000928 EB                   	XBA
000929 8D 12 21             	STA	BG3VOFS	;LOW BYTE
00092C EB                   	XBA
00092D 8D 12 21             	STA	BG3VOFS	;HIGH BYTE
000930 C2 20                	SET_A16
000932                      ;-----
000932 18                   	CLC
000933 AD 00 00             	LDA	SCRIPT_PTR
000936 69 04 00             	ADC	#PXY_END
000939 8D 00 00             	STA	SCRIPT_PTR
00093C A8                   	TAY
00093D 28                   	PLP
00093E 60                   	RTS
00093F                      
00093F                      	MODEND
00093F                      
00093F                      ;------------------
00093F                      ;DO_CLR_BKGD -- CLEAR A BACKGROUND IN VRAM
00093F                      
00093F                      ;-----
00093F                      
00093F 00 00                ZERO_WORD	DW	0	;USED FOR CLEARING VRAM
000941                      
000941                      ;-----
000941                      
000941                      DO_CLR_BKGD	MODULE
000941                      
000941 08                   	PHP
000942                      ;
000942 C2 20                	SET_A16	
000944 A9 00 00             	LDA	#0	;CLEAR HIGH BYTE
000947 E2 20                	SET_A8
000949 B9 00 00             	LDA	$0,Y	;GET SCREEN # TO CLEAR
00094C C8                   	INY
00094D C2 20                	SET_A16
00094F 3A                   	DEC	A	;MAKE 0 - 3 FROM 1 - 4
000950 0A                   	ASL	A	;WORD PTR
000951 AA                   	TAX
000952                      ;
000952 E2 20                	SET_A8
000954 9C 0B 42             	STZ	MDMAEN	;CLEAR DMA CHANNEL
000957 A9 09                	LDA	#$09	;FIXED SOURCE TO VRAM
000959 8D 00 43             	STA	WDMAP0	;DMA PARAMETER DATA FOR CHANNEL 0
00095C A9 18                	LDA	#<WVMDATAL	;WRITE TO HERE
00095E 8D 01 43             	STA	BADMA0
000961                      ;
000961 A9 00                	LDA	#<ZERO_WORD	;GET ADDRESS OF SOURCE
000963 8D 02 43             	STA	A1ADMAL0	;LOW
000966 A9 00                	LDA	#>ZERO_WORD
000968 8D 03 43             	STA	A1ADMAH0	;HIGH
00096B A9 00                	LDA	#^ZERO_WORD	;GET DATA BANK OF SOURCE
00096D 8D 04 43             	STA	A1ADMAB0	;BANK
000970                      ;
000970 C2 20                	SET_A16
000972 BD 00 00             	LDA	BG1_SC,X	;MAKE DEST ADDRESS IN VRAM
000975 8D 16 21             	STA	VMADDL	;SET VRAM WRITE ADDRESS
000978 A9 00 08             	LDA	#(32*32)*2	;# OF BYTES TO SEND
00097B E2 20                	SET_A8
00097D 8D 05 43             	STA	DMADATL0	;LOW
000980 EB                   	XBA
000981 8D 06 43             	STA	DMADATH0	;HIGH
000984                      ;
000984 A9 01                	LDA	#1
000986 8D 0B 42             	STA	MDMAEN	;START DMA
000989                      ;
000989 28                   	PLP
00098A 60                   	RTS
00098B                      
00098B                      
00098B                      	MODEND
00098B                      
00098B                      ;------------------
00098B                      ;DO_CLR_VRAM -- CLEAR ALL OF VRAM
00098B                      
00098B                      DO_CLR_VRAM	MODULE
00098B                      
00098B 08                   	PHP
00098C                      ;
00098C E2 20                	SET_A8
00098E 9C 0B 42             	STZ	MDMAEN	;CLEAR DMA CHANNEL
000991 A9 09                	LDA	#$09	;FIXED SOURCE TO VRAM
000993 8D 00 43             	STA	WDMAP0	;DMA PARAMETER DATA FOR CHANNEL 0
000996 A9 18                	LDA	#<WVMDATAL	;WRITE TO HERE
000998 8D 01 43             	STA	BADMA0
00099B                      ;
00099B A9 00                	LDA	#<ZERO_WORD	;GET ADDRESS OF SOURCE
00099D 8D 02 43             	STA	A1ADMAL0	;LOW
0009A0 A9 00                	LDA	#>ZERO_WORD
0009A2 8D 03 43             	STA	A1ADMAH0	;HIGH
0009A5 A9 00                	LDA	#^ZERO_WORD	;GET DATA BANK OF SOURCE
0009A7 8D 04 43             	STA	A1ADMAB0	;BANK
0009AA                      ;
0009AA C2 20                	SET_A16
0009AC AD 00 00             	LDA	0	;MAKE DEST ADDRESS IN VRAM
0009AF 8D 16 21             	STA	VMADDL	;SET VRAM WRITE ADDRESS
0009B2 A9 FF FF             	LDA	#-1	;# OF BYTES TO SEND
0009B5 E2 20                	SET_A8
0009B7 8D 05 43             	STA	DMADATL0	;LOW
0009BA EB                   	XBA
0009BB 8D 06 43             	STA	DMADATH0	;HIGH
0009BE                      ;
0009BE A9 01                	LDA	#1
0009C0 8D 0B 42             	STA	MDMAEN	;START DMA
0009C3                      ;
0009C3 28                   	PLP
0009C4 60                   	RTS
0009C5                      
0009C5                      
0009C5                      	MODEND
0009C5                      
0009C5                      ;------------------
0009C5                      ;------------------
0009C5                      ;------------------
0009C5                      ;------------------
0009C5                      ;------------------
0009C5                      ;------------------
0009C5                      ;------------------
0009C5                      ;------------------
0009C5                      ;------------------
0009C5                      ;------------------
0009C5                      
0009C5                      	INCLUDE	GG_DMA.658	;DMA DATA AROUND
0009C5                      ;------------------
0009C5                      ;------------------
0009C5                      ;DO_OAM_DMA -- DMA THE OAM DATA TO OAM RAM
0009C5                      
0009C5                      DO_OAM_DMA	MODULE
0009C5                      
0009C5 08                   	PHP
0009C6                      ;-----
0009C6 E2 20                	SET_A8
0009C8 AD 00 00             	LDA	OAM_DMA_FLAG	;NEED TO DO OAM DMA ?
0009CB C9 00                	CMP	#0
0009CD D0 00                	BNE	@DMA_NOW
0009CF 4C 00 00             	JMP	@DMA_DONE
0009D2                      ;
0009D2 9C 02 21             @DMA_NOW	STZ	OAMADDL	;WRITE TO $0 IN OAM
0009D5 9C 03 21             	STZ	OAMADDH
0009D8 9C 0B 42             	STZ	MDMAEN	;CLEAR DMA CHANNEL
0009DB A9 00                	LDA	#$00
0009DD 8D 00 43             	STA	WDMAP0	;DMA PARAMETER DATA FOR CHANNEL 0
0009E0 A9 04                	LDA	#<OAMDATAW	;WRITE TO HERE
0009E2 8D 01 43             	STA	BADMA0
0009E5                      ;
0009E5 A9 00                	LDA	#<OAM_DATA	;ADDRESS TO READ FROM
0009E7 8D 02 43             	STA	A1ADMAL0	;LOW
0009EA A9 00                	LDA	#>OAM_DATA
0009EC 8D 03 43             	STA	A1ADMAH0	;HIGH
0009EF A9 00                	LDA	#^OAM_DATA
0009F1 8D 04 43             	STA	A1ADMAB0	;BANK
0009F4                      ;
0009F4 A9 1E                	LDA	#<542	;# OF BYTES TO TRANSFER
0009F6 8D 05 43             	STA	DMADATL0	;LOW
0009F9 A9 02                	LDA	#>542
0009FB 8D 06 43             	STA	DMADATH0	;HIGH
0009FE                      ;
0009FE A9 01                	LDA	#1
000A00 8D 0B 42             	STA	MDMAEN	;START DMA
000A03                      ;-----
000A03 9C 00 00             @DMA_DONE	STZ	OAM_DMA_FLAG	;CLEAR IT NOW
000A06 28                   	PLP
000A07 60                   	RTS
000A08                      
000A08                      	MODEND
000A08                      
000A08                      ;------------------
000A08                      ;DO_VRAM_DMA -- DMA DATA TO VRAM
000A08                      
000A08                      DO_VRAM_DMA	MODULE
000A08                       
000A08 08                   	PHP
000A09                      ;-----
000A09 E2 20                	SET_A8
000A0B AD 00 00             	LDA	VRAM_DMA_FLAG	;NEED TO DO VRAM DMA ?
000A0E C9 00                	CMP	#0
000A10 D0 00                	BNE	@DMA_NOW
000A12 28                   @DMA_DONE	PLP
000A13 60                   	RTS
000A14                      ;-----
000A14                      ;LOOK AT FIRST BYTE TO TELL IF IT'S A SINGLE DMA LIST
000A14                      ;OR POINTER TO A SPRITE DMA LIST
000A14 C2 10                @DMA_NOW	SET_XY16
000A16 BD 00 00             	LDA	DMA_HEAP,X	;GET COMMAND
000A19 C9 00                	CMP	#0
000A1B F0 00                	BEQ	@DMA_DONE
000A1D C9 01                	CMP	#1	;A SPRITE DMA LIST ?
000A1F F0 00                	BEQ	SPRITE_DMA
000A21                      ;-----
000A21 BD 00 00             SINGLE_DMA	LDA	DMA_HEAP+1,X	;GET VMA_INC VALUE
000A24 8D 15 21             	STA	VMAINC
000A27 A9 01                             	LDA	#$01
000A29 8D 00 43             	STA	WDMAP0	;DMA PARAMETER DATA FOR CHANNEL 0
000A2C A9 18                	LDA	#<WVMDATAL	;WRITE TO HERE
000A2E 8D 01 43             	STA	BADMA0
000A31 C2 20                	SET_A16
000A33 BD 00 00             	LDA	DMA_HEAP+2,X	;GET OFFSET OF DATA
000A36 E2 20                	SET_A8
000A38 8D 02 43             	STA	A1ADMAL0	;LOW
000A3B EB                   	XBA
000A3C 8D 03 43             	STA	A1ADMAH0	;HIGH
000A3F BD 00 00             	LDA	DMA_HEAP+4,X	;GET SOURCE BANK
000A42 8D 04 43             	STA	A1ADMAB0	;BANK
000A45 C2 20                	SET_A16
000A47 BD 00 00             	LDA	DMA_HEAP+5,X	;GET DEST
000A4A 8D 16 21             	STA	VMADDL
000A4D BD 00 00             	LDA	DMA_HEAP+7,X	;GET # OF BYTES OF DATA
000A50 E2 20                	SET_A8
000A52 8D 05 43             	STA	DMADATL0	;LOW
000A55 EB                   	XBA
000A56 8D 06 43             	STA	DMADATH0	;HIGH
000A59 A9 01                	LDA	#1
000A5B 8D 0B 42             	STA	MDMAEN	;START DMA
000A5E C2 20                	SET_A16
000A60 8A                   	TXA
000A61 18                   	CLC
000A62 69 09 00             	ADC	#9
000A65 4C 00 00             	JMP	@DMA_NOW	;DO NEXT IN HEAP
000A68                      ;-----
000A68 A9 80 00             SPRITE_DMA	LDA	#$80
000A6B 8D 15 21             	STA	VMAINC
000A6E A9 01 00             	LDA	#1
000A71 48                   	PHA
000A72 AB                   	PLB
000A73                      
000A73 C2 30                	SET_AXY16
000A75 AC 00 00             	LDY	DMA_LIST
000A78 E2 20                	SET_A8
000A7A B1 00                	LDA	(FRAME_ADDR),Y	;GET # OF DMA TRANSFERS TO DO
000A7C                      
000A7C 8D 00 00             	STA	DMA_TOTAL
000A7F C8                   	INY
000A80                      ;
000A80 E2 20                @DMA_LP	SET_A8
000A82                      
000A82 9C 0B 42             	STZ	MDMAEN	;CLEAR DMA CHANNEL
000A85                      
000A85 A9 01                	LDA	#$01
000A87 8D 00 43             	STA	WDMAP0	;DMA PARAMETER DATA FOR CHANNEL 0
000A8A                      
000A8A A9 18                	LDA	#<WVMDATAL	;WRITE TO HERE
000A8C 8D 01 43             	STA	BADMA0
000A8F                      
000A8F C2 20                	SET_A16
000A91 B1 00                	LDA	(FRAME_ADDR),Y	;GET OFFSET OF DATA IN CHR FILE
000A93 C8                   	INY
000A94 C8                   	INY
000A95                      
000A95                      ;	CLC
000A95                      ;	ADC	#<CHR1
000A95                      
000A95 E2 20                	SET_A8
000A97 8D 02 43             	STA	A1ADMAL0	;LOW
000A9A EB                   	XBA
000A9B 8D 03 43             	STA	A1ADMAH0	;HIGH
000A9E A9 01                	LDA	#1
000AA0 8D 04 43             	STA	A1ADMAB0	;BANK
000AA3                      
000AA3 C2 20                	SET_A16
000AA5 B1 00                	LDA	(FRAME_ADDR),Y	;GET DEST
000AA7 18                   	CLC
000AA8 69 00 20             	ADC	#$2000
000AAB 8D 16 21             	STA	VMADDL
000AAE C8                   	INY
000AAF C8                   	INY
000AB0                      
000AB0 C2 20                     	SET_A16
000AB2 B1 00                	LDA	(FRAME_ADDR),Y	;GET # OF BYTES OF DATA
000AB4 C8                   	INY
000AB5 C8                   	INY
000AB6                      
000AB6 E2 20                	SET_A8
000AB8 8D 05 43             	STA	DMADATL0	;LOW
000ABB EB                   	XBA
000ABC 8D 06 43             	STA	DMADATH0	;HIGH
000ABF                      
000ABF E2 20                	SET_A8
000AC1 A9 01                	LDA	#1
000AC3 8D 0B 42             	STA	MDMAEN	;START DMA
000AC6                      
000AC6 AD 00 00             	LDA	DMA_TOTAL
000AC9 38                   	SEC
000ACA E9 01                	SBC	#1
000ACC 8D 00 00             	STA	DMA_TOTAL
000ACF C9 00                	CMP	#$00
000AD1 D0 00                	BNE	@DMA_LP
000AD3                      ;-----
000AD3 28                   	PLP
000AD4 60                   	RTS
000AD5                      
000AD5                      	MODEND
000AD5                      
000AD5                      ;------------------
000AD5                      ;DO_CGRAM_DMA -- DMA COLOR DATA TO PALETTE
000AD5                      
000AD5                      DO_CGRAM_DMA	MODULE
000AD5                      
000AD5 08                   	PHP
000AD6                      ;-----
000AD6 E2 20                	SET_A8
000AD8 AD 00 00             	LDA	CG_DMA_FLAG	;NEED TO DO CG-RAM DMA ?
000ADB C9 00                	CMP	#0
000ADD D0 00                	BNE	@DMA_NOW
000ADF 4C 00 00             	JMP	@DMA_DONE
000AE2                      ;
000AE2 9C 0B 42             @DMA_NOW	STZ	MDMAEN	;CLEAR DMA CHANNEL
000AE5 A9 00                	LDA	#$00
000AE7 8D 00 43             	STA	WDMAP0	;DMA PARAMETER DATA FOR CHANNEL 0
000AEA A9 22                	LDA	#<WCGDATA	;WRITE TO HERE
000AEC 8D 01 43             	STA	BADMA0
000AEF                      ;
000AEF AD 00 00             	LDA	PAL_IN_RAM	;GET ADDRESS OF PALETTE
000AF2 8D 02 43             	STA	A1ADMAL0	;LOW
000AF5 AD 00 00             	LDA	PAL_IN_RAM+1
000AF8 8D 03 43             	STA	A1ADMAH0	;HIGH
000AFB                      ;
000AFB AD 00 00             	LDA	PAL_IN_RAM+2	;GET DATA BANK OF PALETTE
000AFE 8D 04 43             	STA	A1ADMAB0	;BANK
000B01                      ;
000B01 AD 00 00             	LDA	PAL_IN_CGRAM	;GET DEST ADDRESS IN PALETTE
000B04 8D 21 21             	STA	CGADD	;SET WRITE ADDRESS
000B07                      ;
000B07 AD 00 00             	LDA	PAL_SIZE	;# OF BYTES TO SEND
000B0A 8D 05 43             	STA	DMADATL0	;LOW
000B0D AD 00 00             	LDA	PAL_SIZE+1
000B10 8D 06 43             	STA	DMADATH0	;HIGH
000B13                      ;
000B13 A9 01                	LDA	#1
000B15 8D 0B 42             	STA	MDMAEN	;START DMA
000B18                      ;-----
000B18 28                   @DMA_DONE	PLP
000B19 60                   	RTS	
000B1A                      
000B1A                      	MODEND
000B1A                      
000B1A                      ;------------------
000B1A                      ;------------------
000B1A                      ;------------------
000B1A                      ;------------------
000B1A                      ;------------------
000B1A                      ;------------------
000B1A                      
000B1A                      	INCLUDE	GG_MAPS.658	;DRAW MAPS
000B1A                      
000B1A                      ;------------------
000B1A                      ;------------------
000B1A                      
000B1A                      	INCLUDE	GG_JOYHD.658	;JOYPAD HANDLER
000B1A                      ;------------------
000B1A                      ;
000B1A                      ;GG_JOYHD.658
000B1A                      ;
000B1A                      ;  THE JOYPAD HANDLER LOOKS FOR CERTIAN JOYPAD INPUT AND EXECUTES ROUTINES
000B1A                      ;IN RESPONSE TO THE INPUTS. THE VARIABLE JP_LIST CONTAINS THE ADDRESS OF
000B1A                      ;THE JOYPAD LIST. THE JOYPAD LIST CONSISTS OF A BUTTON PRESS CODE AND
000B1A                      ;THE ADDRESS OF THE ROUTINE TO EXECUTE IF THE INPUT OCCURED.
000B1A                      ;
000B1A                      ;
000B1A                      ;------------------
000B1A                      ;JOYPAD EQUATES
000B1A                      
000B1A =00000080            JOY_ABUTT	EQU	$0080
000B1A =00008000            JOY_BBUTT	EQU	$8000
000B1A =00000040            JOY_XBUTT	EQU	$0040
000B1A =00004000            JOY_YBUTT	EQU	$4000
000B1A =00000020            JOY_LBUTT	EQU	$0020
000B1A =00000010            JOY_RBUTT	EQU	$0010
000B1A =00001000            JOY_START	EQU	$1000
000B1A =00002000            JOY_SELECT	EQU	$2000
000B1A =00000800            JOY_UP	EQU	$0800
000B1A =00000400            JOY_DOWN	EQU	$0400
000B1A =00000200            JOY_LEFT	EQU	$0200
000B1A =00000100            JOY_RIGHT	EQU	$0100
000B1A                      
000B1A                      ;------------------
000B1A                      
000B1A                      	SECTION	GG_CODE,?	;PAGE00_GROUP
000B1A                      
000B1A                      ;------------------
000B1A                      ;JOYPAD LISTS
000B1A                      
000B1A 00 10 00 00 00       TITLE_JPL	JP_TEST	JOY_START,TITLE_EXIT	;PRESS START TO EXIT TITLE
000B1F 00 01 00 00 00       	JP_TEST	JOY_RIGHT,MOVE_RIGHT
000B24 00 02 00 00 00       	JP_TEST	JOY_LEFT,MOVE_LEFT
000B29 00 08 00 00 00       	JP_TEST	JOY_UP,MOVE_UP
000B2E 00 04 00 00 00       	JP_TEST	JOY_DOWN,MOVE_DOWN
000B33 00 00                	JP_END
000B35                      
000B35 00 10 00 00 00       LVL1_JPL	JP_TEST	JOY_START,LVL1_EXIT	;PRESS START TO EXIT LEVEL 1
000B3A 00 01 00 00 00       	JP_TEST	JOY_RIGHT,MOVE_RIGHT
000B3F 00 02 00 00 00       	JP_TEST	JOY_LEFT,MOVE_LEFT
000B44 00 08 00 00 00       	JP_TEST	JOY_UP,MOVE_UP
000B49 00 04 00 00 00       	JP_TEST	JOY_DOWN,MOVE_DOWN
000B4E 00 00                	JP_END
000B50                      
000B50 00 10 00 00 00       LVL2_JPL	JP_TEST	JOY_START,LVL2_EXIT	;PRESS START TO EXIT LEVEL 2
000B55 00 01 00 00 00       	JP_TEST	JOY_RIGHT,MOVE_RIGHT
000B5A 00 02 00 00 00       	JP_TEST	JOY_LEFT,MOVE_LEFT
000B5F 00 08 00 00 00       	JP_TEST	JOY_UP,MOVE_UP
000B64 00 04 00 00 00       	JP_TEST	JOY_DOWN,MOVE_DOWN
000B69 00 00                	JP_END
000B6B                      
000B6B                      
000B6B                      
000B6B                      ;------------------
000B6B                      ;JP_HANDLER -- LOOK FOR INPUT AND EXECUTE ROUTINES
000B6B                      
000B6B                      JP_HANDLER	MODULE
000B6B                      
000B6B 08                   	PHP
000B6C 8B                   	PHB
000B6D                      ;-----
000B6D E2 20                	SET_A8
000B6F C2 10                	SET_XY16
000B71 AE 00 00             	LDX	JP_LIST	;GET OFFSET
000B74 AD 00 00             	LDA	JP_LIST+2	;GET DATA BANK
000B77 48                   	PHA
000B78 AB                   	PLB
000B79 C2 20                	SET_A16
000B7B BD 00 00             @LOOP	LDA	$0,X	;GET TEST VALUE
000B7E C9 00 00             	CMP	#0
000B81 F0 00                	BEQ	JP_DONE
000B83 2C 00 00             	BIT	JOY1_DATA	;TEST INPUT DATA
000B86 D0 00                	BNE	JP_DOIT
000B88 8A                   	TXA
000B89 18                   	CLC
000B8A 69 05 00             	ADC	#5	;SKIP TO NEXT JP CMD
000B8D AA                   	TAX
000B8E 4C 00 00             	JMP	@LOOP
000B91                      ;-----
000B91 E8                   JP_DOIT	INX
000B92 E8                   	INX
000B93 DA                   	PHX		;SAVE X ADDRESS FOR LATER
000B94 08                   	PHP
000B95 8B                   	PHB
000B96 4B                   	PHK		;PUSH PROGRAM BANK
000B97 62 00 00             	PER	@RETURN-1	;SAVE RETURN ADDRESS
000B9A                      ;
000B9A E2 20                	SET_A8
000B9C BD 02 00             	LDA	$2,X	;GET BANK
000B9F 48                   	PHA		;PUSH PROGRAM BANK ADDRESS
000BA0 C2 20                	SET_A16
000BA2 BD 00 00             	LDA	$0,X	;GET ADDRESS OF ROUTINE
000BA5 38                   	SEC
000BA6 E9 01 00             	SBC	#1
000BA9 48                   	PHA		;PUSH ADDRESS
000BAA 6B                   	RTL		;GO THERE NOW
000BAB                      ;-----
000BAB                      @RETURN
000BAB AB                   	PLB
000BAC 28                   	PLP
000BAD 68                   	PLA
000BAE 18                   	CLC
000BAF 69 03 00             	ADC	#3	;
000BB2 AA                   	TAX
000BB3 4C 00 00             	JMP	@LOOP
000BB6                      ;-----
000BB6 AB                   JP_DONE	PLB
000BB7 28                   	PLP
000BB8 6B                   	RTL
000BB9                      
000BB9                      	MODEND
000BB9                      
000BB9                      ;------------------
000BB9                      ;READ_JOYPAD -- READ THE JOYPAD
000BB9                      
000BB9                      READ_JOYPAD	MODULE
000BB9                      
000BB9 08                   	PHP
000BBA C2 20                	SET_A16
000BBC AD 00 00             	LDA	JOY1_DATA
000BBF 8D 00 00             	STA	OLD1_DATA		;LAST INPUT
000BC2 E2 20                	SET_A8
000BC4                      
000BC4 AD 12 42             RJ_AGAIN	LDA	HVBJOY
000BC7 89 01                	BIT	#$01
000BC9 D0 00                	BNE	RJ_AGAIN
000BCB                      ;
000BCB AD 19 42             	LDA	JOY1H
000BCE EB                   	XBA
000BCF AD 18 42             	LDA	JOY1L
000BD2 C2 20                	SET_A16
000BD4 8D 00 00             	STA	JOY1_DATA		;RAW DATA
000BD7                      ;-----
000BD7                      ;NOW CREATE THE DEBOUNCED DATA
000BD7 4D 00 00             	EOR	OLD1_DATA		;MASK WITH LAST INPUT
000BDA 2D 00 00             	AND	JOY1_DATA		;KEEP ONLY NEW INPUT
000BDD 8D 00 00             	STA	DB1_DATA		;SAVE DEBOUNCED DATA
000BE0                      ;
000BE0 28                   	PLP
000BE1 6B                   	RTL
000BE2                      
000BE2                      	MODEND
000BE2                      ;------------------
000BE2                      ;------------------
000BE2                      ;------------------
000BE2                      ;------------------
000BE2                      ;------------------
000BE2                      ;------------------
000BE2                      ;------------------
000BE2                      ;------------------
000BE2                      ;------------------
000BE2                      
000BE2                      
000BE2                      
000BE2                      
000BE2                      	INCLUDE	GG_LVLS.658	;LEVEL DATA
000BE2                      ;------------------
000BE2                      ;
000BE2                      ;GG_LVLS.658
000BE2                      ;
000BE2                      ;  THIS FILE CONTAINS INIT DATA FOR EACH GAME LEVEL
000BE2                      ;
000BE2                      ;
000BE2                      ;------------------
000BE2                      
000BE2                      	SECTION	GG_CODE,?	;PAGE00_GROUP
000BE2                      
000BE2                      ;------------------
000BE2                      ;LEVEL DATA FOR TITLE SCREEN
000BE2                      
000BE2                      TITLE_LVD		;---------------------------------------
000BE2                      			; *** OBJSEL $2101 ***
000BE2                      			;----------------------
000BE2 00 20                	DW	$2000	;OBJECT BASE ADDRESS
000BE4                      			;= OBJ_BASE
000BE4                      			;----------------------
000BE4 00                   	DB	$00	;OBJECT DATA AREA SELECT
000BE5                      			;= OBJ_AREA
000BE5                      			;----------------------
000BE5 03                   	DB	$03	;OBJECT SIZE 
000BE6                      			;= OBJ_SIZE
000BE6                      			;
000BE6                      			;              OBJ SIZE
000BE6                      			;   S2,S1,S0    0     1
000BE6                      			;-------------------------
000BE6                      			;0 = 0  0  0  8 DOT 16 DOT	
000BE6                      			;1 = 0  0  1  8 DOT 32 DOT	
000BE6                      			;2 = 0  1  0  8 DOT 64 DOT	
000BE6                      			;3 = 0  1  1 16 DOT 32 DOT	
000BE6                      			;4 = 1  0  0 16 DOT 64 DOT	
000BE6                      			;5 = 1  0  1 32 DOT 64 DOT	
000BE6                      		;---------------------------------------
000BE6                      			; *** BGMODE $2105 ***
000BE6                      			;----------------------
000BE6 01                   	DB	$01	;BG SCREEN MODE SELECT
000BE7                      			;= SC_MODE
000BE7                      			;----------------------
000BE7 00                   	DB	$00	;BG 3 PRIORITY
000BE8                      			;= BG3_PRIO
000BE8                      			;----------------------
000BE8 00                   	DB	$00	;BG CHAR SIZE
000BE9                      			;= BG_CSIZE
000BE9                      		;---------------------------------------
000BE9                      			; *** BG1SC $2107 ***
000BE9                      			;----------------------
000BE9 00                   	DB	$00	;BG1 SC SIZE
000BEA                      			;= BG1_SIZE
000BEA                      			;----------------------
000BEA 00 68                	DW	$6800	;BG1 SC BASE ADDRESS
000BEC                      			;= BG1_SC
000BEC                      		;---------------------------------------
000BEC                      			; *** BG2SC $2108 ***
000BEC                      			;----------------------
000BEC 00                   	DB	$00	;BG2 SC SIZE
000BED                      			;= BG2_SIZE
000BED                      			;----------------------
000BED 00 70                	DW	$7000	;BG2 SC BASE ADDRESS
000BEF                      			;= BG2_SC
000BEF                      		;---------------------------------------
000BEF                      			; *** BG3SC $2109 ***
000BEF                      			;----------------------
000BEF 00                   	DB	$00	;BG3 SC SIZE
000BF0                      			;= BG3_SIZE
000BF0                      			;----------------------
000BF0 00 78                	DW	$7800	;BG3 SC BASE ADDRESS
000BF2                      			;= BG3_SC
000BF2                      		;---------------------------------------
000BF2                      			; *** BG4SC $210A ***
000BF2                      			;----------------------
000BF2 00                   	DB	$00	;BG4 SC SIZE
000BF3                      			;= BG4_SIZE
000BF3                      			;----------------------
000BF3 00 68                	DW	$6800	;BG4 SC BASE ADDRESS
000BF5                      			;= BG4_SC
000BF5                      		;---------------------------------------
000BF5                      			; *** BG12NBA $210B ***
000BF5                      			;----------------------
000BF5 00 60                	DW	$6000	;BG 1 CHAR DATA BASE ADDRESS
000BF7                      			;= BG1_CHAR
000BF7                      			;----------------------
000BF7 00 00                	DW	$0000	;BG 2 CHAR DATA BASE ADDRESS
000BF9                      			;= BG2_CHAR
000BF9                      		;---------------------------------------
000BF9                      			; *** BG34NBA $210C ***
000BF9                      			;----------------------
000BF9 00 00                	DW	$0000	;BG 3 CHAR DATA BASE ADDRESS
000BFB                      			;= BG3_CHAR
000BFB                      			;----------------------
000BFB 00 00                	DW	$0000	;BG 4 CHAR DATA BASE ADDRESS
000BFD                      			;= BG4_CHAR
000BFD                      		;---------------------------------------
000BFD                      			; *** TM $212C ***
000BFD 03                   	DB	$03	;MAIN SCREEN DESIGNATION
000BFE                      			;= TM_VALUE
000BFE                      		;---------------------------------------
000BFE                      ;------------------
000BFE                      ;LEVEL DATA FOR LEVEL 1
000BFE                      
000BFE                      LVL1_LVD		;---------------------------------------
000BFE                      			; *** OBJSEL $2101 ***
000BFE                      			;----------------------
000BFE 00 20                	DW	$2000	;OBJECT BASE ADDRESS
000C00                      			;= OBJ_BASE
000C00                      			;----------------------
000C00 00                   	DB	$00	;OBJECT DATA AREA SELECT
000C01                      			;= OBJ_AREA
000C01                      			;----------------------
000C01 03                   	DB	$03	;OBJECT SIZE 
000C02                      			;= OBJ_SIZE
000C02                      			;
000C02                      			;              OBJ SIZE
000C02                      			;   S2,S1,S0    0     1
000C02                      			;-------------------------
000C02                      			;0 = 0  0  0  8 DOT 16 DOT	
000C02                      			;1 = 0  0  1  8 DOT 32 DOT	
000C02                      			;2 = 0  1  0  8 DOT 64 DOT	
000C02                      			;3 = 0  1  1 16 DOT 32 DOT	
000C02                      			;4 = 1  0  0 16 DOT 64 DOT	
000C02                      			;5 = 1  0  1 32 DOT 64 DOT	
000C02                      		;---------------------------------------
000C02                      			; *** BGMODE $2105 ***
000C02                      			;----------------------
000C02 01                   	DB	$01	;BG SCREEN MODE SELECT
000C03                      			;= SC_MODE
000C03                      			;----------------------
000C03 00                   	DB	$00	;BG 3 PRIORITY
000C04                      			;= BG3_PRIO
000C04                      			;----------------------
000C04 00                   	DB	$00	;BG CHAR SIZE
000C05                      			;= BG_CSIZE
000C05                      		;---------------------------------------
000C05                      			; *** BG1SC $2107 ***
000C05                      			;----------------------
000C05 01                   	DB	$01	;BG1 SC SIZE
000C06                      			;= BG1_SIZE
000C06                      			;----------------------
000C06 00 68                	DW	$6800	;BG1 SC BASE ADDRESS
000C08                      			;= BG1_SC
000C08                      		;---------------------------------------
000C08                      			; *** BG2SC $2108 ***
000C08                      			;----------------------
000C08 01                   	DB	$01	;BG2 SC SIZE
000C09                      			;= BG2_SIZE
000C09                      			;----------------------
000C09 00 70                	DW	$7000	;BG2 SC BASE ADDRESS
000C0B                      			;= BG2_SC
000C0B                      		;---------------------------------------
000C0B                      			; *** BG3SC $2109 ***
000C0B                      			;----------------------
000C0B 01                   	DB	$01	;BG3 SC SIZE
000C0C                      			;= BG3_SIZE
000C0C                      			;----------------------
000C0C 00 78                	DW	$7800	;BG3 SC BASE ADDRESS
000C0E                      			;= BG3_SC
000C0E                      		;---------------------------------------
000C0E                      			; *** BG4SC $210A ***
000C0E                      			;----------------------
000C0E 00                   	DB	$00	;BG4 SC SIZE
000C0F                      			;= BG4_SIZE
000C0F                      			;----------------------
000C0F 00 68                	DW	$6800	;BG4 SC BASE ADDRESS
000C11                      			;= BG4_SC
000C11                      		;---------------------------------------
000C11                      			; *** BG12NBA $210B ***
000C11                      			;----------------------
000C11 00 00                	DW	$0000	;BG 1 CHAR DATA BASE ADDRESS
000C13                      			;= BG1_CHAR
000C13                      			;----------------------
000C13 00 00                	DW	$0000	;BG 2 CHAR DATA BASE ADDRESS
000C15                      			;= BG2_CHAR
000C15                      		;---------------------------------------
000C15                      			; *** BG34NBA $210C ***
000C15                      			;----------------------
000C15 00 00                	DW	$0000	;BG 3 CHAR DATA BASE ADDRESS
000C17                      			;= BG3_CHAR
000C17                      			;----------------------
000C17 00 00                	DW	$0000	;BG 4 CHAR DATA BASE ADDRESS
000C19                      			;= BG4_CHAR
000C19                      		;---------------------------------------
000C19                      			; *** TM $212C ***
000C19 03                   	DB	$03	;MAIN SCREEN DESIGNATION
000C1A                      			;= TM_VALUE
000C1A                      		;---------------------------------------
000C1A                      ;------------------
000C1A                      ;LEVEL DATA FOR LEVEL 1
000C1A                      
000C1A                      LVL2_LVD		;---------------------------------------
000C1A                      			; *** OBJSEL $2101 ***
000C1A                      			;----------------------
000C1A 00 20                	DW	$2000	;OBJECT BASE ADDRESS
000C1C                      			;= OBJ_BASE
000C1C                      			;----------------------
000C1C 00                   	DB	$00	;OBJECT DATA AREA SELECT
000C1D                      			;= OBJ_AREA
000C1D                      			;----------------------
000C1D 03                   	DB	$03	;OBJECT SIZE 
000C1E                      			;= OBJ_SIZE
000C1E                      			;
000C1E                      			;              OBJ SIZE
000C1E                      			;   S2,S1,S0    0     1
000C1E                      			;-------------------------
000C1E                      			;0 = 0  0  0  8 DOT 16 DOT	
000C1E                      			;1 = 0  0  1  8 DOT 32 DOT	
000C1E                      			;2 = 0  1  0  8 DOT 64 DOT	
000C1E                      			;3 = 0  1  1 16 DOT 32 DOT	
000C1E                      			;4 = 1  0  0 16 DOT 64 DOT	
000C1E                      			;5 = 1  0  1 32 DOT 64 DOT	
000C1E                      		;---------------------------------------
000C1E                      			; *** BGMODE $2105 ***
000C1E                      			;----------------------
000C1E 01                   	DB	$01	;BG SCREEN MODE SELECT
000C1F                      			;= SC_MODE
000C1F                      			;----------------------
000C1F 00                   	DB	$00	;BG 3 PRIORITY
000C20                      			;= BG3_PRIO
000C20                      			;----------------------
000C20 00                   	DB	$00	;BG CHAR SIZE
000C21                      			;= BG_CSIZE
000C21                      		;---------------------------------------
000C21                      			; *** BG1SC $2107 ***
000C21                      			;----------------------
000C21 03                   	DB	$03	;BG1 SC SIZE
000C22                      			;= BG1_SIZE
000C22                      			;----------------------
000C22 00 68                	DW	$6800	;BG1 SC BASE ADDRESS
000C24                      			;= BG1_SC
000C24                      		;---------------------------------------
000C24                      			; *** BG2SC $2108 ***
000C24                      			;----------------------
000C24 01                   	DB	$01	;BG2 SC SIZE
000C25                      			;= BG2_SIZE
000C25                      			;----------------------
000C25 00 70                	DW	$7000	;BG2 SC BASE ADDRESS
000C27                      			;= BG2_SC
000C27                      		;---------------------------------------
000C27                      			; *** BG3SC $2109 ***
000C27                      			;----------------------
000C27 01                   	DB	$01	;BG3 SC SIZE
000C28                      			;= BG3_SIZE
000C28                      			;----------------------
000C28 00 78                	DW	$7800	;BG3 SC BASE ADDRESS
000C2A                      			;= BG3_SC
000C2A                      		;---------------------------------------
000C2A                      			; *** BG4SC $210A ***
000C2A                      			;----------------------
000C2A 00                   	DB	$00	;BG4 SC SIZE
000C2B                      			;= BG4_SIZE
000C2B                      			;----------------------
000C2B 00 68                	DW	$6800	;BG4 SC BASE ADDRESS
000C2D                      			;= BG4_SC
000C2D                      		;---------------------------------------
000C2D                      			; *** BG12NBA $210B ***
000C2D                      			;----------------------
000C2D 00 00                	DW	$0000	;BG 1 CHAR DATA BASE ADDRESS
000C2F                      			;= BG1_CHAR
000C2F                      			;----------------------
000C2F 00 00                	DW	$0000	;BG 2 CHAR DATA BASE ADDRESS
000C31                      			;= BG2_CHAR
000C31                      		;---------------------------------------
000C31                      			; *** BG34NBA $210C ***
000C31                      			;----------------------
000C31 00 00                	DW	$0000	;BG 3 CHAR DATA BASE ADDRESS
000C33                      			;= BG3_CHAR
000C33                      			;----------------------
000C33 00 00                	DW	$0000	;BG 4 CHAR DATA BASE ADDRESS
000C35                      			;= BG4_CHAR
000C35                      		;---------------------------------------
000C35                      			; *** TM $212C ***
000C35 01                   	DB	$01	;MAIN SCREEN DESIGNATION
000C36                      			;= TM_VALUE
000C36                      		;---------------------------------------
000C36                      	
000C36                      
000C36                      ;------------------
000C36                      ;------------------
000C36                      ;------------------
000C36                      ;------------------
000C36                      ;------------------
000C36                      ;------------------
000C36                      ;------------------
000C36                      ;------------------
000C36                      ;------------------
000C36                      
000C36                      
000C36                      
000C36                      	INCLUDE GG_RAM.658	;RAM ALLOCATION
000C36                      ;------------------
000C36                      ;
000C36                      ;GG_RAM.658
000C36                      ;
000C36                      ;  THE RAM MEMORY ROUTINES WILL ALLOCATE AND DEALLOCATE MEMORY ON REQUEST
000C36                      ;IN THE TWO PAGES OF RAM AT $7E,$7F.
000C36                      ;
000C36                      ;------------------
000C36                      ;PAGE $7E MEMORY MAP
000C36                      ;
000C36                      ;$0000-$2000 = PAGE ZERO AREA
000C36                      ;
000C36                      ;$2000-$3000 = SCRN BUFFER = 32 x 32 TILE SCREEN BUFFER
000C36                      ;
000C36                      ;------------------
000C36                      ;RAM EQUATES
000C36                      
000C36                      
000C36 =007E2000            SCRN_BUF	EQU	$7E2000	;32 x 32 TILE SCREEN BUFFER
000C36                      
000C36 =007E4000            RAM_START	EQU	$7E4000	;EMPTY RAM STARTS HERE
000C36                      
000C36                      
000C36                      ;------------------
000C36                      
000C36                      	SECTION	GG_CODE,?
000C36                      
000C36                      ;------------------
000C36                      ;ALLOC_RAM -- ALLOCATE MEMORY
000C36                      ;
000C36                      ;	ACC -- SIZE OF AREA TO ALLOCATE
000C36                      ;
000C36                      ;	CARRY SET   - NO RAM AVAILABLE
000C36                      ;	CARRY CLEAR - ACC = RAM BLOCK HANDLE
000C36                      
000C36                      ALLOC_RAM	MODULE
000C36                      
000C36 08                   	PHP
000C37 8B                   	PHB
000C38                      ;-----
000C38 C2 30                	SET_AXY16
000C3A 8D 00 00             	STA	RAM_SIZE	;SAVE SIZE OF RAM NEEDED
000C3D C9 00 00             	CMP	#0	;EMPTY ?
000C40 F0 00                	BEQ	NO_RAM	;THEN GOODBYE
000C42                      ;-----
000C42                      ;LOOK FOR AN EMPTY SLOT
000C42 A2 00 00             	LDX	#0
000C45 BD 00 00             @LOOP	LDA	RAM_SIZE0,X	;ALLOCATED ?
000C48 C9 00 00             	CMP	#0
000C4B F0 00                	BEQ	FOUND_BLOCK
000C4D E8                   	INX
000C4E E8                   	INX
000C4F E0 10 00             	CPX	#8*2	;LOOKED AT ALL
000C52 D0 00                	BNE	@LOOP
000C54 38                   	SEC
000C55 4C 00 00             	JMP	NO_RAM
000C58                      ;-----
000C58 8A                   FOUND_BLOCK	TXA
000C59 0A                   	ASL	A	;DOUBLE WORD PTR
000C5A A8                   	TAY
000C5B AD 00 00             	LDA	RAM_SIZE	;GET SIZE OF BLOCK TO ALLOCATE
000C5E 9D 00 00             	STA	RAM_SIZE0,X	;SAVE IT IN BLOCK
000C61 AD 00 00             	LDA	NEXT_RAM
000C64 99 00 00             	STA	RAM_BLOCK0,Y	;SAVE LOCATION
000C67 AD 00 00             	LDA	NEXT_RAM+2	;GET BANK #
000C6A 99 00 00             	STA	RAM_BLOCK0+2,Y	;SAVE BANK #
000C6D                      ;
000C6D AD 00 00             	LDA	NEXT_RAM  	;MAKE NEW FREE ADDRESS
000C70 18                   	CLC
000C71 6D 00 00             	ADC	RAM_SIZE
000C74 8D 00 00             	STA	NEXT_RAM
000C77 AD 00 00             	LDA	NEXT_RAM+2	;GET BANK
000C7A 69 00 00             	ADC	#0
000C7D 8D 00 00             	STA	NEXT_RAM+2
000C80 18                   	CLC
000C81 98                   	TYA		;SAVE DOUBLE WORD HANDLE TO ACC
000C82                      ;-----
000C82 9C 00 00             NO_RAM	STZ	RAM_SIZE	;CLEAR FOR NEXT TIME
000C85 AB                   	PLB
000C86 28                   	PLP
000C87 6B                   	RTL
000C88                      
000C88                      	MODEND
000C88                      
000C88                      ;------------------
000C88                      ;DEALLOC_RAM -- REMOVE ALLOCATION BLOCK. MOVE ANY HIGHER BLOCK DOWN.
000C88                      
000C88                      DEALLOC_RAM	MODULE
000C88                      
000C88 08                   	PHP
000C89 8B                   	PHB
000C8A                      ;-----
000C8A                      
000C8A                      
000C8A                      ;-----
000C8A AB                   	PLB
000C8B 28                   	PLP
000C8C 6B                   	RTL
000C8D                      
000C8D                      	MODEND
000C8D                      
000C8D                      ;------------------
000C8D                      ;RESET_RAM -- RESET ALL THE MEMORY BLOCK SO NO RAM IS ALLOCATED
000C8D                      
000C8D                      RESET_RAM	MODULE
000C8D                      
000C8D 08                   	PHP
000C8E 8B                   	PHB
000C8F                      ;-----
000C8F C2 30                	SET_AXY16
000C91 9C 00 00             	STZ	RAM_SIZE
000C94 9C 00 00             	STZ	RAM_BLOCK0	;CLEAR FIRST ONE
000C97 A2 00 00             	LDX	#<RAM_BLOCK0	;FROM
000C9A A0 00 00             	LDY	#<RAM_BLOCK0+1	;TO
000C9D A9 2E 00             	LDA	#(4*8)+(2*8)-2	;LENGTH
000CA0 54 00 00             	MVN	0,0	;ZERO OUT AREA
000CA3                      ;
000CA3 A9 00 40             	LDA	#<RAM_START	;START OF RAM
000CA6 8D 00 00             	STA	NEXT_RAM
000CA9 A9 7E 00             	LDA	#^RAM_START	;PAGE #
000CAC 8D 00 00             	STA	NEXT_RAM+2
000CAF                      ;-----
000CAF AB                   	PLB
000CB0 28                   	PLP
000CB1 6B                   	RTL
000CB2                      
000CB2                      	MODEND
000CB2                      ;------------------
000CB2                      ;------------------
000CB2                      ;------------------
000CB2                      ;------------------
000CB2                      ;------------------
000CB2                      ;------------------
000CB2                      ;------------------
000CB2                      ;------------------
000CB2                      ;------------------
000CB2                      ;------------------
000CB2                      
000CB2                      	INCLUDE	GG_SCRL.658	;SCROLL ROUTINES
000CB2                      ;------------------
000CB2                      ;
000CB2                      ;GG_SCRL.658
000CB2                      ;
000CB2                      ;  THE SCROLL ROUTINES HANDLE THE REFREASHING OF THE SCREEN EDGES
000CB2                      ;AS THE PLAYER'S CHARACTER MOVES AROUND THE GAME MAP
000CB2                      ;
000CB2                      ;
000CB2                      ;------------------
000CB2                      
000CB2                      	SECTION	GG_CODE,?
000CB2                      
000CB2                      ;------------------
000CB2                      ;EQUATES
000CB2                      
000CB2                      ;------------------
000CB2                      ;MOVE_RIGHT -- SCROLL SCREEN TO LEFT WHILE MOVING RIGHT
000CB2                      ;FILL THE RIGHT EDGE WITH NEW DATA
000CB2                      
000CB2                      MOVE_RIGHT	MODULE
000CB2                      
000CB2 08                   	PHP
000CB3                      ;-----
000CB3 C2 20                	SET_A16
000CB5 18                   	CLC
000CB6 AD 00 00             	LDA	MAP1_SCRLX	;GET CURRENT SCROLL X
000CB9 69 02 00             	ADC	#2
000CBC 8D 00 00             	STA	MAP1_SCRLX
000CBF E2 20                	SET_A8
000CC1 8D 0D 21             	STA	BG1HOFS	;LOW BYTE
000CC4 EB                   	XBA
000CC5 8D 0D 21             	STA	BG1HOFS	;HIGH BYTE
000CC8 EB                   	XBA
000CC9 8D 0F 21             	STA	BG2HOFS	;LOW BYTE
000CCC EB                   	XBA
000CCD 8D 0F 21             	STA	BG2HOFS	;HIGH BYTE
000CD0 EB                   	XBA
000CD1 8D 11 21             	STA	BG3HOFS	;LOW BYTE
000CD4 EB                   	XBA
000CD5 8D 11 21             	STA	BG3HOFS	;HIGH BYTE
000CD8                      ;-----
000CD8 28                   	PLP
000CD9 6B                   	RTL
000CDA                      
000CDA                      	MODEND
000CDA                      
000CDA                      ;------------------
000CDA                      ;MOVE_LEFT -- SCROLL SCREEN TO RIGHT WHILE MOVING LEFT
000CDA                      ;FILL THE LEFT EDGE WITH NEW DATA
000CDA                      
000CDA                      MOVE_LEFT	MODULE
000CDA                      
000CDA 08                   	PHP
000CDB                      ;-----
000CDB C2 20                	SET_A16
000CDD 38                   	SEC
000CDE AD 00 00             	LDA	MAP1_SCRLX	;GET CURRENT SCROLL X
000CE1 E9 02 00             	SBC	#2
000CE4 8D 00 00             	STA	MAP1_SCRLX
000CE7 E2 20                	SET_A8
000CE9 8D 0D 21             	STA	BG1HOFS	;LOW BYTE
000CEC EB                   	XBA
000CED 8D 0D 21             	STA	BG1HOFS	;HIGH BYTE
000CF0 EB                   	XBA
000CF1 8D 0F 21             	STA	BG2HOFS	;LOW BYTE
000CF4 EB                   	XBA
000CF5 8D 0F 21             	STA	BG2HOFS	;HIGH BYTE
000CF8 EB                   	XBA
000CF9 8D 11 21             	STA	BG3HOFS	;LOW BYTE
000CFC EB                   	XBA
000CFD 8D 11 21             	STA	BG3HOFS	;HIGH BYTE
000D00                      ;-----
000D00 28                   	PLP
000D01 6B                   	RTL
000D02                      
000D02                      	MODEND
000D02                      
000D02                      
000D02                      ;------------------
000D02                      ;MOVE_DOWN -- SCROLL SCREEN UP WHILE MOVING DOWN
000D02                      ;FILL THE BOTTOM EDGE WITH NEW DATA
000D02                      
000D02                      MOVE_DOWN	MODULE
000D02                      
000D02 08                   	PHP
000D03                      ;-----
000D03 C2 20                	SET_A16
000D05 18                   	CLC
000D06 AD 00 00             	LDA	MAP1_SCRLY	;GET CURRENT SCROLL Y
000D09 69 02 00             	ADC	#2
000D0C 8D 00 00             	STA	MAP1_SCRLY
000D0F E2 20                	SET_A8
000D11 8D 0E 21             	STA	BG1VOFS	;LOW BYTE
000D14 EB                   	XBA
000D15 8D 0E 21             	STA	BG1VOFS	;HIGH BYTE
000D18 EB                   	XBA
000D19 8D 10 21             	STA	BG2VOFS	;LOW BYTE
000D1C EB                   	XBA
000D1D 8D 10 21             	STA	BG2VOFS	;HIGH BYTE
000D20 EB                   	XBA
000D21 8D 12 21             	STA	BG3VOFS	;LOW BYTE
000D24 EB                   	XBA
000D25 8D 12 21             	STA	BG3VOFS	;HIGH BYTE
000D28                      ;-----
000D28 28                   	PLP
000D29 6B                   	RTL
000D2A                      
000D2A                      	MODEND
000D2A                      
000D2A                      ;------------------
000D2A                      ;MOVE_UP -- SCROLL SCREEN DOWN WHILE MOVING UP
000D2A                      ;FILL THE TOP EDGE WITH NEW DATA
000D2A                      
000D2A                      MOVE_UP	MODULE
000D2A                      
000D2A 08                   	PHP
000D2B                      ;-----
000D2B C2 20                	SET_A16
000D2D 38                   	SEC
000D2E AD 00 00             	LDA	MAP1_SCRLY	;GET CURRENT SCROLL Y
000D31 E9 02 00             	SBC	#2
000D34 8D 00 00             	STA	MAP1_SCRLY
000D37 E2 20                	SET_A8
000D39 8D 0E 21               	STA	BG1VOFS	;LOW BYTE
000D3C EB                   	XBA
000D3D 8D 0E 21             	STA	BG1VOFS	;HIGH BYTE
000D40 EB                   	XBA
000D41 8D 10 21             	STA	BG2VOFS	;LOW BYTE
000D44 EB                   	XBA
000D45 8D 10 21             	STA	BG2VOFS	;HIGH BYTE
000D48 EB                   	XBA
000D49 8D 12 21             	STA	BG3VOFS	;LOW BYTE
000D4C EB                   	XBA
000D4D 8D 12 21             	STA	BG3VOFS	;HIGH BYTE
000D50                      ;-----
000D50 28                   	PLP
000D51 6B                   	RTL
000D52                      
000D52                      	MODEND
000D52                      
000D52                      ;------------------
000D52                      ;------------------
000D52                      ;------------------
000D52                      ;------------------
000D52                      ;------------------
000D52                      ;------------------
000D52                      ;------------------
000D52                      ;------------------
000D52                      ;------------------
000D52                      ;------------------
000D52                      ;------------------
000D52                      
000D52                      
000D52                      
000D52                      	INCLUDE	GG_TEXT.658	;TEXT OUTPUT ROUTINES
000D52                      ;------------------
000D52                      ;
000D52                      ;GG_TEXT.658
000D52                      ;
000D52                      ;  TEXT HANDLING ROUTINES
000D52                      ;
000D52                      ;
000D52                      ;------------------
000D52                      
000D52                      	SECTION	GG_CODE,?
000D52                      
000D52                      ;------------------
000D52                      ;EQUATES
000D52                      
000D52                      
000D52 54 48 49 53 20 49 +  MSG1	DB	'THIS IS A TEST MESSAGE',13
000D69 21 22 23 24 25 26 +  	DB	'!"#$%&''()*+,-./',13
000D79 30 31 32 33 34 35 +  	DB	'0123456789:;<=>?@',13
000D8B 41 42 43 44 45 46 +  	DB	'ABCDEFGHIJKLMNOPQRSTUV',13
000DA2 57 58 59 5A 5B 5C +  	DB	'WXYZ[\]^_`abcdefghijkl',13
000DB9 6D 6E 6F 70 71 72 +  	DB	'mnopqrstuvwxyz{|}~',0
000DCC                      
000DCC                      ;------------------
000DCC                      ;TEST_TEXT -- 
000DCC                      
000DCC                      TEST_TEXT	MODULE
000DCC                      
000DCC 08                   	PHP
000DCD                      ;-----
000DCD C2 20                	SET_A16
000DCF A9 00 00             	LDA	#$00	;0C00
000DD2 8D 00 00             	STA	TEXT_PAL
000DD5 A9 00 00             	LDA	#0	;706
000DD8 8D 00 00             	STA	CHAR_BASE
000DDB A9 00 00             	LDA	#<MSG1
000DDE 8D 00 00             	STA	TEXT_ADDR
000DE1 E2 20                	SET_A8
000DE3 A9 00                	LDA	#^MSG1
000DE5 8D 00 00             	STA	TEXT_ADDR+2
000DE8 C2 20                	SET_A16
000DEA A2 05 00             	LDX	#5
000DED A0 0C 00             	LDY	#12
000DF0 22 00 00 00          	JSL	PRINT_TEXT
000DF4 AD 00 00             	LDA	SCRN_PTR
000DF7 48                   	PHA
000DF8 A0 00 00             	LDY	#0	;SCREEN OFFSET
000DFB A9 00 00             	LDA	#0
000DFE 8D 00 00             	STA	SCRN_PTR
000E01 20 00 00             	JSR	DMA_SCRN
000E04 68                   	PLA
000E05 8D 00 00             	STA	SCRN_PTR
000E08                      ;-----
000E08 28                   	PLP
000E09 6B                   	RTL
000E0A                      
000E0A                      	MODEND
000E0A                      
000E0A                      ;------------------
000E0A                      ;PRINT_TEXT -- PRINT OUT A TEXT STRING TO SCRN_BUF
000E0A                      ;
000E0A                      ;	X - SCRN X
000E0A                      ;	Y - SCRN Y 
000E0A                      ;
000E0A                      ;	ADDRESS OF TEXT STRING IS IN TEXT_ADDR.
000E0A                      ;	NEED TO SET TEXT_PAL.
000E0A                      ;	NEED TO SET CHAR_BASE BEFORE USING FOR FIRST TIME.
000E0A                      
000E0A                      PRINT_TEXT	MODULE
000E0A                      
000E0A 08                   	PHP
000E0B 8B                   	PHB
000E0C E2 20                	SET_A8
000E0E A9 7E                	LDA	#^SCRN_BUF	;GET PAGE OF SCRN_BUF
000E10 48                   	PHA
000E11 AB                   	PLB		;SET DATA BANK TO IT
000E12 C2 30                	SET_AXY16
000E14                      ;-----
000E14 98                   	TYA		;GET SCRN Y
000E15 0A                   	ASL	A
000E16 0A                   	ASL	A
000E17 0A                   	ASL	A
000E18 0A                   	ASL	A
000E19 0A                   	ASL	A
000E1A 0A                   	ASL	A	;Y x 32 x 2
000E1B 8D 00 00             	STA	TEXT_PTR
000E1E 18                   	CLC
000E1F 8A                   	TXA
000E20 0A                   	ASL	A
000E21 6D 00 00             	ADC	TEXT_PTR
000E24 8D 00 00             	STA	TEXT_PTR
000E27 AA                   	TAX		;SET DEST POINTER
000E28                      ;-----
000E28 A0 00 00             	LDY	#0
000E2B E2 20                	SET_A8
000E2D B7 00                @LOOP1	LDA	[TEXT_ADDR],Y	;GET NEXT CHARACTER
000E2F C8                   	INY
000E30 C9 00                	CMP	#0	;END OF TEXT ?
000E32 F0 00                	BEQ	@TEXT_END
000E34 C9 0D                	CMP	#13	;CARRIAGE RETURN ?
000E36 F0 00                	BEQ	@DO_RETURN
000E38 20 00 00             	JSR	CHAR_8X8	;PRINT THE CHARACTER
000E3B 4C 00 00             	JMP	@LOOP1
000E3E                      ;-----
000E3E C2 20                @DO_RETURN	SET_A16
000E40 AD 00 00             	LDA	TEXT_PTR	;GET START OF THIS ROW
000E43 18                   	CLC
000E44 69 40 00             	ADC	#32*2	;NEXT ROW
000E47 8D 00 00             	STA	TEXT_PTR
000E4A AA                   	TAX
000E4B E2 20                	SET_A8
000E4D 4C 00 00             	JMP	@LOOP1
000E50                      ;-----
000E50                      @TEXT_END:
000E50 AB                   	PLB
000E51 28                   	PLP
000E52 6B                   	RTL
000E53                      
000E53                      	MODEND
000E53                      
000E53                      ;------------------
000E53                      ;CHAR_8X8 -- DRAW AN 8X8 CHAR
000E53                      ;
000E53                      ;	ACC 	- CHAR #
000E53                      ;	X	- DEST OFFSET
000E53                      
000E53                      CHAR_8X8	MODULE
000E53                      
000E53 08                   	PHP
000E54 38                   	SEC
000E55 E9 20                	SBC	#32	;ADJUST TO 0
000E57 C2 20                	SET_A16
000E59 29 FF 00             	AND	#$00FF	;CLEAR HIGH BYTE
000E5C 18                   	CLC
000E5D 6D 00 00             	ADC	CHAR_BASE	;ADD FIRST CHAR # FOR TEXT
000E60 0D 00 00             	ORA	TEXT_PAL	;ADD IN PAL FLIP AND PRIORITY
000E63 9F 00 20 7E          	STA	SCRN_BUF,X	;PRINT THE CHAR
000E67 E8                   	INX
000E68 E8                   	INX		;NEXT CHAR
000E69 28                   	PLP
000E6A 60                   	RTS
000E6B                      
000E6B                      	MODEND
000E6B                      
000E6B                      ;------------------
000E6B                      ;------------------
000E6B                      ;------------------
000E6B                      
000E6B                      ;------------------
000E6B                      ;------------------
000E6B                      ;------------------
000E6B                      ;------------------
000E6B                      ;------------------
000E6B                      ;------------------
000E6B                      ;------------------
000E6B                      ;------------------
000E6B                      ;------------------
000E6B                      
